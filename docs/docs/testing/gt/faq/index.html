<!doctype html>
<html lang="en-GB" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-testing/gt/faq" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.2">
<title data-rh="true">GoogleTest FAQ | Kumo Foundamental</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://your-docusaurus-site.example.com/cppdev/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://your-docusaurus-site.example.com/cppdev/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://your-docusaurus-site.example.com/cppdev/docs/testing/gt/faq"><meta data-rh="true" property="og:locale" content="en_GB"><meta data-rh="true" property="og:locale:alternate" content="zh_cn"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="GoogleTest FAQ | Kumo Foundamental"><meta data-rh="true" name="description" content="Why should test suite names and test names not contain underscore?"><meta data-rh="true" property="og:description" content="Why should test suite names and test names not contain underscore?"><link data-rh="true" rel="icon" href="/cppdev/img/favicon.svg"><link data-rh="true" rel="canonical" href="https://your-docusaurus-site.example.com/cppdev/docs/testing/gt/faq"><link data-rh="true" rel="alternate" href="https://your-docusaurus-site.example.com/cppdev/docs/testing/gt/faq" hreflang="en-GB"><link data-rh="true" rel="alternate" href="https://your-docusaurus-site.example.com/cppdev/zh-cn/docs/testing/gt/faq" hreflang="zh-cn"><link data-rh="true" rel="alternate" href="https://your-docusaurus-site.example.com/cppdev/docs/testing/gt/faq" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Foundamentals","item":"https://your-docusaurus-site.example.com/cppdev/docs/category/foundamentals"},{"@type":"ListItem","position":2,"name":"Performance Testing and Unit Testing","item":"https://your-docusaurus-site.example.com/cppdev/docs/testing/"},{"@type":"ListItem","position":3,"name":"Google Test","item":"https://your-docusaurus-site.example.com/cppdev/docs/category/google-test"},{"@type":"ListItem","position":4,"name":"GoogleTest FAQ","item":"https://your-docusaurus-site.example.com/cppdev/docs/testing/gt/faq"}]}</script><link rel="alternate" type="application/rss+xml" href="/cppdev/blog/rss.xml" title="Kumo Foundamental RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/cppdev/blog/atom.xml" title="Kumo Foundamental Atom Feed"><link rel="stylesheet" href="/cppdev/assets/css/styles.a7490ef4.css">
<script src="/cppdev/assets/js/runtime~main.fd8f228b.js" defer="defer"></script>
<script src="/cppdev/assets/js/main.0e500fd9.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")),document.documentElement.setAttribute("data-theme-choice",t||"system")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/cppdev/img/kumo-logo.svg"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/cppdev/"><div class="navbar__logo"><img src="/cppdev/img/kumo-logo.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/cppdev/img/kumo-logo.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Foundamental</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/cppdev/docs/intro">Tutorial</a><a class="navbar__item navbar__link" href="/cppdev/docs/integration/overview">Integration</a><a class="navbar__item navbar__link" href="/cppdev/blog">Blog</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_nlXk"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>English</a><ul class="dropdown__menu"><li><a href="/cppdev/docs/testing/gt/faq" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="en-GB">English</a></li><li><a href="/cppdev/zh-cn/docs/testing/gt/faq" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="zh-cn">中文（中国）</a></li></ul></div><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/cppdev/docs/intro"><span title="Overview" class="linkLabel_WmDU">Overview</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--active" href="/cppdev/docs/category/foundamentals"><span title="Foundamentals" class="categoryLinkLabel_W154">Foundamentals</span></a><button aria-label="Collapse sidebar category &#x27;Foundamentals&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--active" tabindex="0" href="/cppdev/docs/testing/"><span title="Performance Testing and Unit Testing" class="categoryLinkLabel_W154">Performance Testing and Unit Testing</span></a><button aria-label="Collapse sidebar category &#x27;Performance Testing and Unit Testing&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" tabindex="0" href="/cppdev/docs/category/doctest-unit-testing"><span title="doctest Unit Testing" class="categoryLinkLabel_W154">doctest Unit Testing</span></a><button aria-label="Expand sidebar category &#x27;doctest Unit Testing&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--active" tabindex="0" href="/cppdev/docs/category/google-test"><span title="Google Test" class="categoryLinkLabel_W154">Google Test</span></a><button aria-label="Collapse sidebar category &#x27;Google Test&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/cppdev/docs/testing/gt/platforms"><span title="Supported Platforms" class="linkLabel_WmDU">Supported Platforms</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/cppdev/docs/testing/gt/quickstart-bazel"><span title="Quickstart: Building with Bazel" class="linkLabel_WmDU">Quickstart: Building with Bazel</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/cppdev/docs/testing/gt/quickstart-cmake"><span title="Quickstart: Building with CMake" class="linkLabel_WmDU">Quickstart: Building with CMake</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/cppdev/docs/testing/gt/primer"><span title="GoogleTest Primer" class="linkLabel_WmDU">GoogleTest Primer</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/cppdev/docs/testing/gt/advanced"><span title="Advanced GoogleTest Topics" class="linkLabel_WmDU">Advanced GoogleTest Topics</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/cppdev/docs/testing/gt/gmock_for_dummies"><span title="gMock for Dummies" class="linkLabel_WmDU">gMock for Dummies</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/cppdev/docs/testing/gt/gmock_cook_book"><span title="gMock Cookbook" class="linkLabel_WmDU">gMock Cookbook</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/cppdev/docs/testing/gt/gmock_cheat_sheet"><span title="gMock Cheat Sheet" class="linkLabel_WmDU">gMock Cheat Sheet</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/cppdev/docs/testing/gt/reference/testing"><span title="Testing Reference" class="linkLabel_WmDU">Testing Reference</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/cppdev/docs/testing/gt/reference/mocking"><span title="Mocking Reference" class="linkLabel_WmDU">Mocking Reference</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/cppdev/docs/testing/gt/reference/assertions"><span title="Assertions Reference" class="linkLabel_WmDU">Assertions Reference</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/cppdev/docs/testing/gt/reference/matchers"><span title="Matchers Reference" class="linkLabel_WmDU">Matchers Reference</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/cppdev/docs/testing/gt/reference/actions"><span title="Actions Reference" class="linkLabel_WmDU">Actions Reference</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/cppdev/docs/testing/gt/faq"><span title="GoogleTest FAQ" class="linkLabel_WmDU">GoogleTest FAQ</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/cppdev/docs/testing/gt/gmock_faq"><span title="Legacy gMock FAQ" class="linkLabel_WmDU">Legacy gMock FAQ</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/cppdev/docs/testing/gt/samples"><span title="Googletest Samples" class="linkLabel_WmDU">Googletest Samples</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/cppdev/docs/testing/gt/pkgconfig"><span title="pkgconfig" class="linkLabel_WmDU">pkgconfig</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/cppdev/docs/testing/gt/community_created_documentation"><span title="Community-Created Documentation" class="linkLabel_WmDU">Community-Created Documentation</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" tabindex="0" href="/cppdev/docs/testing/benchmark/"><span title="benchmark" class="categoryLinkLabel_W154">benchmark</span></a><button aria-label="Expand sidebar category &#x27;benchmark&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" tabindex="0" href="/cppdev/docs/log/"><span title="Log Section" class="categoryLinkLabel_W154">Log Section</span></a><button aria-label="Expand sidebar category &#x27;Log Section&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cppdev/docs/time/"><span title="Time and Calendar" class="linkLabel_WmDU">Time and Calendar</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" tabindex="0" href="/cppdev/docs/category/standardized-errors-and-error-return-values"><span title="Standardized Errors and Error Return Values" class="categoryLinkLabel_W154">Standardized Errors and Error Return Values</span></a><button aria-label="Expand sidebar category &#x27;Standardized Errors and Error Return Values&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" tabindex="0" href="/cppdev/docs/strings/"><span title="strings operations" class="categoryLinkLabel_W154">strings operations</span></a><button aria-label="Expand sidebar category &#x27;strings operations&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cppdev/docs/flags/"><span title="Turbo Command-Line Flags (Turbo Flags)" class="linkLabel_WmDU">Turbo Command-Line Flags (Turbo Flags)</span></a></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/cppdev/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/cppdev/docs/category/foundamentals"><span>Foundamentals</span></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/cppdev/docs/testing/"><span>Performance Testing and Unit Testing</span></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/cppdev/docs/category/google-test"><span>Google Test</span></a></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">GoogleTest FAQ</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>GoogleTest FAQ</h1></header>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="why-should-test-suite-names-and-test-names-not-contain-underscore">Why should test suite names and test names not contain underscore?<a href="#why-should-test-suite-names-and-test-names-not-contain-underscore" class="hash-link" aria-label="Direct link to Why should test suite names and test names not contain underscore?" title="Direct link to Why should test suite names and test names not contain underscore?" translate="no">​</a></h2>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>Note: GoogleTest reserves underscore (<code>_</code>) for special-purpose keywords, such as
<a class="" href="/cppdev/docs/testing/gt/advanced#temporarily-disabling-tests">the <code>DISABLED_</code> prefix</a>, in addition
to the following rationale.</p></div></div>
<p>Underscore (<code>_</code>) is special, as C++ reserves the following to be used by the
compiler and the standard library:</p>
<ol>
<li class="">any identifier that starts with an <code>_</code> followed by an upper-case letter, and</li>
<li class="">any identifier that contains two consecutive underscores (i.e. <code>__</code>)
<em>anywhere</em> in its name.</li>
</ol>
<p>User code is <em>prohibited</em> from using such identifiers.</p>
<p>Now let&#x27;s look at what this means for <code>TEST</code> and <code>TEST_F</code>.</p>
<p>Currently <code>TEST(TestSuiteName, TestName)</code> generates a class named
<code>TestSuiteName_TestName_Test</code>. What happens if <code>TestSuiteName</code> or <code>TestName</code>
contains <code>_</code>?</p>
<ol>
<li class="">If <code>TestSuiteName</code> starts with an <code>_</code> followed by an upper-case letter (say,
<code>_Foo</code>), we end up with <code>_Foo_TestName_Test</code>, which is reserved and thus
invalid.</li>
<li class="">If <code>TestSuiteName</code> ends with an <code>_</code> (say, <code>Foo_</code>), we get
<code>Foo__TestName_Test</code>, which is invalid.</li>
<li class="">If <code>TestName</code> starts with an <code>_</code> (say, <code>_Bar</code>), we get
<code>TestSuiteName__Bar_Test</code>, which is invalid.</li>
<li class="">If <code>TestName</code> ends with an <code>_</code> (say, <code>Bar_</code>), we get
<code>TestSuiteName_Bar__Test</code>, which is invalid.</li>
</ol>
<p>So clearly <code>TestSuiteName</code> and <code>TestName</code> cannot start or end with <code>_</code>
(Actually, <code>TestSuiteName</code> can start with <code>_</code>—as long as the <code>_</code> isn&#x27;t followed
by an upper-case letter. But that&#x27;s getting complicated. So for simplicity we
just say that it cannot start with <code>_</code>.).</p>
<p>It may seem fine for <code>TestSuiteName</code> and <code>TestName</code> to contain <code>_</code> in the
middle. However, consider this:</p>
<div class="language-c++ codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c++ codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">TEST(Time, Flies_Like_An_Arrow) { ... }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">TEST(Time_Flies, Like_An_Arrow) { ... }</span><br></span></code></pre></div></div>
<p>Now, the two <code>TEST</code>s will both generate the same class
(<code>Time_Flies_Like_An_Arrow_Test</code>). That&#x27;s not good.</p>
<p>So for simplicity, we just ask the users to avoid <code>_</code> in <code>TestSuiteName</code> and
<code>TestName</code>. The rule is more constraining than necessary, but it&#x27;s simple and
easy to remember. It also gives GoogleTest some wiggle room in case its
implementation needs to change in the future.</p>
<p>If you violate the rule, there may not be immediate consequences, but your test
may (just may) break with a new compiler (or a new version of the compiler you
are using) or with a new version of GoogleTest. Therefore it&#x27;s best to follow
the rule.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="why-does-googletest-support-expect_eqnull-ptr-and-assert_eqnull-ptr-but-not-expect_nenull-ptr-and-assert_nenull-ptr">Why does GoogleTest support <code>EXPECT_EQ(NULL, ptr)</code> and <code>ASSERT_EQ(NULL, ptr)</code> but not <code>EXPECT_NE(NULL, ptr)</code> and <code>ASSERT_NE(NULL, ptr)</code>?<a href="#why-does-googletest-support-expect_eqnull-ptr-and-assert_eqnull-ptr-but-not-expect_nenull-ptr-and-assert_nenull-ptr" class="hash-link" aria-label="Direct link to why-does-googletest-support-expect_eqnull-ptr-and-assert_eqnull-ptr-but-not-expect_nenull-ptr-and-assert_nenull-ptr" title="Direct link to why-does-googletest-support-expect_eqnull-ptr-and-assert_eqnull-ptr-but-not-expect_nenull-ptr-and-assert_nenull-ptr" translate="no">​</a></h2>
<p>First of all, you can use <code>nullptr</code> with each of these macros, e.g.
<code>EXPECT_EQ(ptr, nullptr)</code>, <code>EXPECT_NE(ptr, nullptr)</code>, <code>ASSERT_EQ(ptr, nullptr)</code>,
<code>ASSERT_NE(ptr, nullptr)</code>. This is the preferred syntax in the style guide
because <code>nullptr</code> does not have the type problems that <code>NULL</code> does.</p>
<p>Due to some peculiarity of C++, it requires some non-trivial template meta
programming tricks to support using <code>NULL</code> as an argument of the <code>EXPECT_XX()</code>
and <code>ASSERT_XX()</code> macros. Therefore we only do it where it&#x27;s most needed
(otherwise we make the implementation of GoogleTest harder to maintain and more
error-prone than necessary).</p>
<p>Historically, the <code>EXPECT_EQ()</code> macro took the <em>expected</em> value as its first
argument and the <em>actual</em> value as the second, though this argument order is now
discouraged. It was reasonable that someone wanted
to write <code>EXPECT_EQ(NULL, some_expression)</code>, and this indeed was requested
several times. Therefore we implemented it.</p>
<p>The need for <code>EXPECT_NE(NULL, ptr)</code> wasn&#x27;t nearly as strong. When the assertion
fails, you already know that <code>ptr</code> must be <code>NULL</code>, so it doesn&#x27;t add any
information to print <code>ptr</code> in this case. That means <code>EXPECT_TRUE(ptr != NULL)</code>
works just as well.</p>
<p>If we were to support <code>EXPECT_NE(NULL, ptr)</code>, for consistency we&#x27;d have to
support <code>EXPECT_NE(ptr, NULL)</code> as well. This means using the template meta
programming tricks twice in the implementation, making it even harder to
understand and maintain. We believe the benefit doesn&#x27;t justify the cost.</p>
<p>Finally, with the growth of the gMock matcher library, we are encouraging people
to use the unified <code>EXPECT_THAT(value, matcher)</code> syntax more often in tests. One
significant advantage of the matcher approach is that matchers can be easily
combined to form new matchers, while the <code>EXPECT_NE</code>, etc, macros cannot be
easily combined. Therefore we want to invest more in the matchers than in the
<code>EXPECT_XX()</code> macros.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="i-need-to-test-that-different-implementations-of-an-interface-satisfy-some-common-requirements-should-i-use-typed-tests-or-value-parameterized-tests">I need to test that different implementations of an interface satisfy some common requirements. Should I use typed tests or value-parameterized tests?<a href="#i-need-to-test-that-different-implementations-of-an-interface-satisfy-some-common-requirements-should-i-use-typed-tests-or-value-parameterized-tests" class="hash-link" aria-label="Direct link to I need to test that different implementations of an interface satisfy some common requirements. Should I use typed tests or value-parameterized tests?" title="Direct link to I need to test that different implementations of an interface satisfy some common requirements. Should I use typed tests or value-parameterized tests?" translate="no">​</a></h2>
<p>For testing various implementations of the same interface, either typed tests or
value-parameterized tests can get it done. It&#x27;s really up to you the user to
decide which is more convenient for you, depending on your particular case. Some
rough guidelines:</p>
<ul>
<li class="">Typed tests can be easier to write if instances of the different
implementations can be created the same way, modulo the type. For example,
if all these implementations have a public default constructor (such that
you can write <code>new TypeParam</code>), or if their factory functions have the same
form (e.g. <code>CreateInstance&lt;TypeParam&gt;()</code>).</li>
<li class="">Value-parameterized tests can be easier to write if you need different code
patterns to create different implementations&#x27; instances, e.g. <code>new Foo</code> vs
<code>new Bar(5)</code>. To accommodate for the differences, you can write factory
function wrappers and pass these function pointers to the tests as their
parameters.</li>
<li class="">When a typed test fails, the default output includes the name of the type,
which can help you quickly identify which implementation is wrong.
Value-parameterized tests only show the number of the failed iteration by
default. You will need to define a function that returns the iteration name
and pass it as the third parameter to INSTANTIATE_TEST_SUITE_P to have more
useful output.</li>
<li class="">When using typed tests, you need to make sure you are testing against the
interface type, not the concrete types (in other words, you want to make
sure <code>implicit_cast&lt;MyInterface*&gt;(my_concrete_impl)</code> works, not just that
<code>my_concrete_impl</code> works). It&#x27;s less likely to make mistakes in this area
when using value-parameterized tests.</li>
</ul>
<p>I hope I didn&#x27;t confuse you more. :-) If you don&#x27;t mind, I&#x27;d suggest you to give
both approaches a try. Practice is a much better way to grasp the subtle
differences between the two tools. Once you have some concrete experience, you
can much more easily decide which one to use the next time.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="my-death-test-modifies-some-state-but-the-change-seems-lost-after-the-death-test-finishes-why">My death test modifies some state, but the change seems lost after the death test finishes. Why?<a href="#my-death-test-modifies-some-state-but-the-change-seems-lost-after-the-death-test-finishes-why" class="hash-link" aria-label="Direct link to My death test modifies some state, but the change seems lost after the death test finishes. Why?" title="Direct link to My death test modifies some state, but the change seems lost after the death test finishes. Why?" translate="no">​</a></h2>
<p>Death tests (<code>EXPECT_DEATH</code>, etc.) are executed in a sub-process s.t. the
expected crash won&#x27;t kill the test program (i.e. the parent process). As a
result, any in-memory side effects they incur are observable in their respective
sub-processes, but not in the parent process. You can think of them as running
in a parallel universe, more or less.</p>
<p>In particular, if you use mocking and the death test statement invokes some mock
methods, the parent process will think the calls have never occurred. Therefore,
you may want to move your <code>EXPECT_CALL</code> statements inside the <code>EXPECT_DEATH</code>
macro.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="expect_eqhtonlblah-blah_blah-generates-weird-compiler-errors-in-opt-mode-is-this-a-googletest-bug">EXPECT_EQ(htonl(blah), blah_blah) generates weird compiler errors in opt mode. Is this a GoogleTest bug?<a href="#expect_eqhtonlblah-blah_blah-generates-weird-compiler-errors-in-opt-mode-is-this-a-googletest-bug" class="hash-link" aria-label="Direct link to EXPECT_EQ(htonl(blah), blah_blah) generates weird compiler errors in opt mode. Is this a GoogleTest bug?" title="Direct link to EXPECT_EQ(htonl(blah), blah_blah) generates weird compiler errors in opt mode. Is this a GoogleTest bug?" translate="no">​</a></h2>
<p>Actually, the bug is in <code>htonl()</code>.</p>
<p>According to <code>&#x27;man htonl&#x27;</code>, <code>htonl()</code> is a <em>function</em>, which means it&#x27;s valid to
use <code>htonl</code> as a function pointer. However, in opt mode <code>htonl()</code> is defined as
a <em>macro</em>, which breaks this usage.</p>
<p>Worse, the macro definition of <code>htonl()</code> uses a <code>gcc</code> extension and is <em>not</em>
standard C++. That hacky implementation has some ad hoc limitations. In
particular, it prevents you from writing <code>Foo&lt;sizeof(htonl(x))&gt;()</code>, where <code>Foo</code>
is a template that has an integral argument.</p>
<p>The implementation of <code>EXPECT_EQ(a, b)</code> uses <code>sizeof(... a ...)</code> inside a
template argument, and thus doesn&#x27;t compile in opt mode when <code>a</code> contains a call
to <code>htonl()</code>. It is difficult to make <code>EXPECT_EQ</code> bypass the <code>htonl()</code> bug, as
the solution must work with different compilers on various platforms.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="the-compiler-complains-about-undefined-references-to-some-static-const-member-variables-but-i-did-define-them-in-the-class-body-whats-wrong">The compiler complains about &quot;undefined references&quot; to some static const member variables, but I did define them in the class body. What&#x27;s wrong?<a href="#the-compiler-complains-about-undefined-references-to-some-static-const-member-variables-but-i-did-define-them-in-the-class-body-whats-wrong" class="hash-link" aria-label="Direct link to The compiler complains about &quot;undefined references&quot; to some static const member variables, but I did define them in the class body. What&#x27;s wrong?" title="Direct link to The compiler complains about &quot;undefined references&quot; to some static const member variables, but I did define them in the class body. What&#x27;s wrong?" translate="no">​</a></h2>
<p>If your class has a static data member:</p>
<div class="language-c++ codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c++ codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// foo.h</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class Foo {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  static const int kBar = 100;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">};</span><br></span></code></pre></div></div>
<p>you also need to define it <em>outside</em> of the class body in <code>foo.cc</code>:</p>
<div class="language-c++ codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c++ codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">const int Foo::kBar;  // No initializer here.</span><br></span></code></pre></div></div>
<p>Otherwise your code is <strong>invalid C++</strong>, and may break in unexpected ways. In
particular, using it in GoogleTest comparison assertions (<code>EXPECT_EQ</code>, etc.)
will generate an &quot;undefined reference&quot; linker error. The fact that &quot;it used to
work&quot; doesn&#x27;t mean it&#x27;s valid. It just means that you were lucky. :-)</p>
<p>If the declaration of the static data member is <code>constexpr</code> then it is
implicitly an <code>inline</code> definition, and a separate definition in <code>foo.cc</code> is not
needed:</p>
<div class="language-c++ codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c++ codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// foo.h</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class Foo {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  static constexpr int kBar = 100;  // Defines kBar, no need to do it in foo.cc.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">};</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="can-i-derive-a-test-fixture-from-another">Can I derive a test fixture from another?<a href="#can-i-derive-a-test-fixture-from-another" class="hash-link" aria-label="Direct link to Can I derive a test fixture from another?" title="Direct link to Can I derive a test fixture from another?" translate="no">​</a></h2>
<p>Yes.</p>
<p>Each test fixture has a corresponding and same named test suite. This means only
one test suite can use a particular fixture. Sometimes, however, multiple test
cases may want to use the same or slightly different fixtures. For example, you
may want to make sure that all of a GUI library&#x27;s test suites don&#x27;t leak
important system resources like fonts and brushes.</p>
<p>In GoogleTest, you share a fixture among test suites by putting the shared logic
in a base test fixture, then deriving from that base a separate fixture for each
test suite that wants to use this common logic. You then use <code>TEST_F()</code> to write
tests using each derived fixture.</p>
<p>Typically, your code looks like this:</p>
<div class="language-c++ codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c++ codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// Defines a base test fixture.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class BaseTest : public ::testing::Test {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> protected:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">};</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Derives a fixture FooTest from BaseTest.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class FooTest : public BaseTest {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> protected:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  void SetUp() override {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    BaseTest::SetUp();  // Sets up the base fixture first.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ... additional set-up work ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  void TearDown() override {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ... clean-up work for FooTest ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    BaseTest::TearDown();  // Remember to tear down the base fixture</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                           // after cleaning up FooTest!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ... functions and variables for FooTest ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">};</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Tests that use the fixture FooTest.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">TEST_F(FooTest, Bar) { ... }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">TEST_F(FooTest, Baz) { ... }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">... additional fixtures derived from BaseTest ...</span><br></span></code></pre></div></div>
<p>If necessary, you can continue to derive test fixtures from a derived fixture.
GoogleTest has no limit on how deep the hierarchy can be.</p>
<p>For a complete example using derived test fixtures, see
<a href="https://github.com/google/googletest/blob/main/googletest/samples/sample5_unittest.cc" target="_blank" rel="noopener noreferrer" class="">sample5_unittest.cc</a>.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="my-compiler-complains-void-value-not-ignored-as-it-ought-to-be-what-does-this-mean">My compiler complains &quot;void value not ignored as it ought to be.&quot; What does this mean?<a href="#my-compiler-complains-void-value-not-ignored-as-it-ought-to-be-what-does-this-mean" class="hash-link" aria-label="Direct link to My compiler complains &quot;void value not ignored as it ought to be.&quot; What does this mean?" title="Direct link to My compiler complains &quot;void value not ignored as it ought to be.&quot; What does this mean?" translate="no">​</a></h2>
<p>You&#x27;re probably using an <code>ASSERT_*()</code> in a function that doesn&#x27;t return <code>void</code>.
<code>ASSERT_*()</code> can only be used in <code>void</code> functions, due to exceptions being
disabled by our build system. Please see more details
<a class="" href="/cppdev/docs/testing/gt/advanced#assertion-placement">here</a>.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="my-death-test-hangs-or-seg-faults-how-do-i-fix-it">My death test hangs (or seg-faults). How do I fix it?<a href="#my-death-test-hangs-or-seg-faults-how-do-i-fix-it" class="hash-link" aria-label="Direct link to My death test hangs (or seg-faults). How do I fix it?" title="Direct link to My death test hangs (or seg-faults). How do I fix it?" translate="no">​</a></h2>
<p>In GoogleTest, death tests are run in a child process and the way they work is
delicate. To write death tests you really need to understand how they work—see
the details at <a class="" href="/cppdev/docs/testing/gt/reference/assertions#death">Death Assertions</a> in the
Assertions Reference.</p>
<p>In particular, death tests don&#x27;t like having multiple threads in the parent
process. So the first thing you can try is to eliminate creating threads outside
of <code>EXPECT_DEATH()</code>. For example, you may want to use mocks or fake objects
instead of real ones in your tests.</p>
<p>Sometimes this is impossible as some library you must use may be creating
threads before <code>main()</code> is even reached. In this case, you can try to minimize
the chance of conflicts by either moving as many activities as possible inside
<code>EXPECT_DEATH()</code> (in the extreme case, you want to move everything inside), or
leaving as few things as possible in it. Also, you can try to set the death test
style to <code>&quot;threadsafe&quot;</code>, which is safer but slower, and see if it helps.</p>
<p>If you go with thread-safe death tests, remember that they rerun the test
program from the beginning in the child process. Therefore make sure your
program can run side-by-side with itself and is deterministic.</p>
<p>In the end, this boils down to good concurrent programming. You have to make
sure that there are no race conditions or deadlocks in your program. No silver
bullet - sorry!</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="CtorVsSetUp">Should I use the constructor/destructor of the test fixture or SetUp()/TearDown()?<a href="#CtorVsSetUp" class="hash-link" aria-label="Direct link to Should I use the constructor/destructor of the test fixture or SetUp()/TearDown()?" title="Direct link to Should I use the constructor/destructor of the test fixture or SetUp()/TearDown()?" translate="no">​</a></h2>
<p>The first thing to remember is that GoogleTest does <strong>not</strong> reuse the same test
fixture object across multiple tests. For each <code>TEST_F</code>, GoogleTest will create
a <strong>fresh</strong> test fixture object, immediately call <code>SetUp()</code>, run the test body,
call <code>TearDown()</code>, and then delete the test fixture object.</p>
<p>When you need to write per-test set-up and tear-down logic, you have the choice
between using the test fixture constructor/destructor or <code>SetUp()</code>/<code>TearDown()</code>.
The former is usually preferred, as it has the following benefits:</p>
<ul>
<li class="">By initializing a member variable in the constructor, we have the option to
make it <code>const</code>, which helps prevent accidental changes to its value and
makes the tests more obviously correct.</li>
<li class="">In case we need to subclass the test fixture class, the subclass&#x27;
constructor is guaranteed to call the base class&#x27; constructor <em>first</em>, and
the subclass&#x27; destructor is guaranteed to call the base class&#x27; destructor
<em>afterward</em>. With <code>SetUp()/TearDown()</code>, a subclass may make the mistake of
forgetting to call the base class&#x27; <code>SetUp()/TearDown()</code> or call them at the
wrong time.</li>
</ul>
<p>You may still want to use <code>SetUp()/TearDown()</code> in the following cases:</p>
<ul>
<li class="">C++ does not allow virtual function calls in constructors and destructors.
You can call a method declared as virtual, but it will not use dynamic
dispatch. It will use the definition from the class the constructor of which
is currently executing. This is because calling a virtual method before the
derived class constructor has a chance to run is very dangerous - the
virtual method might operate on uninitialized data. Therefore, if you need
to call a method that will be overridden in a derived class, you have to use
<code>SetUp()/TearDown()</code>.</li>
<li class="">In the body of a constructor (or destructor), it&#x27;s not possible to use the
<code>ASSERT_xx</code> macros. Therefore, if the set-up operation could cause a fatal
test failure that should prevent the test from running, it&#x27;s necessary to
use <code>abort</code> and abort the whole test
executable, or to use <code>SetUp()</code> instead of a constructor.</li>
<li class="">If the tear-down operation could throw an exception, you must use
<code>TearDown()</code> as opposed to the destructor, as throwing in a destructor leads
to undefined behavior and usually will kill your program right away. Note
that many standard libraries (like STL) may throw when exceptions are
enabled in the compiler. Therefore you should prefer <code>TearDown()</code> if you
want to write portable tests that work with or without exceptions.</li>
<li class="">The GoogleTest team is considering making the assertion macros throw on
platforms where exceptions are enabled (e.g. Windows, Mac OS, and Linux
client-side), which will eliminate the need for the user to propagate
failures from a subroutine to its caller. Therefore, you shouldn&#x27;t use
GoogleTest assertions in a destructor if your code could run on such a
platform.</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="the-compiler-complains-no-matching-function-to-call-when-i-use-assert_pred-how-do-i-fix-it">The compiler complains &quot;no matching function to call&quot; when I use <code>ASSERT_PRED*</code>. How do I fix it?<a href="#the-compiler-complains-no-matching-function-to-call-when-i-use-assert_pred-how-do-i-fix-it" class="hash-link" aria-label="Direct link to the-compiler-complains-no-matching-function-to-call-when-i-use-assert_pred-how-do-i-fix-it" title="Direct link to the-compiler-complains-no-matching-function-to-call-when-i-use-assert_pred-how-do-i-fix-it" translate="no">​</a></h2>
<p>See details for <a class="" href="/cppdev/docs/testing/gt/reference/assertions#EXPECT_PRED"><code>EXPECT_PRED*</code></a> in the
Assertions Reference.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="my-compiler-complains-about-ignoring-return-value-when-i-call-run_all_tests-why">My compiler complains about &quot;ignoring return value&quot; when I call RUN_ALL_TESTS(). Why?<a href="#my-compiler-complains-about-ignoring-return-value-when-i-call-run_all_tests-why" class="hash-link" aria-label="Direct link to My compiler complains about &quot;ignoring return value&quot; when I call RUN_ALL_TESTS(). Why?" title="Direct link to My compiler complains about &quot;ignoring return value&quot; when I call RUN_ALL_TESTS(). Why?" translate="no">​</a></h2>
<p>Some people had been ignoring the return value of <code>RUN_ALL_TESTS()</code>. That is,
instead of</p>
<div class="language-c++ codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c++ codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  return RUN_ALL_TESTS();</span><br></span></code></pre></div></div>
<p>they write</p>
<div class="language-c++ codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c++ codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  RUN_ALL_TESTS();</span><br></span></code></pre></div></div>
<p>This is <strong>wrong and dangerous</strong>. The testing services needs to see the return
value of <code>RUN_ALL_TESTS()</code> in order to determine if a test has passed. If your
<code>main()</code> function ignores it, your test will be considered successful even if it
has a GoogleTest assertion failure. Very bad.</p>
<p>We have decided to fix this (thanks to Michael Chastain for the idea). Now, your
code will no longer be able to ignore <code>RUN_ALL_TESTS()</code> when compiled with
<code>gcc</code>. If you do so, you&#x27;ll get a compiler error.</p>
<p>If you see the compiler complaining about you ignoring the return value of
<code>RUN_ALL_TESTS()</code>, the fix is simple: just make sure its value is used as the
return value of <code>main()</code>.</p>
<p>But how could we introduce a change that breaks existing tests? Well, in this
case, the code was already broken in the first place, so we didn&#x27;t break it. :-)</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="my-compiler-complains-that-a-constructor-or-destructor-cannot-return-a-value-whats-going-on">My compiler complains that a constructor (or destructor) cannot return a value. What&#x27;s going on?<a href="#my-compiler-complains-that-a-constructor-or-destructor-cannot-return-a-value-whats-going-on" class="hash-link" aria-label="Direct link to My compiler complains that a constructor (or destructor) cannot return a value. What&#x27;s going on?" title="Direct link to My compiler complains that a constructor (or destructor) cannot return a value. What&#x27;s going on?" translate="no">​</a></h2>
<p>Due to a peculiarity of C++, in order to support the syntax for streaming
messages to an <code>ASSERT_*</code>, e.g.</p>
<div class="language-c++ codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c++ codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  ASSERT_EQ(1, Foo()) &lt;&lt; &quot;blah blah&quot; &lt;&lt; foo;</span><br></span></code></pre></div></div>
<p>we had to give up using <code>ASSERT*</code> and <code>FAIL*</code> (but not <code>EXPECT*</code> and
<code>ADD_FAILURE*</code>) in constructors and destructors. The workaround is to move the
content of your constructor/destructor to a private void member function, or
switch to <code>EXPECT_*()</code> if that works. This
<a class="" href="/cppdev/docs/testing/gt/advanced#assertion-placement">section</a> in the user&#x27;s guide explains it.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="my-setup-function-is-not-called-why">My SetUp() function is not called. Why?<a href="#my-setup-function-is-not-called-why" class="hash-link" aria-label="Direct link to My SetUp() function is not called. Why?" title="Direct link to My SetUp() function is not called. Why?" translate="no">​</a></h2>
<p>C++ is case-sensitive. Did you spell it as <code>Setup()</code>?</p>
<p>Similarly, sometimes people spell <code>SetUpTestSuite()</code> as <code>SetupTestSuite()</code> and
wonder why it&#x27;s never called.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="i-have-several-test-suites-which-share-the-same-test-fixture-logic-do-i-have-to-define-a-new-test-fixture-class-for-each-of-them-this-seems-pretty-tedious">I have several test suites which share the same test fixture logic; do I have to define a new test fixture class for each of them? This seems pretty tedious.<a href="#i-have-several-test-suites-which-share-the-same-test-fixture-logic-do-i-have-to-define-a-new-test-fixture-class-for-each-of-them-this-seems-pretty-tedious" class="hash-link" aria-label="Direct link to I have several test suites which share the same test fixture logic; do I have to define a new test fixture class for each of them? This seems pretty tedious." title="Direct link to I have several test suites which share the same test fixture logic; do I have to define a new test fixture class for each of them? This seems pretty tedious." translate="no">​</a></h2>
<p>You don&#x27;t have to. Instead of</p>
<div class="language-c++ codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c++ codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">class FooTest : public BaseTest {};</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">TEST_F(FooTest, Abc) { ... }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">TEST_F(FooTest, Def) { ... }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class BarTest : public BaseTest {};</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">TEST_F(BarTest, Abc) { ... }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">TEST_F(BarTest, Def) { ... }</span><br></span></code></pre></div></div>
<p>you can simply <code>typedef</code> the test fixtures:</p>
<div class="language-c++ codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c++ codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">typedef BaseTest FooTest;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">TEST_F(FooTest, Abc) { ... }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">TEST_F(FooTest, Def) { ... }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">typedef BaseTest BarTest;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">TEST_F(BarTest, Abc) { ... }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">TEST_F(BarTest, Def) { ... }</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="googletest-output-is-buried-in-a-whole-bunch-of-log-messages-what-do-i-do">GoogleTest output is buried in a whole bunch of LOG messages. What do I do?<a href="#googletest-output-is-buried-in-a-whole-bunch-of-log-messages-what-do-i-do" class="hash-link" aria-label="Direct link to GoogleTest output is buried in a whole bunch of LOG messages. What do I do?" title="Direct link to GoogleTest output is buried in a whole bunch of LOG messages. What do I do?" translate="no">​</a></h2>
<p>The GoogleTest output is meant to be a concise and human-friendly report. If
your test generates textual output itself, it will mix with the GoogleTest
output, making it hard to read. However, there is an easy solution to this
problem.</p>
<p>Since <code>LOG</code> messages go to stderr, we decided to let GoogleTest output go to
stdout. This way, you can easily separate the two using redirection. For
example:</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ ./my_test &gt; gtest_output.txt</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="why-should-i-prefer-test-fixtures-over-global-variables">Why should I prefer test fixtures over global variables?<a href="#why-should-i-prefer-test-fixtures-over-global-variables" class="hash-link" aria-label="Direct link to Why should I prefer test fixtures over global variables?" title="Direct link to Why should I prefer test fixtures over global variables?" translate="no">​</a></h2>
<p>There are several good reasons:</p>
<ol>
<li class="">It&#x27;s likely your test needs to change the states of its global variables.
This makes it difficult to keep side effects from escaping one test and
contaminating others, making debugging difficult. By using fixtures, each
test has a fresh set of variables that&#x27;s different (but with the same
names). Thus, tests are kept independent of each other.</li>
<li class="">Global variables pollute the global namespace.</li>
<li class="">Test fixtures can be reused via subclassing, which cannot be done easily
with global variables. This is useful if many test suites have something in
common.</li>
</ol>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="what-can-the-statement-argument-in-assert_death-be">What can the statement argument in ASSERT_DEATH() be?<a href="#what-can-the-statement-argument-in-assert_death-be" class="hash-link" aria-label="Direct link to What can the statement argument in ASSERT_DEATH() be?" title="Direct link to What can the statement argument in ASSERT_DEATH() be?" translate="no">​</a></h2>
<p><code>ASSERT_DEATH(statement, matcher)</code> (or any death assertion macro) can be used
wherever <em><code>statement</code></em> is valid. So basically <em><code>statement</code></em> can be any C++
statement that makes sense in the current context. In particular, it can
reference global and/or local variables, and can be:</p>
<ul>
<li class="">a simple function call (often the case),</li>
<li class="">a complex expression, or</li>
<li class="">a compound statement.</li>
</ul>
<p>Some examples are shown here:</p>
<div class="language-c++ codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c++ codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// A death test can be a simple function call.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">TEST(MyDeathTest, FunctionCall) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ASSERT_DEATH(Xyz(5), &quot;Xyz failed&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Or a complex expression that references variables and functions.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">TEST(MyDeathTest, ComplexExpression) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  const bool c = Condition();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ASSERT_DEATH((c ? Func1(0) : object2.Method(&quot;test&quot;)),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               &quot;(Func1|Method) failed&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Death assertions can be used anywhere in a function.  In</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// particular, they can be inside a loop.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">TEST(MyDeathTest, InsideLoop) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // Verifies that Foo(0), Foo(1), ..., and Foo(4) all die.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  for (int i = 0; i &lt; 5; i++) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    EXPECT_DEATH_M(Foo(i), &quot;Foo has \\d+ errors&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                   ::testing::Message() &lt;&lt; &quot;where i is &quot; &lt;&lt; i);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// A death assertion can contain a compound statement.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">TEST(MyDeathTest, CompoundStatement) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // Verifies that at lease one of Bar(0), Bar(1), ..., and</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // Bar(4) dies.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ASSERT_DEATH({</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    for (int i = 0; i &lt; 5; i++) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      Bar(i);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;Bar has \\d+ errors&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="i-have-a-fixture-class-footest-but-test_ffootest-bar-gives-me-error-no-matching-function-for-call-to-footestfootest-why">I have a fixture class <code>FooTest</code>, but <code>TEST_F(FooTest, Bar)</code> gives me error <code>&quot;no matching function for call to `FooTest::FooTest()&#x27;&quot;</code>. Why?<a href="#i-have-a-fixture-class-footest-but-test_ffootest-bar-gives-me-error-no-matching-function-for-call-to-footestfootest-why" class="hash-link" aria-label="Direct link to i-have-a-fixture-class-footest-but-test_ffootest-bar-gives-me-error-no-matching-function-for-call-to-footestfootest-why" title="Direct link to i-have-a-fixture-class-footest-but-test_ffootest-bar-gives-me-error-no-matching-function-for-call-to-footestfootest-why" translate="no">​</a></h2>
<p>GoogleTest needs to be able to create objects of your test fixture class, so it
must have a default constructor. Normally the compiler will define one for you.
However, there are cases where you have to define your own:</p>
<ul>
<li class="">If you explicitly declare a non-default constructor for class <code>FooTest</code>
(<code>DISALLOW_EVIL_CONSTRUCTORS()</code> does this), then you need to define a
default constructor, even if it would be empty.</li>
<li class="">If <code>FooTest</code> has a const non-static data member, then you have to define the
default constructor <em>and</em> initialize the const member in the initializer
list of the constructor. (Early versions of <code>gcc</code> doesn&#x27;t force you to
initialize the const member. It&#x27;s a bug that has been fixed in <code>gcc 4</code>.)</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="why-does-googletest-require-the-entire-test-suite-instead-of-individual-tests-to-be-named-deathtest-when-it-uses-assert_death">Why does GoogleTest require the entire test suite, instead of individual tests, to be named <code>*DeathTest</code> when it uses <code>ASSERT_DEATH</code>?<a href="#why-does-googletest-require-the-entire-test-suite-instead-of-individual-tests-to-be-named-deathtest-when-it-uses-assert_death" class="hash-link" aria-label="Direct link to why-does-googletest-require-the-entire-test-suite-instead-of-individual-tests-to-be-named-deathtest-when-it-uses-assert_death" title="Direct link to why-does-googletest-require-the-entire-test-suite-instead-of-individual-tests-to-be-named-deathtest-when-it-uses-assert_death" translate="no">​</a></h2>
<p>GoogleTest does not interleave tests from different test suites. That is, it
runs all tests in one test suite first, and then runs all tests in the next test
suite, and so on. GoogleTest does this because it needs to set up a test suite
before the first test in it is run, and tear it down afterwards. Splitting up
the test case would require multiple set-up and tear-down processes, which is
inefficient and makes the semantics unclean.</p>
<p>If we were to determine the order of tests based on test name instead of test
case name, then we would have a problem with the following situation:</p>
<div class="language-c++ codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c++ codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">TEST_F(FooTest, AbcDeathTest) { ... }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">TEST_F(FooTest, Uvw) { ... }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">TEST_F(BarTest, DefDeathTest) { ... }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">TEST_F(BarTest, Xyz) { ... }</span><br></span></code></pre></div></div>
<p>Since <code>FooTest.AbcDeathTest</code> needs to run before <code>BarTest.Xyz</code>, and we don&#x27;t
interleave tests from different test suites, we need to run all tests in the
<code>FooTest</code> case before running any test in the <code>BarTest</code> case. This contradicts
with the requirement to run <code>BarTest.DefDeathTest</code> before <code>FooTest.Uvw</code>.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="but-i-dont-like-calling-my-entire-test-suite-deathtest-when-it-contains-both-death-tests-and-non-death-tests-what-do-i-do">But I don&#x27;t like calling my entire test suite <code>*DeathTest</code> when it contains both death tests and non-death tests. What do I do?<a href="#but-i-dont-like-calling-my-entire-test-suite-deathtest-when-it-contains-both-death-tests-and-non-death-tests-what-do-i-do" class="hash-link" aria-label="Direct link to but-i-dont-like-calling-my-entire-test-suite-deathtest-when-it-contains-both-death-tests-and-non-death-tests-what-do-i-do" title="Direct link to but-i-dont-like-calling-my-entire-test-suite-deathtest-when-it-contains-both-death-tests-and-non-death-tests-what-do-i-do" translate="no">​</a></h2>
<p>You don&#x27;t have to, but if you like, you may split up the test suite into
<code>FooTest</code> and <code>FooDeathTest</code>, where the names make it clear that they are
related:</p>
<div class="language-c++ codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c++ codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">class FooTest : public ::testing::Test { ... };</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">TEST_F(FooTest, Abc) { ... }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">TEST_F(FooTest, Def) { ... }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">using FooDeathTest = FooTest;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">TEST_F(FooDeathTest, Uvw) { ... EXPECT_DEATH(...) ... }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">TEST_F(FooDeathTest, Xyz) { ... ASSERT_DEATH(...) ... }</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="googletest-prints-the-log-messages-in-a-death-tests-child-process-only-when-the-test-fails-how-can-i-see-the-log-messages-when-the-death-test-succeeds">GoogleTest prints the LOG messages in a death test&#x27;s child process only when the test fails. How can I see the LOG messages when the death test succeeds?<a href="#googletest-prints-the-log-messages-in-a-death-tests-child-process-only-when-the-test-fails-how-can-i-see-the-log-messages-when-the-death-test-succeeds" class="hash-link" aria-label="Direct link to GoogleTest prints the LOG messages in a death test&#x27;s child process only when the test fails. How can I see the LOG messages when the death test succeeds?" title="Direct link to GoogleTest prints the LOG messages in a death test&#x27;s child process only when the test fails. How can I see the LOG messages when the death test succeeds?" translate="no">​</a></h2>
<p>Printing the LOG messages generated by the statement inside <code>EXPECT_DEATH()</code>
makes it harder to search for real problems in the parent&#x27;s log. Therefore,
GoogleTest only prints them when the death test has failed.</p>
<p>If you really need to see such LOG messages, a workaround is to temporarily
break the death test (e.g. by changing the regex pattern it is expected to
match). Admittedly, this is a hack. We&#x27;ll consider a more permanent solution
after the fork-and-exec-style death tests are implemented.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="the-compiler-complains-about-no-match-for-operator-when-i-use-an-assertion-what-gives">The compiler complains about <code>no match for &#x27;operator&lt;&lt;&#x27;</code> when I use an assertion. What gives?<a href="#the-compiler-complains-about-no-match-for-operator-when-i-use-an-assertion-what-gives" class="hash-link" aria-label="Direct link to the-compiler-complains-about-no-match-for-operator-when-i-use-an-assertion-what-gives" title="Direct link to the-compiler-complains-about-no-match-for-operator-when-i-use-an-assertion-what-gives" translate="no">​</a></h2>
<p>If you use a user-defined type <code>FooType</code> in an assertion, you must make sure
there is an <code>std::ostream&amp; operator&lt;&lt;(std::ostream&amp;, const FooType&amp;)</code> function
defined such that we can print a value of <code>FooType</code>.</p>
<p>In addition, if <code>FooType</code> is declared in a name space, the <code>&lt;&lt;</code> operator also
needs to be defined in the <em>same</em> name space. See
<a href="https://abseil.io/tips/49" target="_blank" rel="noopener noreferrer" class="">Tip of the Week #49</a> for details.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="how-do-i-suppress-the-memory-leak-messages-on-windows">How do I suppress the memory leak messages on Windows?<a href="#how-do-i-suppress-the-memory-leak-messages-on-windows" class="hash-link" aria-label="Direct link to How do I suppress the memory leak messages on Windows?" title="Direct link to How do I suppress the memory leak messages on Windows?" translate="no">​</a></h2>
<p>Since the statically initialized GoogleTest singleton requires allocations on
the heap, the Visual C++ memory leak detector will report memory leaks at the
end of the program run. The easiest way to avoid this is to use the
<code>_CrtMemCheckpoint</code> and <code>_CrtMemDumpAllObjectsSince</code> calls to not report any
statically initialized heap objects. See MSDN for more details and additional
heap check/debug routines.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="how-can-my-code-detect-if-it-is-running-in-a-test">How can my code detect if it is running in a test?<a href="#how-can-my-code-detect-if-it-is-running-in-a-test" class="hash-link" aria-label="Direct link to How can my code detect if it is running in a test?" title="Direct link to How can my code detect if it is running in a test?" translate="no">​</a></h2>
<p>If you write code that sniffs whether it&#x27;s running in a test and does different
things accordingly, you are leaking test-only logic into production code and
there is no easy way to ensure that the test-only code paths aren&#x27;t run by
mistake in production. Such cleverness also leads to
<a href="https://en.wikipedia.org/wiki/Heisenbug" target="_blank" rel="noopener noreferrer" class="">Heisenbugs</a>. Therefore we strongly
advise against the practice, and GoogleTest doesn&#x27;t provide a way to do it.</p>
<p>In general, the recommended way to cause the code to behave differently under
test is <a href="https://en.wikipedia.org/wiki/Dependency_injection" target="_blank" rel="noopener noreferrer" class="">Dependency Injection</a>. You can inject
different functionality from the test and from the production code. Since your
production code doesn&#x27;t link in the for-test logic at all (the
<a href="https://docs.bazel.build/versions/master/be/common-definitions.html#common.testonly" target="_blank" rel="noopener noreferrer" class=""><code>testonly</code></a> attribute for BUILD targets helps to ensure
that), there is no danger in accidentally running it.</p>
<p>However, if you <em>really</em>, <em>really</em>, <em>really</em> have no choice, and if you follow
the rule of ending your test program names with <code>_test</code>, you can use the
<em>horrible</em> hack of sniffing your executable name (<code>argv[0]</code> in <code>main()</code>) to know
whether the code is under test.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="how-do-i-temporarily-disable-a-test">How do I temporarily disable a test?<a href="#how-do-i-temporarily-disable-a-test" class="hash-link" aria-label="Direct link to How do I temporarily disable a test?" title="Direct link to How do I temporarily disable a test?" translate="no">​</a></h2>
<p>If you have a broken test that you cannot fix right away, you can add the
<code>DISABLED_</code> prefix to its name. This will exclude it from execution. This is
better than commenting out the code or using <code>#if 0</code>, as disabled tests are
still compiled (and thus won&#x27;t rot).</p>
<p>To include disabled tests in test execution, just invoke the test program with
the <code>--gtest_also_run_disabled_tests</code> flag.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="is-it-ok-if-i-have-two-separate-testfoo-bar-test-methods-defined-in-different-namespaces">Is it OK if I have two separate <code>TEST(Foo, Bar)</code> test methods defined in different namespaces?<a href="#is-it-ok-if-i-have-two-separate-testfoo-bar-test-methods-defined-in-different-namespaces" class="hash-link" aria-label="Direct link to is-it-ok-if-i-have-two-separate-testfoo-bar-test-methods-defined-in-different-namespaces" title="Direct link to is-it-ok-if-i-have-two-separate-testfoo-bar-test-methods-defined-in-different-namespaces" translate="no">​</a></h2>
<p>Yes.</p>
<p>The rule is <strong>all test methods in the same test suite must use the same fixture
class</strong>. This means that the following is <strong>allowed</strong> because both tests use the
same fixture class (<code>::testing::Test</code>).</p>
<div class="language-c++ codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c++ codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">namespace foo {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">TEST(CoolTest, DoSomething) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  SUCCEED();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}  // namespace foo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">namespace bar {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">TEST(CoolTest, DoSomething) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  SUCCEED();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}  // namespace bar</span><br></span></code></pre></div></div>
<p>However, the following code is <strong>not allowed</strong> and will produce a runtime error
from GoogleTest because the test methods are using different test fixture
classes with the same test suite name.</p>
<div class="language-c++ codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c++ codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">namespace foo {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class CoolTest : public ::testing::Test {};  // Fixture foo::CoolTest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">TEST_F(CoolTest, DoSomething) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  SUCCEED();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}  // namespace foo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">namespace bar {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class CoolTest : public ::testing::Test {};  // Fixture: bar::CoolTest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">TEST_F(CoolTest, DoSomething) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  SUCCEED();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}  // namespace bar</span><br></span></code></pre></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col noPrint_WFHX"><a href="https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/testing/gt/faq.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/cppdev/docs/testing/gt/reference/actions"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Actions Reference</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/cppdev/docs/testing/gt/gmock_faq"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Legacy gMock FAQ</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#why-should-test-suite-names-and-test-names-not-contain-underscore" class="table-of-contents__link toc-highlight">Why should test suite names and test names not contain underscore?</a></li><li><a href="#why-does-googletest-support-expect_eqnull-ptr-and-assert_eqnull-ptr-but-not-expect_nenull-ptr-and-assert_nenull-ptr" class="table-of-contents__link toc-highlight">Why does GoogleTest support <code>EXPECT_EQ(NULL, ptr)</code> and <code>ASSERT_EQ(NULL, ptr)</code> but not <code>EXPECT_NE(NULL, ptr)</code> and <code>ASSERT_NE(NULL, ptr)</code>?</a></li><li><a href="#i-need-to-test-that-different-implementations-of-an-interface-satisfy-some-common-requirements-should-i-use-typed-tests-or-value-parameterized-tests" class="table-of-contents__link toc-highlight">I need to test that different implementations of an interface satisfy some common requirements. Should I use typed tests or value-parameterized tests?</a></li><li><a href="#my-death-test-modifies-some-state-but-the-change-seems-lost-after-the-death-test-finishes-why" class="table-of-contents__link toc-highlight">My death test modifies some state, but the change seems lost after the death test finishes. Why?</a></li><li><a href="#expect_eqhtonlblah-blah_blah-generates-weird-compiler-errors-in-opt-mode-is-this-a-googletest-bug" class="table-of-contents__link toc-highlight">EXPECT_EQ(htonl(blah), blah_blah) generates weird compiler errors in opt mode. Is this a GoogleTest bug?</a></li><li><a href="#the-compiler-complains-about-undefined-references-to-some-static-const-member-variables-but-i-did-define-them-in-the-class-body-whats-wrong" class="table-of-contents__link toc-highlight">The compiler complains about &quot;undefined references&quot; to some static const member variables, but I did define them in the class body. What&#39;s wrong?</a></li><li><a href="#can-i-derive-a-test-fixture-from-another" class="table-of-contents__link toc-highlight">Can I derive a test fixture from another?</a></li><li><a href="#my-compiler-complains-void-value-not-ignored-as-it-ought-to-be-what-does-this-mean" class="table-of-contents__link toc-highlight">My compiler complains &quot;void value not ignored as it ought to be.&quot; What does this mean?</a></li><li><a href="#my-death-test-hangs-or-seg-faults-how-do-i-fix-it" class="table-of-contents__link toc-highlight">My death test hangs (or seg-faults). How do I fix it?</a></li><li><a href="#CtorVsSetUp" class="table-of-contents__link toc-highlight">Should I use the constructor/destructor of the test fixture or SetUp()/TearDown()?</a></li><li><a href="#the-compiler-complains-no-matching-function-to-call-when-i-use-assert_pred-how-do-i-fix-it" class="table-of-contents__link toc-highlight">The compiler complains &quot;no matching function to call&quot; when I use <code>ASSERT_PRED*</code>. How do I fix it?</a></li><li><a href="#my-compiler-complains-about-ignoring-return-value-when-i-call-run_all_tests-why" class="table-of-contents__link toc-highlight">My compiler complains about &quot;ignoring return value&quot; when I call RUN_ALL_TESTS(). Why?</a></li><li><a href="#my-compiler-complains-that-a-constructor-or-destructor-cannot-return-a-value-whats-going-on" class="table-of-contents__link toc-highlight">My compiler complains that a constructor (or destructor) cannot return a value. What&#39;s going on?</a></li><li><a href="#my-setup-function-is-not-called-why" class="table-of-contents__link toc-highlight">My SetUp() function is not called. Why?</a></li><li><a href="#i-have-several-test-suites-which-share-the-same-test-fixture-logic-do-i-have-to-define-a-new-test-fixture-class-for-each-of-them-this-seems-pretty-tedious" class="table-of-contents__link toc-highlight">I have several test suites which share the same test fixture logic; do I have to define a new test fixture class for each of them? This seems pretty tedious.</a></li><li><a href="#googletest-output-is-buried-in-a-whole-bunch-of-log-messages-what-do-i-do" class="table-of-contents__link toc-highlight">GoogleTest output is buried in a whole bunch of LOG messages. What do I do?</a></li><li><a href="#why-should-i-prefer-test-fixtures-over-global-variables" class="table-of-contents__link toc-highlight">Why should I prefer test fixtures over global variables?</a></li><li><a href="#what-can-the-statement-argument-in-assert_death-be" class="table-of-contents__link toc-highlight">What can the statement argument in ASSERT_DEATH() be?</a></li><li><a href="#i-have-a-fixture-class-footest-but-test_ffootest-bar-gives-me-error-no-matching-function-for-call-to-footestfootest-why" class="table-of-contents__link toc-highlight">I have a fixture class <code>FooTest</code>, but <code>TEST_F(FooTest, Bar)</code> gives me error <code>&quot;no matching function for call to `FooTest::FooTest()&#39;&quot;</code>. Why?</a></li><li><a href="#why-does-googletest-require-the-entire-test-suite-instead-of-individual-tests-to-be-named-deathtest-when-it-uses-assert_death" class="table-of-contents__link toc-highlight">Why does GoogleTest require the entire test suite, instead of individual tests, to be named <code>*DeathTest</code> when it uses <code>ASSERT_DEATH</code>?</a></li><li><a href="#but-i-dont-like-calling-my-entire-test-suite-deathtest-when-it-contains-both-death-tests-and-non-death-tests-what-do-i-do" class="table-of-contents__link toc-highlight">But I don&#39;t like calling my entire test suite <code>*DeathTest</code> when it contains both death tests and non-death tests. What do I do?</a></li><li><a href="#googletest-prints-the-log-messages-in-a-death-tests-child-process-only-when-the-test-fails-how-can-i-see-the-log-messages-when-the-death-test-succeeds" class="table-of-contents__link toc-highlight">GoogleTest prints the LOG messages in a death test&#39;s child process only when the test fails. How can I see the LOG messages when the death test succeeds?</a></li><li><a href="#the-compiler-complains-about-no-match-for-operator-when-i-use-an-assertion-what-gives" class="table-of-contents__link toc-highlight">The compiler complains about <code>no match for &#39;operator&lt;&lt;&#39;</code> when I use an assertion. What gives?</a></li><li><a href="#how-do-i-suppress-the-memory-leak-messages-on-windows" class="table-of-contents__link toc-highlight">How do I suppress the memory leak messages on Windows?</a></li><li><a href="#how-can-my-code-detect-if-it-is-running-in-a-test" class="table-of-contents__link toc-highlight">How can my code detect if it is running in a test?</a></li><li><a href="#how-do-i-temporarily-disable-a-test" class="table-of-contents__link toc-highlight">How do I temporarily disable a test?</a></li><li><a href="#is-it-ok-if-i-have-two-separate-testfoo-bar-test-methods-defined-in-different-namespaces" class="table-of-contents__link toc-highlight">Is it OK if I have two separate <code>TEST(Foo, Bar)</code> test methods defined in different namespaces?</a></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/cppdev/docs/intro">Tutorial</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://discordapp.com/invite/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://x.com/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">X<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/cppdev/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/kumo-pub" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 Kumo, Inc. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>