<!doctype html>
<html lang="en-GB" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-testing/doct/extensions" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.2">
<title data-rh="true">Extensions | Kumo Foundamental</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://your-docusaurus-site.example.com/cppdev/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://your-docusaurus-site.example.com/cppdev/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://your-docusaurus-site.example.com/cppdev/docs/testing/doct/extensions"><meta data-rh="true" property="og:locale" content="en_GB"><meta data-rh="true" property="og:locale:alternate" content="zh_cn"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Extensions | Kumo Foundamental"><meta data-rh="true" name="description" content="Extensions"><meta data-rh="true" property="og:description" content="Extensions"><link data-rh="true" rel="icon" href="/cppdev/img/favicon.svg"><link data-rh="true" rel="canonical" href="https://your-docusaurus-site.example.com/cppdev/docs/testing/doct/extensions"><link data-rh="true" rel="alternate" href="https://your-docusaurus-site.example.com/cppdev/docs/testing/doct/extensions" hreflang="en-GB"><link data-rh="true" rel="alternate" href="https://your-docusaurus-site.example.com/cppdev/zh-cn/docs/testing/doct/extensions" hreflang="zh-cn"><link data-rh="true" rel="alternate" href="https://your-docusaurus-site.example.com/cppdev/docs/testing/doct/extensions" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Foundamentals","item":"https://your-docusaurus-site.example.com/cppdev/docs/category/foundamentals"},{"@type":"ListItem","position":2,"name":"Performance Testing and Unit Testing","item":"https://your-docusaurus-site.example.com/cppdev/docs/testing/"},{"@type":"ListItem","position":3,"name":"doctest Unit Testing","item":"https://your-docusaurus-site.example.com/cppdev/docs/category/doctest-unit-testing"},{"@type":"ListItem","position":4,"name":"Extensions","item":"https://your-docusaurus-site.example.com/cppdev/docs/testing/doct/extensions"}]}</script><link rel="alternate" type="application/rss+xml" href="/cppdev/blog/rss.xml" title="Kumo Foundamental RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/cppdev/blog/atom.xml" title="Kumo Foundamental Atom Feed"><link rel="stylesheet" href="/cppdev/assets/css/styles.a7490ef4.css">
<script src="/cppdev/assets/js/runtime~main.ee4aed3b.js" defer="defer"></script>
<script src="/cppdev/assets/js/main.0e500fd9.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")),document.documentElement.setAttribute("data-theme-choice",t||"system")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/cppdev/img/kumo-logo.svg"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/cppdev/"><div class="navbar__logo"><img src="/cppdev/img/kumo-logo.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/cppdev/img/kumo-logo.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Foundamental</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/cppdev/docs/intro">Tutorial</a><a class="navbar__item navbar__link" href="/cppdev/docs/integration/overview">Integration</a><a class="navbar__item navbar__link" href="/cppdev/blog">Blog</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_nlXk"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>English</a><ul class="dropdown__menu"><li><a href="/cppdev/docs/testing/doct/extensions" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="en-GB">English</a></li><li><a href="/cppdev/zh-cn/docs/testing/doct/extensions" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="zh-cn">中文（中国）</a></li></ul></div><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/cppdev/docs/intro"><span title="Overview" class="linkLabel_WmDU">Overview</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--active" href="/cppdev/docs/category/foundamentals"><span title="Foundamentals" class="categoryLinkLabel_W154">Foundamentals</span></a><button aria-label="Collapse sidebar category &#x27;Foundamentals&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--active" tabindex="0" href="/cppdev/docs/testing/"><span title="Performance Testing and Unit Testing" class="categoryLinkLabel_W154">Performance Testing and Unit Testing</span></a><button aria-label="Collapse sidebar category &#x27;Performance Testing and Unit Testing&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--active" tabindex="0" href="/cppdev/docs/category/doctest-unit-testing"><span title="doctest Unit Testing" class="categoryLinkLabel_W154">doctest Unit Testing</span></a><button aria-label="Collapse sidebar category &#x27;doctest Unit Testing&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/cppdev/docs/testing/doct/overview"><span title="Overview" class="linkLabel_WmDU">Overview</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/cppdev/docs/testing/doct/tutorial"><span title="Quick Start" class="linkLabel_WmDU">Quick Start</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/cppdev/docs/testing/doct/assertions"><span title="Assertions" class="linkLabel_WmDU">Assertions</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/cppdev/docs/testing/doct/testcases"><span title="Test Cases" class="linkLabel_WmDU">Test Cases</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/cppdev/docs/testing/doct/parameterized-tests"><span title="Parameterized Tests" class="linkLabel_WmDU">Parameterized Tests</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/cppdev/docs/testing/doct/logging"><span title="logging" class="linkLabel_WmDU">logging</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/cppdev/docs/testing/doct/commandline"><span title="Command Line" class="linkLabel_WmDU">Command Line</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/cppdev/docs/testing/doct/main"><span title="main() Entry Point" class="linkLabel_WmDU">main() Entry Point</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/cppdev/docs/testing/doct/configuration"><span title="Test Configuration" class="linkLabel_WmDU">Test Configuration</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/cppdev/docs/testing/doct/stringification"><span title="Stringification" class="linkLabel_WmDU">Stringification</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/cppdev/docs/testing/doct/reporters"><span title="Test Reporters" class="linkLabel_WmDU">Test Reporters</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/cppdev/docs/testing/doct/extensions"><span title="Extensions" class="linkLabel_WmDU">Extensions</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/cppdev/docs/testing/doct/faq"><span title="FAQ" class="linkLabel_WmDU">FAQ</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/cppdev/docs/testing/doct/build-systems"><span title="Integration and Building" class="linkLabel_WmDU">Integration and Building</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/cppdev/docs/testing/doct/benchmarks"><span title="Framework Performance" class="linkLabel_WmDU">Framework Performance</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/cppdev/docs/testing/doct/features"><span title="Features" class="linkLabel_WmDU">Features</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" tabindex="0" href="/cppdev/docs/category/google-test"><span title="Google Test" class="categoryLinkLabel_W154">Google Test</span></a><button aria-label="Expand sidebar category &#x27;Google Test&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" tabindex="0" href="/cppdev/docs/testing/benchmark/"><span title="benchmark" class="categoryLinkLabel_W154">benchmark</span></a><button aria-label="Expand sidebar category &#x27;benchmark&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" tabindex="0" href="/cppdev/docs/log/"><span title="Log Section" class="categoryLinkLabel_W154">Log Section</span></a><button aria-label="Expand sidebar category &#x27;Log Section&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cppdev/docs/time/"><span title="Time and Calendar" class="linkLabel_WmDU">Time and Calendar</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" tabindex="0" href="/cppdev/docs/category/standardized-errors-and-error-return-values"><span title="Standardized Errors and Error Return Values" class="categoryLinkLabel_W154">Standardized Errors and Error Return Values</span></a><button aria-label="Expand sidebar category &#x27;Standardized Errors and Error Return Values&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" tabindex="0" href="/cppdev/docs/strings/"><span title="strings operations" class="categoryLinkLabel_W154">strings operations</span></a><button aria-label="Expand sidebar category &#x27;strings operations&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cppdev/docs/flags/"><span title="Turbo Command-Line Flags (Turbo Flags)" class="linkLabel_WmDU">Turbo Command-Line Flags (Turbo Flags)</span></a></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/cppdev/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/cppdev/docs/category/foundamentals"><span>Foundamentals</span></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/cppdev/docs/testing/"><span>Performance Testing and Unit Testing</span></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/cppdev/docs/category/doctest-unit-testing"><span>doctest Unit Testing</span></a></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Extensions</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Extensions</h1></header>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="extensions-1">Extensions<a href="#extensions-1" class="hash-link" aria-label="Direct link to Extensions" title="Direct link to Extensions" translate="no">​</a></h2>
<p>The doctest header does not include any external or standard library headers in its interface section to ensure optimal build performance, but this results in limited functionality it can provide <code>=&gt;</code> this is where extensions come into play. They exist as header files in the <a href="https://github.com/doctest/doctest/blob/master/doctest/extensions" target="_blank" rel="noopener noreferrer" class=""><code>doctest/extensions</code></a> directory, and each file is documented in a dedicated section here.</p>
<h1><a href="https://github.com/doctest/doctest/blob/master/doctest/extensions/doctest_util.h" target="_blank" rel="noopener noreferrer" class="">Utils</a></h1>
<p>Nothing here yet...</p>
<h1><a href="https://github.com/doctest/doctest/blob/master/doctest/extensions/doctest_mpi.h" target="_blank" rel="noopener noreferrer" class="">Distributed tests with MPI</a></h1>
<p>Testing code across distributed processes requires support from the test framework. <strong>Doctest</strong> support for MPI parallel communication is provided in the <code>&quot;doctest/extensions/doctest_mpi.h&quot;</code> header file.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="examples">Examples<a href="#examples" class="hash-link" aria-label="Direct link to Examples" title="Direct link to Examples" translate="no">​</a></h2>
<p>Refer to <a href="https://github.com/doctest/doctest/blob/master/examples/mpi/mpi.cpp" target="_blank" rel="noopener noreferrer" class=""><strong>the complete test</strong></a> and <a href="https://github.com/doctest/doctest/blob/master/examples/mpi/main.cpp" target="_blank" rel="noopener noreferrer" class=""><strong>the configuration of main()</strong></a></p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="mpi_test_case">MPI_TEST_CASE<a href="#mpi_test_case" class="hash-link" aria-label="Direct link to MPI_TEST_CASE" title="Direct link to MPI_TEST_CASE" translate="no">​</a></h3>
<div class="language-c++ codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c++ codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">#include &quot;doctest/extensions/doctest_mpi.h&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">int my_function_to_test(MPI_Comm comm) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  int rank;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  MPI_Comm_rank(comm,&amp;rank);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  if (rank == 0) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return 10;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  return 11;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">MPI_TEST_CASE(&quot;test over two processes&quot;,2) { // Parallel test on 2 processes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  int x = my_function_to_test(test_comm);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  MPI_CHECK( 0,  x==10 ); // CHECK for rank 0, that x==10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  MPI_CHECK( 1,  x==11 ); // CHECK for rank 1, that x==11</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<p><code>MPI_TEST_CASE</code> is similar to the regular <code>TEST_CASE</code>, except it requires a second parameter specifying the number of processes needed to run the test. If the number of processes is less than 2, the test fails. If the number of processes is 2 or more, it creates a sub-communicator on 2 processes (named <code>test_comm</code>) and executes the test on these processes. <code>MPI_TEST_CASE</code> provides three objects:</p>
<ul>
<li class=""><code>test_comm</code> (type <code>MPI_Comm</code>): the MPI communicator for running the test,</li>
<li class=""><code>test_rank</code> and <code>test_nb_procs</code> (two <code>int</code> values): respectively representing the rank of the current process and the size of the <code>test_comm</code> communicator. The latter two are provided for convenience and can be retrieved from <code>test_comm</code>.</li>
</ul>
<p>The following always holds true:</p>
<div class="language-c++ codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c++ codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">MPI_TEST_CASE(&quot;my_test&quot;,N) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  CHECK( test_nb_procs == N );</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  MPI_CHECK( i, test_rank==i ); // for any i&lt;N</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="assertions">Assertions<a href="#assertions" class="hash-link" aria-label="Direct link to Assertions" title="Direct link to Assertions" translate="no">​</a></h3>
<p>Regular assertions can be used in <code>MPI_TEST_CASE</code>. MPI-specific assertions are also provided, all prefixed with <code>MPI_</code> (<code>MPI_CHECK</code>, <code>MPI_ASSERT</code>, etc.). The first parameter is the target rank for the check, and the second parameter is the regular expression to verify.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="main-entry-point-and-mpi-test-reporting">Main Entry Point and MPI Test Reporting<a href="#main-entry-point-and-mpi-test-reporting" class="hash-link" aria-label="Direct link to Main Entry Point and MPI Test Reporting" title="Direct link to Main Entry Point and MPI Test Reporting" translate="no">​</a></h2>
<p>You need to launch the unit tests using the <code>mpirun</code> or <code>mpiexec</code> command:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">mpirun -np 2 unit_test_executable.exe</span><br></span></code></pre></div></div>
<p><code>doctest::mpi_init_thread()</code> must be called before running the unit tests, and <code>doctest::mpi_finalize()</code> must be called at the end of the program.
Additionally, using the default console reporter will cause every process to write all output to the same location, which is undesirable. Two dedicated reporters are provided and can be enabled. A complete <code>main()</code> function should look like this:</p>
<div class="language-c++ codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c++ codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">#define DOCTEST_CONFIG_IMPLEMENT</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#include &quot;doctest/extensions/doctest_mpi.h&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">int main(int argc, char** argv) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  doctest::mpi_init_thread(argc,argv,MPI_THREAD_MULTIPLE); // Or any MPI thread level</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  doctest::Context ctx;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ctx.setOption(&quot;reporters&quot;, &quot;MpiConsoleReporter&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ctx.setOption(&quot;reporters&quot;, &quot;MpiFileReporter&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ctx.setOption(&quot;force-colors&quot;, true);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ctx.applyCommandLine(argc, argv);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  int test_result = ctx.run();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  doctest::mpi_finalize();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  return test_result;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="mpiconsolereporter">MpiConsoleReporter<a href="#mpiconsolereporter" class="hash-link" aria-label="Direct link to MpiConsoleReporter" title="Direct link to MpiConsoleReporter" translate="no">​</a></h3>
<p><code>MpiConsoleReporter</code> should replace the default reporter. It behaves the same as the default console reporter for regular assertions but only outputs on process 0. For MPI test cases, if a failure occurs, it indicates the process where the failure happened:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[doctest] doctest version is &quot;2.4.0&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[doctest] run with &quot;--help&quot; for options</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">===============================================================================</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[doctest] test cases:    171 |    171 passed |      0 failed |      0 skipped</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[doctest] assertions:    864 |    864 passed |      0 failed |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[doctest] Status: SUCCESS!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">std_e_mpi_unit_tests</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[doctest] doctest version is &quot;2.4.0&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[doctest] run with &quot;--help&quot; for options</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">===============================================================================</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">path/to/test.cpp:30:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">TEST CASE: my test case</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">On rank [2] : path/to/test.cpp:35: CHECK( x==-1 ) is NOT correct!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  values: CHECK( 0 == -1 )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">===============================================================================</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[doctest] test cases:      2 |      2 passed |      0 failed |      0 skipped</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[doctest] assertions:      2 |      2 passed |      0 failed |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[doctest] Status: SUCCESS!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">===============================================================================</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[doctest] assertions on all processes:   5 |   4 passed |      1 failed |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">===============================================================================</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[doctest] fail on rank:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    -&gt; On rank [2] with 1 test failed</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[doctest] Status: FAILURE!</span><br></span></code></pre></div></div>
<p>If the number of processes used to launch the test executable is less than the number required by a test case, the test will be skipped and marked as such in the MPI console reporter:</p>
<div class="language-c++ codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c++ codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">MPI_TEST_CASE(&quot;my_test&quot;,3) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">mpirun -np 2 unit_test_executable.exe</span><br></span></code></pre></div></div>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">===============================================================================</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[doctest] test cases:      1 |      1 passed |      0 failed |      1 skipped</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[doctest] assertions:      1 |      1 passed |      0 failed |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[doctest] Status: SUCCESS!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">===============================================================================</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[doctest] assertions on all processes:   1 |   1 passed |      0 failed |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[doctest] WARNING: Skipped 1 test requiring more than 2 MPI processes to run</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">===============================================================================</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="mpifilereporter">MpiFileReporter<a href="#mpifilereporter" class="hash-link" aria-label="Direct link to MpiFileReporter" title="Direct link to MpiFileReporter" translate="no">​</a></h3>
<p><code>MpiFileReporter</code> prints the results of each process to its own file (named <code>doctest_[rank].log</code>). Use this reporter only as a debugging tool to investigate the exact cause of failures in parallel test cases.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="other-reporters">Other Reporters<a href="#other-reporters" class="hash-link" aria-label="Direct link to Other Reporters" title="Direct link to Other Reporters" translate="no">​</a></h3>
<p>Other reporters (jUnit, XML) are not directly supported. This means you can always print each process&#x27;s results to its own file, but there is (currently) no equivalent of <code>MpiConsoleReporter</code> to aggregate results from all processes.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="explanation">Explanation<a href="#explanation" class="hash-link" aria-label="Direct link to Explanation" title="Direct link to Explanation" translate="no">​</a></h2>
<p>This feature is designed for unit testing MPI-distributed code. It is <strong>not</strong> a method to parallelize multiple unit tests across multiple processes (for that purpose, refer to the <a href="https://github.com/doctest/doctest/blob/master/examples/range_based_execution.py" target="_blank" rel="noopener noreferrer" class=""><strong>example python script</strong></a>).</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="todo">TODO<a href="#todo" class="hash-link" aria-label="Direct link to TODO" title="Direct link to TODO" translate="no">​</a></h2>
<ul>
<li class="">Pass the <code>s</code> member variable of <code>ConsoleReporter</code> as a parameter to member functions, enabling reuse with other objects (will help refactor <code>MPIConsoleReporter</code>)</li>
<li class="">Only <code>MPI_CHECK</code> has been tested. <code>MPI_REQUIRE</code> and exception handling: no tests have been performed</li>
<li class="">Add more tests and automated testing</li>
<li class="">Packaging: Create a new target <code>mpi_doctest</code>? (It would be cleaner for <code>mpi/doctest.h</code> to explicitly depend on MPI)</li>
<li class="">In the future (maybe): Implement a generic mechanism for representing assertions, separating report formats (console, XML, jUnit, etc.) from reporting strategies (sequential vs MPI)</li>
</ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col noPrint_WFHX"><a href="https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/testing/doct/extensions.mdx" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/cppdev/docs/testing/doct/reporters"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Test Reporters</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/cppdev/docs/testing/doct/faq"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">FAQ</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#extensions-1" class="table-of-contents__link toc-highlight">Extensions</a></li><li><a href="#examples" class="table-of-contents__link toc-highlight">Examples</a><ul><li><a href="#mpi_test_case" class="table-of-contents__link toc-highlight">MPI_TEST_CASE</a></li><li><a href="#assertions" class="table-of-contents__link toc-highlight">Assertions</a></li></ul></li><li><a href="#main-entry-point-and-mpi-test-reporting" class="table-of-contents__link toc-highlight">Main Entry Point and MPI Test Reporting</a><ul><li><a href="#mpiconsolereporter" class="table-of-contents__link toc-highlight">MpiConsoleReporter</a></li><li><a href="#mpifilereporter" class="table-of-contents__link toc-highlight">MpiFileReporter</a></li><li><a href="#other-reporters" class="table-of-contents__link toc-highlight">Other Reporters</a></li></ul></li><li><a href="#explanation" class="table-of-contents__link toc-highlight">Explanation</a></li><li><a href="#todo" class="table-of-contents__link toc-highlight">TODO</a></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/cppdev/docs/intro">Tutorial</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://discordapp.com/invite/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://x.com/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">X<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/cppdev/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/kumo-pub" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 Kumo, Inc. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>