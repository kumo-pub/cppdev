<!doctype html>
<html lang="en-GB" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-foundamentals/codec/base64" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.2">
<title data-rh="true">Base64 | Kumo Foundamental</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://your-docusaurus-site.example.com/cppdev/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://your-docusaurus-site.example.com/cppdev/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://your-docusaurus-site.example.com/cppdev/docs/foundamentals/codec/base64"><meta data-rh="true" property="og:locale" content="en_GB"><meta data-rh="true" property="og:locale:alternate" content="zh_cn"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Base64 | Kumo Foundamental"><meta data-rh="true" name="description" content="Installation"><meta data-rh="true" property="og:description" content="Installation"><link data-rh="true" rel="icon" href="/cppdev/img/favicon.svg"><link data-rh="true" rel="canonical" href="https://your-docusaurus-site.example.com/cppdev/docs/foundamentals/codec/base64"><link data-rh="true" rel="alternate" href="https://your-docusaurus-site.example.com/cppdev/docs/foundamentals/codec/base64" hreflang="en-GB"><link data-rh="true" rel="alternate" href="https://your-docusaurus-site.example.com/cppdev/zh-cn/docs/foundamentals/codec/base64" hreflang="zh-cn"><link data-rh="true" rel="alternate" href="https://your-docusaurus-site.example.com/cppdev/docs/foundamentals/codec/base64" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Foundamentals","item":"https://your-docusaurus-site.example.com/cppdev/docs/category/foundamentals"},{"@type":"ListItem","position":2,"name":"Codec","item":"https://your-docusaurus-site.example.com/cppdev/docs/foundamentals/codec/"},{"@type":"ListItem","position":3,"name":"Base64","item":"https://your-docusaurus-site.example.com/cppdev/docs/foundamentals/codec/base64"}]}</script><link rel="alternate" type="application/rss+xml" href="/cppdev/blog/rss.xml" title="Kumo Foundamental RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/cppdev/blog/atom.xml" title="Kumo Foundamental Atom Feed"><link rel="stylesheet" href="/cppdev/assets/css/styles.a7490ef4.css">
<script src="/cppdev/assets/js/runtime~main.49afcf3f.js" defer="defer"></script>
<script src="/cppdev/assets/js/main.abbd5e2e.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")),document.documentElement.setAttribute("data-theme-choice",t||"system")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/cppdev/img/kumo-logo.svg"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/cppdev/"><div class="navbar__logo"><img src="/cppdev/img/kumo-logo.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/cppdev/img/kumo-logo.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Foundamental</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/cppdev/docs/intro">Tutorial</a><a class="navbar__item navbar__link" href="/cppdev/docs/integration/overview">Integration</a><a class="navbar__item navbar__link" href="/cppdev/blog">Blog</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_nlXk"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>English</a><ul class="dropdown__menu"><li><a href="/cppdev/docs/foundamentals/codec/base64" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="en-GB">English</a></li><li><a href="/cppdev/zh-cn/docs/foundamentals/codec/base64" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="zh-cn">中文（中国）</a></li></ul></div><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/cppdev/docs/intro"><span title="Overview" class="linkLabel_WmDU">Overview</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--active" href="/cppdev/docs/category/foundamentals"><span title="Foundamentals" class="categoryLinkLabel_W154">Foundamentals</span></a><button aria-label="Collapse sidebar category &#x27;Foundamentals&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" tabindex="0" href="/cppdev/docs/foundamentals/testing/"><span title="Performance Testing and Unit Testing" class="categoryLinkLabel_W154">Performance Testing and Unit Testing</span></a><button aria-label="Expand sidebar category &#x27;Performance Testing and Unit Testing&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" tabindex="0" href="/cppdev/docs/foundamentals/log/"><span title="Log Section" class="categoryLinkLabel_W154">Log Section</span></a><button aria-label="Expand sidebar category &#x27;Log Section&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cppdev/docs/foundamentals/time"><span title="Time and Calendar" class="linkLabel_WmDU">Time and Calendar</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" tabindex="0" href="/cppdev/docs/category/standardized-errors-and-error-return-values"><span title="Standardized Errors and Error Return Values" class="categoryLinkLabel_W154">Standardized Errors and Error Return Values</span></a><button aria-label="Expand sidebar category &#x27;Standardized Errors and Error Return Values&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" tabindex="0" href="/cppdev/docs/foundamentals/strings/"><span title="strings operations" class="categoryLinkLabel_W154">strings operations</span></a><button aria-label="Expand sidebar category &#x27;strings operations&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cppdev/docs/foundamentals/flags"><span title="Turbo Command-Line Flags (Turbo Flags)" class="linkLabel_WmDU">Turbo Command-Line Flags (Turbo Flags)</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--active" tabindex="0" href="/cppdev/docs/foundamentals/codec/"><span title="Codec" class="categoryLinkLabel_W154">Codec</span></a><button aria-label="Collapse sidebar category &#x27;Codec&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/cppdev/docs/foundamentals/codec/base64"><span title="Base64" class="linkLabel_WmDU">Base64</span></a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cppdev/docs/foundamentals/format/"><span title="Format &amp; Output (String Formatting and Output)" class="linkLabel_WmDU">Format &amp; Output (String Formatting and Output)</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" tabindex="0" href="/cppdev/docs/foundamentals/map/"><span title="Map Containers" class="categoryLinkLabel_W154">Map Containers</span></a><button aria-label="Expand sidebar category &#x27;Map Containers&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" tabindex="0" href="/cppdev/docs/foundamentals/compress/"><span title="Compression" class="categoryLinkLabel_W154">Compression</span></a><button aria-label="Expand sidebar category &#x27;Compression&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" tabindex="0" href="/cppdev/docs/foundamentals/fibers/"><span title="Fiber And Future" class="categoryLinkLabel_W154">Fiber And Future</span></a><button aria-label="Expand sidebar category &#x27;Fiber And Future&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" tabindex="0" href="/cppdev/docs/foundamentals/monitor/"><span title="monitor" class="categoryLinkLabel_W154">monitor</span></a><button aria-label="Expand sidebar category &#x27;monitor&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" tabindex="0" href="/cppdev/docs/foundamentals/filesystem/"><span title="filesystem" class="categoryLinkLabel_W154">filesystem</span></a><button aria-label="Expand sidebar category &#x27;filesystem&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" tabindex="0" href="/cppdev/docs/foundamentals/json/"><span title="json" class="categoryLinkLabel_W154">json</span></a><button aria-label="Expand sidebar category &#x27;json&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/cppdev/docs/rpc/"><span title="rpc" class="categoryLinkLabel_W154">rpc</span></a><button aria-label="Expand sidebar category &#x27;rpc&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/cppdev/docs/retrieve/"><span title="Retrieve" class="categoryLinkLabel_W154">Retrieve</span></a><button aria-label="Expand sidebar category &#x27;Retrieve&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/cppdev/docs/store/"><span title="store" class="categoryLinkLabel_W154">store</span></a><button aria-label="Expand sidebar category &#x27;store&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/cppdev/docs/ir/"><span title="IR" class="categoryLinkLabel_W154">IR</span></a><button aria-label="Expand sidebar category &#x27;IR&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/cppdev/docs/advance/"><span title="advance" class="categoryLinkLabel_W154">advance</span></a><button aria-label="Expand sidebar category &#x27;advance&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/cppdev/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/cppdev/docs/category/foundamentals"><span>Foundamentals</span></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/cppdev/docs/foundamentals/codec/"><span>Codec</span></a></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Base64</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Base64</h1></header>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="installation">Installation<a href="#installation" class="hash-link" aria-label="Direct link to Installation" title="Direct link to Installation" translate="no">​</a></h2>
<p>The <code>Base64</code> API covered in this tutorial is a high-performance implementation located in the <code>vamos</code> library. Typically, this functionality is also available in the <code>turbo/strings</code> module.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="tutorial">Tutorial<a href="#tutorial" class="hash-link" aria-label="Direct link to Tutorial" title="Direct link to Tutorial" translate="no">​</a></h2>
<p>We also support conversion from <a href="https://infra.spec.whatwg.org/#forgiving-base64-decode" target="_blank" rel="noopener noreferrer" class="">WHATWG forgiving-base64</a> to binary and back.
Specifically, you can convert base64 input containing ASCII whitespace (&#x27; &#x27;, &#x27;\t&#x27;, &#x27;\n&#x27;, &#x27;\r&#x27;, &#x27;\f&#x27;) to binary. We also support the base64 URL encoding variant.
These functions are part of the Node.js JavaScript runtime: in particular, <code>atob</code> in Node.js relies on vamos.</p>
<p>Converting binary data to <code>base64</code> always succeeds and is relatively straightforward:</p>
<div class="language-C++ language-c++ codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c++ codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">std::vector&lt;char&gt; buffer(vamos::base64_length_from_binary(source.size()));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">vamos::binary_to_base64(source.data(), source.size(), buffer.data());</span><br></span></code></pre></div></div>
<p>Decoding base64 requires validation and therefore error handling. Additionally, since
we trim ASCII whitespace, we may need to adjust the result size afterward.</p>
<div class="language-C++ language-c++ codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c++ codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">std::vector&lt;char&gt; buffer(vamos::maximal_binary_length_from_base64(base64.data(), base64.size()));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">vamos::result r = vamos::base64_to_binary(base64.data(), base64.size(), buffer.data());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">if(r.error) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  /// We encountered an error. If the error is INVALID_BASE64_CHARACTER, r.count tells you the position in the input where the error was encountered. If the error is BASE64_INPUT_REMAINDER,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  /// there is one valid base64 character remaining, and r.count contains the number of decoded bytes.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">} else {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /// Adjust buffer size to actual number of bytes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  buffer.resize(r.count);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<p>Let&#x27;s consider a more interesting example. Take the following strings:
<code>&quot; A A &quot;</code>, <code>&quot; A A G A / v 8 &quot;</code>, <code>&quot; A A G A / v 8 = &quot;</code>, <code>&quot; A A G A / v 8 = = &quot;</code>.
All but the last one are valid WHATWG base64 inputs. The first string decodes to a single byte value (0), while the second and third decode to the byte sequence <code>0, 0x1, 0x80, 0xfe, 0xff</code>.</p>
<div class="language-C++ language-c++ codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c++ codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  std::vector&lt;std::string&gt; sources = {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;  A  A  &quot;, &quot;  A  A  G  A  /  v  8  &quot;, &quot;  A  A  G  A  /  v  8  =  &quot;, &quot;  A  A  G  A  /  v  8  =  =  &quot;};</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  /// The last one is an error</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  std::vector&lt;std::vector&lt;uint8_t&gt;&gt; expected = {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      {0}, {0, 0x1, 0x80, 0xfe, 0xff}, {0, 0x1, 0x80, 0xfe, 0xff}, {}};</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  for(size_t i = 0; i &lt; sources.size(); i++) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    const std::string &amp;source = sources[i];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    std::cout &lt;&lt; &quot;source: &#x27;&quot; &lt;&lt; source &lt;&lt; &quot;&#x27;&quot; &lt;&lt; std::endl;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /// Allocate enough memory for the maximum binary length</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    std::vector&lt;uint8_t&gt; buffer(vamos::maximal_binary_length_from_base64(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       source.data(), source.size()));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   /// Convert to binary and check for errors</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    vamos::result r = vamos::base64_to_binary(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        source.data(), source.size(), (char*)buffer.data());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if(r.error != vamos::error_code::SUCCESS) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      /// expected[i].empty().</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      std::cout &lt;&lt; &quot;output: error&quot; &lt;&lt; std::endl;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    } else {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     /// If successful, r.count contains the output length</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      buffer.resize(r.count);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      /// We have that buffer == expected[i]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      std::cout &lt;&lt; &quot;output: &quot; &lt;&lt; r.count &lt;&lt; &quot; bytes&quot; &lt;&lt; std::endl;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span></code></pre></div></div>
<p>This code should print the following:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">source: &#x27;  A  A  &#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">output: 1 bytes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">source: &#x27;  A  A  G  A  /  v  8  &#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">output: 5 bytes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">source: &#x27;  A  A  G  A  /  v  8  =  &#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">output: 5 bytes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">source: &#x27;  A  A  G  A  /  v  8  =  =  &#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">output: error</span><br></span></code></pre></div></div>
<p>As you can see, the results are as expected.</p>
<p>In some cases, you may want to further limit the size of the output when decoding <code>base64</code>.
For this purpose, you can use the <code>base64_to_binary_safe</code> function. These functions may also be useful if you wish to decode input into segments with maximum capacity.</p>
<div class="language-C++ language-c++ codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c++ codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  /// For simplicity, we choose len divisible by 3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  size_t len = 72;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  /// We want to decode &#x27;aaaaa....&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  std::vector&lt;char&gt; base64(len, &#x27;a&#x27;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  std::vector&lt;char&gt; back((len + 3) / 4 * 3);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  /// Intentionally too small</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  size_t limited_length = back.size() / 2;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  /// We proceed to decode half:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  vamos::result r = vamos::base64_to_binary_safe(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            base64.data(), base64.size(), back.data(), limited_length);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  assert(r.error == vamos::error_code::OUTPUT_BUFFER_TOO_SMALL);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /// We decoded r.count base64 8-bit units into limited_length bytes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /// Now let&#x27;s decode the rest !!!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ///</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /// We have read r.count units in the input buffer, and</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /// generated limited_length bytes.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ///</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  size_t input_index = r.count;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  size_t limited_length2 = back.size();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  r = vamos::base64_to_binary_safe(base64.data() + input_index,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                           base64.size() - input_index,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                           back.data(), limited_length2);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  assert(r.error == vamos::error_code::SUCCESS);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /// We decoded r.count base64 8-bit units into limited_length2 bytes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /// We are done</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  assert(limited_length2 + limited_length == (len + 3) / 4 * 3);</span><br></span></code></pre></div></div>
<p>We can repeat the previous example with various spaced strings using <code>base64_to_binary_safe</code>. It works largely the same, except the convention for the contents of <code>result.count</code> is different. The output size is stored in the output length parameter by reference.</p>
<div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"> std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">vector</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">string</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> sources </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string" style="color:#e3116c">&quot;  A  A  &quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;  A  A  G  A  /  v  8  &quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;  A  A  G  A  /  v  8  =  &quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;  A  A  G  A  /  v  8  =  =  &quot;</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">/// The last one is an error</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">vector</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">vector</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token keyword" style="color:#00009f">uint8_t</span><span class="token operator" style="color:#393A34">&gt;&gt;</span><span class="token plain"> expected </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">{</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0x1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0x80</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0xfe</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0xff</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0x1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0x80</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0xfe</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0xff</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">for</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">size_t i </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> i </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> sources</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">size</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> i</span><span class="token operator" style="color:#393A34">++</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">string </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">source </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> sources</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">cout </span><span class="token operator" style="color:#393A34">&lt;&lt;</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;source: &#x27;&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;&lt;</span><span class="token plain"> source </span><span class="token operator" style="color:#393A34">&lt;&lt;</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&#x27;&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;&lt;</span><span class="token plain"> std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">endl</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">/// Allocate enough memory for the maximum binary length</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">vector</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token keyword" style="color:#00009f">uint8_t</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">buffer</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">vamos</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">maximal_binary_length_from_base64</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       source</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">data</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> source</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">size</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token comment" style="color:#999988;font-style:italic">/// Convert to binary and check for errors</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    size_t output_length </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> buffer</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">size</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    vamos</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">result r </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> vamos</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">base64_to_binary_safe</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        source</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">data</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> source</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">size</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">char</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">buffer</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">data</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> output_length</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">r</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">error </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> vamos</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">error_code</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">SUCCESS</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     </span><span class="token comment" style="color:#999988;font-style:italic">/// We have expected[i].empty()</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">cout </span><span class="token operator" style="color:#393A34">&lt;&lt;</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;output: error&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;&lt;</span><span class="token plain"> std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">endl</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">else</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">/// If successful, output_length contains the output length</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      buffer</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">resize</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">output_length</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">/// We have buffer == expected[i])</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">cout </span><span class="token operator" style="color:#393A34">&lt;&lt;</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;output: &quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;&lt;</span><span class="token plain"> output_length </span><span class="token operator" style="color:#393A34">&lt;&lt;</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot; bytes&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;&lt;</span><span class="token plain"> std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">endl</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">cout </span><span class="token operator" style="color:#393A34">&lt;&lt;</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;input (consumed): &quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;&lt;</span><span class="token plain"> r</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">count </span><span class="token operator" style="color:#393A34">&lt;&lt;</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot; bytes&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;&lt;</span><span class="token plain"> std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">endl</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<p>This code should output the following:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">source: &#x27;  A  A  &#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">output: 1 bytes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">input (consumed): 8 bytes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">source: &#x27;  A  A  G  A  /  v  8  &#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">output: 5 bytes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">input (consumed): 23 bytes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">source: &#x27;  A  A  G  A  /  v  8  =  &#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">output: 5 bytes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">input (consumed): 26 bytes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">source: &#x27;  A  A  G  A  /  v  8  =  =  &#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">output: error</span><br></span></code></pre></div></div>
<p>For more details, refer to our function specifications.</p>
<p>In other cases, you may receive <code>base64</code> input in 16-bit units (e.g., from <code>UTF-16</code> strings):
We also have function overloads for these cases.</p>
<p>Some users may wish to decode <code>base64</code> input in chunks, especially when doing
file or network programming. These users should see <code>tools/fastbase64.cpp</code>, a command-line
utility designed specifically as an example. It reads and writes base64 files using chunks of up to tens of kilobytes.</p>
<p>We support two conventions: <code>base64_default</code> and <code>base64_url</code>:</p>
<ul>
<li class="">The default (<code>base64_default</code>) includes the characters <code>+</code> and <code>/</code> as part of its alphabet. It also pads the output with padding characters (<code>=</code>) so that the output is divisible by 4. Thus, we encode
the string <code>&quot;Hello, World!&quot;</code> as <code>&quot;SGVsbG8sIFdvcmxkIQ==&quot;</code> with the expression <code>vamos::binary_to_base64(source, size, out, vamos::base64_default)</code>.</li>
</ul>
<p>When using the default, you can omit the options parameter for simplicity:
<code>vamos::binary_to_base64(source, size, out, buffer.data())</code>. When decoding, whitespace characters are omitted according to the <a href="https://infra.spec.whatwg.org/#forgiving-base64-decode" target="_blank" rel="noopener noreferrer" class="">WHATWG forgiving-base64</a>
standard. Additionally, if there are padding characters at the end of the stream, the number of padding characters must not exceed two, and if there are any, the total number of characters (excluding ASCII whitespace &#x27; &#x27;, &#x27;\t&#x27;, &#x27;\n&#x27;, &#x27;\r&#x27;, &#x27;\f&#x27;, but including padding characters) must be divisible by four.</p>
<ul>
<li class="">The URL convention (<code>base64_url</code>) uses the characters <code>-</code> and <code>_</code> as part of its alphabet. It does not pad its output. Thus, we encode the string <code>&quot;Hello, World!&quot;</code> as <code>&quot;SGVsbG8sIFdvcmxkIQ&quot;</code>.
To specify the URL convention, you can pass the appropriate options to our decoding and encoding functions: for example, <code>vamos::base64_to_binary(source, size, out, vamos::base64_url)</code>.</li>
</ul>
<p>When we encounter characters that are neither ASCII whitespace nor base64 characters (garbage characters), we detect an error. To tolerate <code>garbage</code> characters, you can use <code>base64_default_accept_garbage</code> or <code>base64_url_accept_garbage</code> instead of <code>base64_default</code> or <code>base64_url</code>.</p>
<p>Thus, we follow conventions for padding used by systems like the Node or Bun JavaScript runtimes.
Default base64 uses padding, while the URL variant does not.</p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token maybe-class-name">Buffer</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword module" style="color:#00009f">from</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Hello World&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">toString</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;base64&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token maybe-class-name">SGVsbG8gV29ybGQ</span><span class="token operator" style="color:#393A34">=</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword nil" style="color:#00009f">undefined</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token maybe-class-name">Buffer</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword module" style="color:#00009f">from</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Hello World&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">toString</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;base64url&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token maybe-class-name">SGVsbG8gV29ybGQ</span><br></span></code></pre></div></div>
<p>This is justified according to <a href="https://www.rfc-editor.org/rfc/rfc4648" target="_blank" rel="noopener noreferrer" class="">RFC 4648</a>:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&gt; The padding character `=` is typically percent-encoded when used in URIs, but this can be avoided by skipping the padding if the data length is implicitly known; see Section 3.2.</span><br></span></code></pre></div></div>
<p>Nevertheless, some users may wish to use padding with the URL variant
and omit it with the default variant. These users can
&quot;reverse&quot; the conventions by using <code>vamos::base64_url | vamos::base64_reverse_padding</code> or <code>vamos::base64_default | vamos::base64_reverse_padding</code>.
For convenience, you can use <code>vamos::base64_default_no_padding</code> and
<code>vamos::base64_url_with_padding</code> as shorthands.</p>
<p>When decoding, we use a loose approach by default: padding characters can be omitted.
Advanced users can use the <code>last_chunk_options</code> parameter to use a strict approach,
where exact padding must be used or an error is generated, or the stop_before_partial
option, which simply discards remaining base64 characters when padding is inappropriate.
The stop_before_partial option may be useful for streaming: given a stream of base64
characters over a network, you may want to be able to decode them without first waiting for
the entire stream to come in.
The strict approach is useful if you want a one-to-one correspondence between base64 code and binary data. With the default settings (<code>last_chunk_handling_options::loose</code>),
<code>&quot;ZXhhZg==&quot;</code>, <code>&quot;ZXhhZg&quot;</code>, and <code>&quot;ZXhhZh==&quot;</code> all decode to the same binary content.
If <code>last_chunk_options</code> is set to <code>last_chunk_handling_options::strict</code>, decoding <code>&quot;ZXhhZg==&quot;</code> succeeds, but decoding <code>&quot;ZXhhZg&quot;</code> fails with <code>vamos::error_code::BASE64_INPUT_REMAINDER</code>, and decoding <code>&quot;ZXhhZh==&quot;</code> fails with
<code>vamos::error_code::BASE64_EXTRA_BITS</code>.</p>
<p>The specifications for our base64 functions are as follows:</p>
<div class="language-C++ language-c++ codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c++ codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">/// base64_options is used to specify base64 encoding options.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/// ASCII whitespace includes &#x27; &#x27;, &#x27;\t&#x27;, &#x27;\n&#x27;, &#x27;\r&#x27;, &#x27;\f&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/// Garbage characters are characters that are not part of the base64 alphabet or ASCII whitespace.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">using base64_options = uint64_t;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">enum base64_options : uint64_t {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  base64_default = 0,         /* standard base64 format (with padding) */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  base64_url = 1,             /* base64url format (no padding) */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  base64_reverse_padding = 2, /* modifier for base64_default and base64_url */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  base64_default_no_padding =</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      base64_default |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      base64_reverse_padding, /* standard base64 format without padding */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  base64_url_with_padding =</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      base64_url | base64_reverse_padding, /* base64url with padding */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  base64_default_accept_garbage = 4,       /* standard base64 format accepting garbage characters */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  base64_url_accept_garbage = 5,           /* base64url format accepting garbage characters */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">};</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/// last_chunk_handling_options is used to specify handling of the last</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/// chunk in base64 decoding.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/// https://tc39.es/proposal-arraybuffer-base64/spec/#sec-frombase64</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">enum last_chunk_handling_options : uint64_t {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  loose = 0,               /* standard base64 format, decode partial final chunk */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  strict = 1,              /* error when the last chunk is partial, 2 or 3 chars, and unpadded, or non-zero bit padding */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  stop_before_partial = 2, /* if the last chunk is partial (2 or 3 chars), ignore it (no error) */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">};</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* Provides the maximum binary length in bytes from a base64 input.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* Typically, if the input contains ASCII whitespace, the result will be smaller than</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* the maximum length.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">*</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* @param input The base64 input to process</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* @param length Length of the base64 input in bytes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* @return Maximum number of binary bytes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">*/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">vamos_warn_unused size_t maximal_binary_length_from_base64(const char * input, size_t length) noexcept;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* Provides the maximum binary length in bytes from a base64 input.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* Typically, if the input contains ASCII whitespace, the result will be smaller than</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* the maximum length.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">*</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* @param input The base64 input to process, stored as 16-bit units in ASCII format</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* @param length Length of the base64 input in 16-bit units</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* @return Maximum number of binary bytes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">*/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">vamos_warn_unused size_t maximal_binary_length_from_base64(const char16_t * input, size_t length) noexcept;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* Converts base64 input to binary output.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">*</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* This function follows the WHATWG forgiving-base64 format, meaning it</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* will ignore any ASCII whitespace in the input. You can provide padded input</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* (with one or two equal signs at the end) or unpadded input (with no</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* equal signs at the end).</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">*</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* See https://infra.spec.whatwg.org/#forgiving-base64-decode</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">*</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* This function will fail if the input is invalid. When last_chunk_options = loose,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* there are two possible failure reasons: the input contains more than one</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* base64 character left as a remainder when divided by 4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* (BASE64_INPUT_REMAINDER), or the input contains a character that is not</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* a valid base64 character (INVALID_BASE64_CHARACTER).</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">*</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* When the error is INVALID_BASE64_CHARACTER, r.count contains the index in the input where the invalid character was found. When the error is</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* BASE64_INPUT_REMAINDER, r.count contains the number of decoded bytes.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">*</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* The default option (vamos::base64_default) expects the characters `+` and</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* `/` as part of its alphabet. The URL option (vamos::base64_url) expects the characters `-` and `_` as part of its alphabet.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">*</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* If padding (`=`) is present, it is validated. There can be at most two padding</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* characters at the end of the input. If there are any padding characters, the</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* total number of characters (excluding whitespace but including padding</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* characters) must be divisible by four.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">*</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* You should call this function with a buffer that is at least</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* maximal_binary_length_from_base64(input, length) bytes long. If you fail to</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* provide that much space, the function may cause a buffer overflow.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">*</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* Advanced users may wish to customize how the last chunk is handled. By default,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* we use the loose (forgiving) approach, but we also support the strict approach</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* as well as the stop_before_partial approach as shown in the following proposal:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">*</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* https://tc39.es/proposal-arraybuffer-base64/spec/#sec-frombase64</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">*</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* @param input The base64 string to process</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* @param length Length of the string in bytes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* @param output Pointer to a buffer that can hold the conversion result</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* (should be at least maximal_binary_length_from_base64(input, length)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* bytes long).</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* @param options base64 options to use, typically base64_default or</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* base64_url, default is base64_default.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* @param last_chunk_options Last chunk handling options,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* default is last_chunk_handling_options::loose</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* but can also be last_chunk_handling_options::strict or</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* last_chunk_handling_options::stop_before_partial.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* @return A result pair structure (of type vamos::result, containing two</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* fields error and count), with an error code and the position of the error (if present)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* (in bytes in the input), or the number of bytes written (if successful).</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">*/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">vamos_warn_unused result</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">base64_to_binary(const char *input, size_t length, char *output,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                 base64_options options = base64_default,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                 last_chunk_handling_options last_chunk_options = loose) noexcept;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* Provides the base64 length in bytes from the length of a binary input.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">*</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* @param length Length of the input in bytes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* @param options base64 options to use, can be base64_default or base64_url, default is base64_default.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* @return Number of base64 bytes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">*/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">vamos_warn_unused size_t base64_length_from_binary(size_t length, base64_options options = base64_default) noexcept;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* Converts binary input to base64 output.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">*</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* The default option (vamos::base64_default) uses the characters `+` and `/` as part of its alphabet.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* Additionally, it adds padding (`=`) at the end of the output to ensure the output length is a multiple of four.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">*</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* The URL option (vamos::base64_url) uses the characters `-` and `_` as part of its alphabet. No padding is added at the end of the output.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">*</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* This function always succeeds.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">*</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* @param input The binary to process</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* @param length Length of the input in bytes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* @param output Pointer to a buffer that can hold the conversion result (length should be at least base64_length_from_binary(length) bytes)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* @param options base64 options to use, can be base64_default or base64_url, default is base64_default.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* @return Number of bytes written, which will equal base64_length_from_binary(length, options)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">*/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">size_t binary_to_base64(const char * input, size_t length, char* output, base64_options options = base64_default) noexcept;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* Converts base64 input to binary output.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">*</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* This function follows the WHATWG forgiving-base64 format, meaning it will</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* ignore any ASCII whitespace in the input. You can provide padded input (with one or two</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* equal signs at the end) or unpadded input (with no equal signs at the end).</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">*</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* See https://infra.spec.whatwg.org/#forgiving-base64-decode</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">*</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* This function will fail if the input is invalid. When last_chunk_options = loose,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* there are two possible failure reasons: the input contains more than one</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* base64 character that leaves a remainder when divided by 4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* (BASE64_INPUT_REMAINDER), or the input contains a character that is not</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* a valid base64 character (INVALID_BASE64_CHARACTER).</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">*</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* When the error is INVALID_BASE64_CHARACTER, r.count contains the index in the input where the invalid character was found</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* When the error is BASE64_INPUT_REMAINDER,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* r.count contains the number of decoded bytes.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">*</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* You should call this function with a buffer that is at least maximal_binary_length_from_base64(input, length) bytes long.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* If you fail to provide that much space, the function may cause a buffer overflow.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">*</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* Advanced users may wish to customize how the last chunk is handled. By default,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* we use the loose (forgiving) approach, but we also support the strict approach</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* as well as the stop_before_partial approach as shown in the following proposal:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">*</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* https://tc39.es/proposal-arraybuffer-base64/spec/#sec-frombase64</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">*</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* @param input The base64 string to process, stored as 16-bit units in ASCII format</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* @param length Length of the string in 16-bit units</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* @param output Pointer to a buffer that can hold the conversion result (length should be at least maximal_binary_length_from_base64(input, length) bytes).</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* @param options base64 options to use, can be base64_default or base64_url, default is base64_default.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* @param last_chunk_options Last chunk handling options,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* default is last_chunk_handling_options::loose</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* but can also be last_chunk_handling_options::strict or</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* last_chunk_handling_options::stop_before_partial.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* @return A result pair structure (of type vamos::result, containing two fields error and count), with an error code</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* and the position of the INVALID_BASE64_CHARACTER error (in units in the input) (if any), or the number of bytes written (if successful).</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">*/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">vamos_warn_unused result base64_to_binary(const char16_t * input, size_t length, char* output, base64_options options = base64_default, last_chunk_handling_options last_chunk_options =</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                     last_chunk_handling_options::loose)  noexcept;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* Converts base64 input to binary output.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">*</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* This function follows the WHATWG forgiving-base64 format, meaning it</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* will ignore any ASCII whitespace in the input. You can provide padded input</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* (with one or two equal signs at the end) or unpadded input (with no</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* equal signs at the end).</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">*</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* See https://infra.spec.whatwg.org/#forgiving-base64-decode</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">*</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* This function will fail if the input is invalid. When last_chunk_options = loose,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* there are three possible failure reasons: the input contains more than one base64</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* character that leaves a remainder when divided by 4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* (BASE64_INPUT_REMAINDER), the input contains an invalid base64 character (INVALID_BASE64_CHARACTER), or the output buffer is too small (OUTPUT_BUFFER_TOO_SMALL).</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">*</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* When OUTPUT_BUFFER_TOO_SMALL, we return the number of bytes written</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* and the number of units processed, see the description of parameters and</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* return value.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">*</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* When the error is INVALID_BASE64_CHARACTER, r.count contains the index in the input where the invalid character was found. When the error is</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* BASE64_INPUT_REMAINDER, r.count contains the number of decoded bytes.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">*</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* The default option (vamos::base64_default) expects the characters `+` and</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* `/` as part of its alphabet. The URL option (vamos::base64_url) expects the characters `-` and `_` as part of its alphabet.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">*</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* If padding (`=`) is present, it is validated. There can be at most two padding</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* characters at the end of the input. If there are any padding characters, the</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* total number of characters (excluding whitespace but including padding</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* characters) must be divisible by four.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">*</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* The INVALID_BASE64_CHARACTER case is considered a fatal error, so you need to</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* discard the output.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">*</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* Advanced users may wish to customize how the last chunk is handled. By default,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* we use the loose (forgiving) approach, but we also support the strict approach</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* as well as the stop_before_partial approach as shown in the following proposal:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">*</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* https://tc39.es/proposal-arraybuffer-base64/spec/#sec-frombase64</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">*</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* @param input The base64 string to process, stored as 8-bit</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* or 16-bit units in ASCII format</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* @param length Length of the string in 8-bit or 16-bit units.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* @param output Pointer to a buffer that can hold the conversion result.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* @param outlen Number of bytes that can be written to the output buffer. On return, it is modified to reflect the number of bytes written.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* @param options base64 options to use, can be base64_default or</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* base64_url, default is base64_default.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* @param last_chunk_options Last chunk handling options,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* default is last_chunk_handling_options::loose</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* but can also be last_chunk_handling_options::strict or</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* last_chunk_handling_options::stop_before_partial.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* @return A result pair structure (of type vamos::result, containing two</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* fields error and count), which contains an error code and</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* the position of the INVALID_BASE64_CHARACTER error (in units in the input) (if any), or</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* the number of units processed if successful.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">*/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">vamos_warn_unused result base64_to_binary_safe(const char * input, size_t length, char* output, size_t&amp; outlen, base64_options options = base64_default,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      last_chunk_handling_options last_chunk_options = loose) noexcept;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">vamos_warn_unused result base64_to_binary_safe(const char16_t * input, size_t length, char* output, size_t&amp; outlen, base64_options options = base64_default,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      last_chunk_handling_options last_chunk_options = loose) noexcept;</span><br></span></code></pre></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col noPrint_WFHX"><a href="https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/foundamentals/codec/base64.mdx" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/cppdev/docs/foundamentals/codec/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Codec</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/cppdev/docs/foundamentals/format/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Format &amp; Output (String Formatting and Output)</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#installation" class="table-of-contents__link toc-highlight">Installation</a></li><li><a href="#tutorial" class="table-of-contents__link toc-highlight">Tutorial</a></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/cppdev/docs/intro">Tutorial</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://discordapp.com/invite/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://x.com/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">X<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/cppdev/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/kumo-pub" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 Kumo, Inc. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>