"use strict";(globalThis.webpackChunkwebsite=globalThis.webpackChunkwebsite||[]).push([[4711],{4180:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>d,contentTitle:()=>t,default:()=>m,frontMatter:()=>c,metadata:()=>r,toc:()=>o});const r=JSON.parse('{"id":"foundamentals/json/overview","title":"merak json \u2014 \u6982\u89c8\u603b\u7ed3","description":"\u9ad8\u6027\u80fd C++ JSON \u89e3\u6790/\u751f\u6210\u5e93","source":"@site/i18n/zh-cn/docusaurus-plugin-content-docs/current/foundamentals/json/overview.mdx","sourceDirName":"foundamentals/json","slug":"/foundamentals/json/overview","permalink":"/cppdev/zh-cn/docs/foundamentals/json/overview","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"\u6982\u89c8","permalink":"/cppdev/zh-cn/docs/foundamentals/json/"},"next":{"title":"\u529f\u80fd\u7279\u6027","permalink":"/cppdev/zh-cn/docs/foundamentals/json/features"}}');var i=s(4848),l=s(8453);const a=s.p+"assets/images/simpledom-6f410aeb45d32ae86fae6129ca91c332.png",c={},t="merak json \u2014 \u6982\u89c8\u603b\u7ed3",d={},o=[{value:"\u9ad8\u6027\u80fd C++ JSON \u89e3\u6790/\u751f\u6210\u5e93",id:"overview",level:2},{value:"\u6838\u5fc3\u7279\u70b9",id:"\u6838\u5fc3\u7279\u70b9",level:3},{value:"v1.1 \u4eae\u70b9\uff082016-08-25\uff09",id:"v11-\u4eae\u70b92016-08-25",level:2},{value:"\u5e73\u53f0\u517c\u5bb9\u6027",id:"\u5e73\u53f0\u517c\u5bb9\u6027",level:2},{value:"\u5b89\u88c5",id:"installation",level:2},{value:"\u6784\u5efa\u6d4b\u8bd5\u548c\u793a\u4f8b\u6b65\u9aa4",id:"\u6784\u5efa\u6d4b\u8bd5\u548c\u793a\u4f8b\u6b65\u9aa4",level:3},{value:"\u5feb\u901f\u793a\u4f8b\uff08DOM\uff09",id:"\u5feb\u901f\u793a\u4f8bdom",level:2},{value:"\u793a\u4f8b\u5206\u7c7b",id:"\u793a\u4f8b\u5206\u7c7b",level:2},{value:"DOM API",id:"dom-api",level:3},{value:"SAX API",id:"sax-api",level:3},{value:"Schema API",id:"schema-api",level:3},{value:"\u9ad8\u7ea7\u793a\u4f8b",id:"\u9ad8\u7ea7\u793a\u4f8b",level:3}];function h(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,l.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"merak-json--\u6982\u89c8\u603b\u7ed3",children:"merak json \u2014 \u6982\u89c8\u603b\u7ed3"})}),"\n",(0,i.jsx)(n.h2,{id:"overview",children:"\u9ad8\u6027\u80fd C++ JSON \u89e3\u6790/\u751f\u6210\u5e93"}),"\n",(0,i.jsxs)(n.p,{children:["merak json \u57fa\u4e8e ",(0,i.jsx)(n.strong,{children:"Merak"})," \u6539\u9020\uff0c\u4fdd\u7559 Merak \u7684 API \u98ce\u683c\uff0c\u5e76\u589e\u5f3a\u4e86 ",(0,i.jsx)(n.strong,{children:"Protocol Buffers (protobuf)"})," \u652f\u6301\u3002"]}),"\n",(0,i.jsx)(n.h3,{id:"\u6838\u5fc3\u7279\u70b9",children:"\u6838\u5fc3\u7279\u70b9"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"\u5c0f\u800c\u5168"}),"\uff1a\u652f\u6301 SAX \u4e0e DOM \u98ce\u683c API\uff0cSAX \u89e3\u6790\u5668\u4ec5 ~500 \u884c\u4ee3\u7801\u3002"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"\u6027\u80fd\u4f18\u5f02"}),"\uff1a\u89e3\u6790\u901f\u5ea6\u63a5\u8fd1 ",(0,i.jsx)(n.code,{children:"strlen()"}),"\uff0c\u652f\u6301 SSE2 / SSE4.2 \u52a0\u901f\u3002"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"\u72ec\u7acb\u81ea\u7ed9"}),"\uff1a\u65e0 BOOST \u6216 STL \u4f9d\u8d56\u3002"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"\u5185\u5b58\u9ad8\u6548"}),"\uff1a32/64 \u4f4d\u673a\u5668\u4e0a\u6bcf\u4e2a JSON \u503c\u4ec5 16 \u5b57\u8282\uff08\u4e0d\u542b\u5b57\u7b26\u4e32\uff09\uff0c\u9ed8\u8ba4\u4f7f\u7528\u9ad8\u901f\u5185\u5b58\u5206\u914d\u5668\u3002"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Unicode \u53cb\u597d"}),"\uff1a\u652f\u6301 UTF-8/16/32\uff08\u5927/\u5c0f\u7aef\uff09\uff0c\u53ef\u81ea\u52a8\u68c0\u6d4b\u3001\u9a8c\u8bc1\u548c\u8f6c\u7801\uff1b\u652f\u6301\u4ee3\u7406\u5bf9\u548c ",(0,i.jsx)(n.code,{children:'"\\u0000"'}),"\u3002"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["\u66f4\u591a\u7279\u6027\u53ef\u53c2\u8003 ",(0,i.jsx)(n.a,{href:"/cppdev/zh-cn/docs/foundamentals/json/features",children:"features.mdx"}),"\u3002"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"v11-\u4eae\u70b92016-08-25",children:"v1.1 \u4eae\u70b9\uff082016-08-25\uff09"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"JSON Pointer \u652f\u6301\uff1a\u66f4\u65b9\u4fbf\u8bbf\u95ee/\u4fee\u6539 DOM"}),"\n",(0,i.jsx)(n.li,{children:"JSON Schema \u652f\u6301\uff1a\u89e3\u6790/\u751f\u6210\u65f6\u9a8c\u8bc1 JSON"}),"\n",(0,i.jsx)(n.li,{children:"\u652f\u6301\u5bbd\u677e JSON \u8bed\u6cd5\uff08\u6ce8\u91ca\u3001\u5c3e\u968f\u9017\u53f7\u3001NaN/Infinity\uff09"}),"\n",(0,i.jsx)(n.li,{children:"\u652f\u6301 C++11 range-based for \u5faa\u73af"}),"\n",(0,i.jsxs)(n.li,{children:["\u5c06 ",(0,i.jsx)(n.code,{children:"Value"})," \u5185\u5b58\u5f00\u9500\u4ece 24 \u5b57\u8282\u964d\u81f3 16 \u5b57\u8282\uff08x86-64\uff09"]}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"\u5e73\u53f0\u517c\u5bb9\u6027",children:"\u5e73\u53f0\u517c\u5bb9\u6027"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Windows (VC++ 2008/2010/2013) 32/64 \u4f4d"}),"\n",(0,i.jsx)(n.li,{children:"GNU C++ 3.8.x on Cygwin"}),"\n",(0,i.jsx)(n.li,{children:"Clang 3.4 Mac OS X / iOS"}),"\n",(0,i.jsx)(n.li,{children:"Clang 3.4 Android NDK\n\u7528\u6237\u4e5f\u53ef\u5728\u81ea\u6709\u5e73\u53f0\u7f16\u8bd1\u5e76\u8fd0\u884c\u5355\u5143\u6d4b\u8bd5\u3002"}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"installation",children:"\u5b89\u88c5"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"kmpkg install merak\n"})}),"\n",(0,i.jsx)(n.h3,{id:"\u6784\u5efa\u6d4b\u8bd5\u548c\u793a\u4f8b\u6b65\u9aa4",children:"\u6784\u5efa\u6d4b\u8bd5\u548c\u793a\u4f8b\u6b65\u9aa4"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"git submodule update --init"})," \u83b7\u53d6\u7b2c\u4e09\u65b9\u5b50\u6a21\u5757\uff08Google Test\uff09"]}),"\n",(0,i.jsxs)(n.li,{children:["\u5728 merak \u6839\u76ee\u5f55\u4e0b\u521b\u5efa ",(0,i.jsx)(n.code,{children:"build"})," \u76ee\u5f55"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"cmake .."})," \u914d\u7f6e\u6784\u5efa\uff08Windows \u53ef\u7528 cmake-gui\uff09"]}),"\n",(0,i.jsxs)(n.li,{children:["Windows\uff1a\u6784\u5efa solution\uff1bLinux\uff1a",(0,i.jsx)(n.code,{children:"make"}),"\n\u53ef\u5728 ",(0,i.jsx)(n.code,{children:"bin"})," \u76ee\u5f55\u83b7\u53d6\u53ef\u6267\u884c\u6587\u4ef6\uff0c",(0,i.jsx)(n.code,{children:"doc/html"})," \u83b7\u53d6\u6587\u6863\n\u8fd0\u884c\u6d4b\u8bd5\uff1a",(0,i.jsx)(n.code,{children:"make test"})," \u6216 ",(0,i.jsx)(n.code,{children:"ctest"}),"\uff08",(0,i.jsx)(n.code,{children:"ctest -V"})," \u67e5\u770b\u8be6\u7ec6\u8f93\u51fa\uff09"]}),"\n",(0,i.jsxs)(n.li,{children:["\u53ef\u7528 ",(0,i.jsx)(n.code,{children:"make install"})," \u5b89\u88c5\u5230\u7cfb\u7edf\u76ee\u5f55\uff0cCMake \u9879\u76ee\u53ef\u901a\u8fc7 ",(0,i.jsx)(n.code,{children:"find_package(Merak)"})," \u4f7f\u7528"]}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"\u5feb\u901f\u793a\u4f8bdom",children:"\u5feb\u901f\u793a\u4f8b\uff08DOM\uff09"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-cpp",children:'#include "merak/json/document.h"\n#include "merak/json/writer.h"\n#include "merak/json/stringbuffer.h"\n#include <iostream>\n\nusing namespace merak::json;\n\nint main() {\n    const char* json = "{\\"project\\":\\"merak\\",\\"stars\\":10}";\n    Document d;\n    d.Parse(json);\n\n    // \u4fee\u6539 DOM\n    Value& s = d["stars"];\n    s.SetInt(s.GetInt() + 1);\n\n    // \u751f\u6210 JSON\n    StringBuffer buffer;\n    Writer<StringBuffer> writer(buffer);\n    d.Accept(writer);\n\n    std::cout << buffer.GetString() << std::endl; // {"project":"merak","stars":11}\n    return 0;\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:"\u6267\u884c\u6d41\u7a0b\u53ef\u53c2\u8003\u4e0b\u56fe\uff1a"}),"\n","\n",(0,i.jsx)("img",{src:a}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"\u793a\u4f8b\u5206\u7c7b",children:"\u793a\u4f8b\u5206\u7c7b"}),"\n",(0,i.jsx)(n.h3,{id:"dom-api",children:"DOM API"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"https://github.com/kumose/merak/blob/master/example/tutorial/tutorial.cpp",children:"tutorial"}),"\uff1aDOM \u57fa\u672c\u7528\u6cd5"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"sax-api",children:"SAX API"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"https://github.com/kumose/merak/blob/master/example/simplereader/simplereader.cpp",children:"simplereader"}),"\uff1a\u6253\u5370 SAX \u4e8b\u4ef6"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"https://github.com/kumose/merak/blob/master/example/condense/condense.cpp",children:"condense"}),"\uff1a\u53bb\u9664 JSON \u7a7a\u767d"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"https://github.com/kumose/merak/blob/master/example/pretty/pretty.cpp",children:"pretty"}),"\uff1a\u683c\u5f0f\u5316 JSON"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"https://github.com/kumose/merak/blob/master/example/capitalize/capitalize.cpp",children:"capitalize"}),"\uff1a\u5b57\u7b26\u4e32\u5927\u5199\u5316"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"https://github.com/kumose/merak/blob/master/example/messagereader/messagereader.cpp",children:"messagereader"}),"\uff1aSAX \u6d88\u606f\u89e3\u6790"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"https://github.com/kumose/merak/blob/master/example/serialize/serialize.cpp",children:"serialize"}),"\uff1aC++ \u5bf9\u8c61 \u2192 JSON"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"https://github.com/kumose/merak/blob/master/example/jsonx/jsonx.cpp",children:"jsonx"}),"\uff1aSAX \u2192 JSONx (XML \u683c\u5f0f)"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"schema-api",children:"Schema API"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"https://github.com/kumose/merak/blob/master/example/schemavalidator/schemavalidator.cpp",children:"schemavalidator"}),"\uff1aJSON Schema \u9a8c\u8bc1"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"\u9ad8\u7ea7\u793a\u4f8b",children:"\u9ad8\u7ea7\u793a\u4f8b"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"https://github.com/kumose/merak/blob/master/example/prettyauto/prettyauto.cpp",children:"prettyauto"}),"\uff1a\u81ea\u52a8\u5904\u7406\u4efb\u610f UTF \u7f16\u7801\u7684 JSON"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"https://github.com/kumose/merak/blob/master/example/parsebyparts/parsebyparts.cpp",children:"parsebyparts"}),"\uff1aC++ \u7ebf\u7a0b\u5206\u5757\u89e3\u6790 JSON"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"https://github.com/kumose/merak/blob/master/example/filterkey/filterkey.cpp",children:"filterkey"}),"\uff1a\u5220\u9664\u6307\u5b9a key"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"https://github.com/kumose/merak/blob/master/example/filterkey/filterkey.cpp",children:"filterkeydom"}),"\uff1a\u4f7f\u7528\u751f\u6210\u5668\u586b\u5145 DOM \u540e\u5220\u9664 key"]}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsxs)(n.p,{children:["\u603b\u7ed3\uff1amerak json \u63d0\u4f9b ",(0,i.jsx)(n.strong,{children:"\u9ad8\u6027\u80fd\u3001\u4f4e\u5185\u5b58\u3001\u8de8\u5e73\u53f0"})," \u7684 JSON \u89e3\u6790\u548c\u751f\u6210\u80fd\u529b\uff0c\u540c\u65f6\u517c\u987e ",(0,i.jsx)(n.strong,{children:"DOM/SAX \u7075\u6d3b\u6027"})," \u4e0e ",(0,i.jsx)(n.strong,{children:"protobuf \u62d3\u5c55"}),"\uff0c\u9002\u5408\u5d4c\u5165\u5f0f\u3001\u9ad8\u6027\u80fd\u670d\u52a1\u548c\u8de8\u5e73\u53f0\u5e94\u7528\u3002"]})]})}function m(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(h,{...e})}):h(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>a,x:()=>c});var r=s(6540);const i={},l=r.createContext(i);function a(e){const n=r.useContext(l);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),r.createElement(l.Provider,{value:n},e.children)}}}]);