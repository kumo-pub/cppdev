"use strict";(globalThis.webpackChunkwebsite=globalThis.webpackChunkwebsite||[]).push([[6733],{3251:(n,e,s)=>{s.r(e),s.d(e,{assets:()=>c,contentTitle:()=>h,default:()=>o,frontMatter:()=>d,metadata:()=>r,toc:()=>a});const r=JSON.parse('{"id":"foundamentals/map/benchmark","title":"C++ \u54c8\u5e0c\u8868\u6027\u80fd\u57fa\u51c6\u6d4b\u8bd5","description":"\u6700\u65b0\u7684\u54c8\u5e0c\u8868\u6027\u80fd\u5bf9\u6bd4\u7ed3\u679c\u5df2\u7ecf\u53d1\u5e03\uff0c\u7531 ankerl::map \u7684\u5f00\u53d1\u8005 Martin Leitner-Ankerl \u63d0\u4f9b\u3002","source":"@site/i18n/zh-cn/docusaurus-plugin-content-docs/current/foundamentals/map/benchmark.mdx","sourceDirName":"foundamentals/map","slug":"/foundamentals/map/benchmark","permalink":"/cppdev/zh-cn/docs/foundamentals/map/benchmark","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"parallel-hashmap \u4f7f\u7528\u6307\u5357\uff1a\u9ad8\u6027\u80fd\u3001\u7ebf\u7a0b\u5b89\u5168\u3001\u5185\u5b58\u9ad8\u6548\u7684\u54c8\u5e0c\u8868\u4e0e B \u6811","permalink":"/cppdev/zh-cn/docs/foundamentals/map/pmap"},"next":{"title":"\u538b\u7f29\u4e0e\u89e3\u538b\u7f29","permalink":"/cppdev/zh-cn/docs/foundamentals/compress/"}}');var l=s(4848),i=s(8453);const d={},h="C++ \u54c8\u5e0c\u8868\u6027\u80fd\u57fa\u51c6\u6d4b\u8bd5",c={},a=[{value:"I. \u54c8\u5e0c\u8868\u6027\u80fd\u5bf9\u6bd4",id:"i-\u54c8\u5e0c\u8868\u6027\u80fd\u5bf9\u6bd4",level:2},{value:"\u6d4b\u8bd5\u7ef4\u5ea6",id:"\u6d4b\u8bd5\u7ef4\u5ea6",level:3},{value:"\u6838\u5fc3\u6d4b\u8bd5\u7ed3\u679c",id:"\u6838\u5fc3\u6d4b\u8bd5\u7ed3\u679c",level:3},{value:"II. \u54c8\u5e0c\u51fd\u6570\u6bd4\u8f83",id:"ii-\u54c8\u5e0c\u51fd\u6570\u6bd4\u8f83",level:2},{value:"III. \u9876\u7ea7\u5bb9\u5668\u6df1\u5165\u5206\u6790",id:"iii-\u9876\u7ea7\u5bb9\u5668\u6df1\u5165\u5206\u6790",level:2},{value:"1. Ankerl::unordered_dense::map",id:"1-ankerlunordered_densemap",level:3},{value:"\u67b6\u6784\u8bbe\u8ba1",id:"\u67b6\u6784\u8bbe\u8ba1",level:4},{value:"\u6838\u5fc3\u64cd\u4f5c",id:"\u6838\u5fc3\u64cd\u4f5c",level:4},{value:"2. emhash8::HashMap",id:"2-emhash8hashmap",level:3},{value:"\u67b6\u6784\u8bbe\u8ba1",id:"\u67b6\u6784\u8bbe\u8ba1-1",level:4},{value:"\u6838\u5fc3\u6570\u636e\u7ed3\u6784",id:"\u6838\u5fc3\u6570\u636e\u7ed3\u6784",level:4},{value:"3-way \u590d\u5408\u63a2\u6d4b",id:"3-way-\u590d\u5408\u63a2\u6d4b",level:4},{value:"\u667a\u80fd\u51b2\u7a81\u89e3\u51b3",id:"\u667a\u80fd\u51b2\u7a81\u89e3\u51b3",level:4}];function t(n){const e={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...n.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(e.header,{children:(0,l.jsx)(e.h1,{id:"c-\u54c8\u5e0c\u8868\u6027\u80fd\u57fa\u51c6\u6d4b\u8bd5",children:"C++ \u54c8\u5e0c\u8868\u6027\u80fd\u57fa\u51c6\u6d4b\u8bd5"})}),"\n",(0,l.jsxs)(e.p,{children:["\u6700\u65b0\u7684\u54c8\u5e0c\u8868\u6027\u80fd\u5bf9\u6bd4\u7ed3\u679c\u5df2\u7ecf\u53d1\u5e03\uff0c\u7531 ",(0,l.jsx)(e.code,{children:"ankerl::unordered_dense::map"})," \u7684\u5f00\u53d1\u8005 Martin Leitner-Ankerl \u63d0\u4f9b\u3002\n\u6b64\u524d\u7684\u6d4b\u8bd5\u662f\u5728 2019 \u5e74\u8fdb\u884c\u7684\uff0c\u8fd9\u6b21\u66f4\u65b0\u63d0\u4f9b\u4e86\u66f4\u5168\u9762\u7684\u6d4b\u8bd5\u6570\u636e\uff0c\u662f\u9009\u62e9\u9ad8\u6027\u80fd\u54c8\u5e0c\u8868\u7684\u6709\u529b\u53c2\u8003\u3002"]}),"\n",(0,l.jsx)(e.hr,{}),"\n",(0,l.jsx)(e.h2,{id:"i-\u54c8\u5e0c\u8868\u6027\u80fd\u5bf9\u6bd4",children:"I. \u54c8\u5e0c\u8868\u6027\u80fd\u5bf9\u6bd4"}),"\n",(0,l.jsx)(e.h3,{id:"\u6d4b\u8bd5\u7ef4\u5ea6",children:"\u6d4b\u8bd5\u7ef4\u5ea6"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:"\u6570\u636e\u7c7b\u578b"}),"\uff1a\u5206\u4e3a\u6570\u5b57\u7c7b\u578b\uff08Numbers\uff09\u548c\u5b57\u7b26\u4e32\u7c7b\u578b\uff08Strings\uff09\u3002"]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:"\u64cd\u4f5c\u7c7b\u578b"}),"\uff1a\u5e38\u89c1\u64cd\u4f5c\uff0c\u5305\u62ec Insert\u3001Random Insert\u3001Iterate\u3001Find \u548c Copy\u3002"]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:"\u7279\u6b8a Find \u6d4b\u8bd5"}),"\uff1a\u8bc4\u4f30\u4e0d\u540c\u9009\u62e9\u7387\u548c\u63d2\u5165-\u67e5\u627e\u9891\u7387\u4e0b\u7684\u6027\u80fd\u3002"]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:"\u989d\u5916\u6bd4\u8f83"}),"\uff1a\u5305\u62ec\u5185\u5b58\u4f7f\u7528\u5206\u6790\uff0c\u603b\u4f53\u7ed3\u679c\u4f7f\u7528\u7b97\u672f\u5e73\u5747\u8ba1\u7b97\u3002"]}),"\n"]}),"\n",(0,l.jsx)(e.h3,{id:"\u6838\u5fc3\u6d4b\u8bd5\u7ed3\u679c",children:"\u6838\u5fc3\u6d4b\u8bd5\u7ed3\u679c"}),"\n",(0,l.jsxs)(e.ol,{children:["\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.strong,{children:"ankerl::unordered_dense::map"}),"\n\u6027\u80fd\u6700\u4f73\uff08\u6240\u6709\u64cd\u4f5c\u7684\u7b97\u672f\u5e73\u5747\u6700\u9ad8\uff09\u3002Copy \u548c Iterate \u6027\u80fd\u65e0\u53ef\u5339\u654c\uff0cFind \u6027\u80fd\u4f18\u79c0\u3002\u80fd\u591f\u9002\u5e94\u4e0d\u540c\u54c8\u5e0c\u51fd\u6570\uff0c\u6027\u80fd\u6ce2\u52a8\u5c0f\u3002\u7ee7\u627f\u81ea robin_hood\uff08\u540c\u4e00\u4f5c\u8005\uff09\uff0c\u6027\u80fd\u4f18\u4e8e robin_hood \u7cfb\u5217\u3002"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.strong,{children:"gtl::flat_hash_map / gtl::parallel_flat_hash_map"}),"\n\u5728\u5f00\u6e90\u793e\u533a\u901a\u5e38\u79f0\u4e3a ",(0,l.jsx)(e.code,{children:"phmap::flat_hash_map"})," \u548c ",(0,l.jsx)(e.code,{children:"phmap::parallel_flat_hash_map"}),"\u3002",(0,l.jsx)(e.code,{children:"gtl::parallel_flat_hash_map"})," \u662f\u5e76\u884c\u7248\u672c\uff0c\u884d\u751f\u81ea Google Abseil \u7684 ",(0,l.jsx)(e.code,{children:"absl::flat_hash_map"}),"\uff0c\u6027\u80fd\u4f18\u5f02\u3002\u4ed3\u5e93\u63d0\u4f9b BTree \u548c Hash \u5bb9\u5668\u5b9e\u73b0\uff0c\u5747\u4e3a header-only\uff0c\u4fbf\u4e8e\u96c6\u6210\u3002",(0,l.jsx)(e.code,{children:"gtl::flat_hash_map"})," \u5728 \u201cFind 1 \u2013 500k uint64_t\u201d \u6d4b\u8bd5\u4e2d\u8868\u73b0\u6700\u4f73\u3002"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.strong,{children:"emhash8::HashMap / emhash7::HashMap"}),"\n\u6027\u80fd\u4ec5\u6b21\u4e8e ankerl \u7cfb\u5217\uff0c\u8868\u73b0\u975e\u5e38\u51fa\u8272\u3002"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.strong,{children:"folly::F14NodeMap / folly::F14ValueMap"}),"\n\u6027\u80fd\u4f18\u79c0\uff0c\u4f46\u4f9d\u8d56 Folly \u5e93\uff0c\u9002\u7528\u4e8e\u5df2\u6709 Folly \u96c6\u6210\u7684\u9879\u76ee\u3002"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.strong,{children:"absl::flat_hash_map"}),"\nGoogle Abseil \u5b9e\u73b0\uff0c\u5c5e\u4e8e\u9ad8\u6027\u80fd\u7b49\u7ea7\u3002\u64c5\u957f\u5904\u7406\u5927\u5bb9\u91cf\u54c8\u5e0c\u8868\u548c\u5b57\u7b26\u4e32\u67e5\u627e\uff0c\u4f46 Copy \u548c Iterate \u76f8\u5bf9\u8f83\u6162\u3002"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.strong,{children:"boost::unordered_map"}),"\n\u67e5\u627e\u6027\u80fd\u7ea6\u4e3a ",(0,l.jsx)(e.code,{children:"std::unordered_map"})," \u7684\u4e24\u500d\uff0c\u53ef\u76f4\u63a5\u66ff\u6362\u6807\u51c6\u5e93\u7248\u672c\u3002\u4f46\u5185\u5b58\u5360\u7528\u8f83\u9ad8\uff0c\u63d2\u5165\u6027\u80fd\u4e00\u822c\u3002"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.strong,{children:"std::unordered_map"}),"\n\u6027\u80fd\u6700\u4f4e\uff0c\u4ec5\u4f5c\u57fa\u51c6\u53c2\u8003\u3002"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(e.hr,{}),"\n",(0,l.jsx)(e.h2,{id:"ii-\u54c8\u5e0c\u51fd\u6570\u6bd4\u8f83",children:"II. \u54c8\u5e0c\u51fd\u6570\u6bd4\u8f83"}),"\n",(0,l.jsx)(e.p,{children:"\u6d4b\u8bd5\u6db5\u76d6\u6574\u6570\u7c7b\u578b\u548c\u5b57\u7b26\u4e32\u7c7b\u578b\uff0c\u6838\u5fc3\u7ed3\u8bba\u5982\u4e0b\uff1a"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.strong,{children:"\u6574\u6570\u7c7b\u578b"}),"\uff1a"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.code,{children:"std::hash"})," \u548c ",(0,l.jsx)(e.code,{children:"boost::hash"})," \u76f4\u63a5\u4f7f\u7528\u539f\u503c\u4f5c\u4e3a\u54c8\u5e0c\uff0c\u6027\u80fd\u53d7\u8f93\u5165\u9ad8\u5ea6\u5f71\u54cd\u2014\u2014",(0,l.jsx)(e.strong,{children:"\u4e0d\u63a8\u8350"}),"\u3002"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.code,{children:"ankerl::unordered_dense::hash"}),"\uff1a\u903b\u8f91\u7c7b\u4f3c ",(0,l.jsx)(e.code,{children:"absl::hash"}),"\uff08\u5747\u57fa\u4e8e wyhash\uff09\uff0c\u5bf9\u6574\u6570\u7c7b\u578b\u505a XOR \u5904\u7406\uff0c\u6027\u80fd\u6781\u4f73\u3002"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.code,{children:"robin_hood::hash"}),"\uff1a\u57fa\u4e8e MurmurHash3\uff0c\u6027\u80fd\u7a33\u5b9a\u3002"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.code,{children:"mumx"}),"\uff1a\u5bf9\u6574\u6570\u5904\u7406\u65b9\u5f0f\u4e0e ",(0,l.jsx)(e.code,{children:"ankerl::unordered_dense::hash"})," \u76f8\u540c\uff0c\u6027\u80fd\u7a33\u5b9a\u3002"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.strong,{children:"\u5b57\u7b26\u4e32\u7c7b\u578b"}),"\uff1a"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.code,{children:"std::hash"}),"\uff1a\u6027\u80fd\u826f\u597d\u2014\u2014",(0,l.jsx)(e.strong,{children:"\u63a8\u8350"}),"\u3002"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.code,{children:"boost::hash"}),"\uff1a\u6027\u80fd\u5dee\u2014\u2014",(0,l.jsx)(e.strong,{children:"\u4e0d\u63a8\u8350"}),"\u3002"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.code,{children:"ankerl::unordered_dense::hash"})," / ",(0,l.jsx)(e.code,{children:"absl::hash"}),"\uff1a\u57fa\u4e8e wyhash\uff0c\u6027\u80fd\u4f18\u5f02\u3002"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.code,{children:"robin_hood::hash"}),"\uff1a\u57fa\u4e8e MurmurHash2\uff0c\u6027\u80fd\u826f\u597d\u3002"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.code,{children:"mumx"}),"\uff1a\u5b57\u7b26\u4e32\u5904\u7406\u540c ",(0,l.jsx)(e.code,{children:"std::hash"}),"\uff0c\u517c\u5bb9\u6027\u5f3a\u3002"]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(e.blockquote,{children:["\n",(0,l.jsxs)(e.p,{children:["\u6570\u636e\u6765\u6e90\uff1a",(0,l.jsx)(e.a,{href:"https://martin.ankerl.com/2022/08/27/hashmap-bench-01/#ankerl__unordered_dense__map",children:"https://martin.ankerl.com/2022/08/27/hashmap-bench-01/#ankerl__unordered_dense__map"})]}),"\n"]}),"\n",(0,l.jsx)(e.hr,{}),"\n",(0,l.jsx)(e.h2,{id:"iii-\u9876\u7ea7\u5bb9\u5668\u6df1\u5165\u5206\u6790",children:"III. \u9876\u7ea7\u5bb9\u5668\u6df1\u5165\u5206\u6790"}),"\n",(0,l.jsx)(e.p,{children:"\u4ee5\u4e0b\u4e24\u4e2a\u5bb9\u5668\u5747\u4e3a header-only\uff0c\u53ef\u76f4\u63a5\u4f5c\u4e3a\u7b2c\u4e09\u65b9\u5934\u6587\u4ef6\u96c6\u6210\uff0c\u9002\u5e94\u6027\u5f3a\u3002"}),"\n",(0,l.jsx)(e.h3,{id:"1-ankerlunordered_densemap",children:"1. Ankerl::unordered_dense::map"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:"GitHub"}),": ",(0,l.jsx)(e.a,{href:"https://github.com/martinus/unordered_dense",children:"https://github.com/martinus/unordered_dense"})]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:"\u6838\u5fc3\u5b9e\u73b0"}),"\uff1a\u57fa\u4e8e Robin Hood probing\uff08\u7f57\u5bbe\u6c49\u63a2\u6d4b\u6cd5\uff09\u3002"]}),"\n"]}),"\n",(0,l.jsx)(e.h4,{id:"\u67b6\u6784\u8bbe\u8ba1",children:"\u67b6\u6784\u8bbe\u8ba1"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.strong,{children:"\u54c8\u5e0c\u51fd\u6570"}),"\uff1a",(0,l.jsx)(e.code,{children:"ankerl::unordered_dense::hash"}),"\uff0c\u5b57\u7b26\u4e32\u7c7b\u578b\u9ed8\u8ba4\u4f7f\u7528 wyhash\u3002"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.strong,{children:"\u6838\u5fc3\u7ed3\u6784"}),"\uff1a\u4e24\u7ec4\u5173\u952e\u6570\u7ec4\uff1a"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.strong,{children:"Vector Array"}),"\uff1a\u5b58\u50a8 ",(0,l.jsx)(e.code,{children:"{key, value}"})," \u952e\u503c\u5bf9\u3002"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.strong,{children:"Bucket Array"}),"\uff1a\u89e3\u51b3\u51b2\u7a81\uff0c\u7ed3\u6784\u5982\u4e0b\uff1a"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-cpp",children:"struct Bucket {\n    uint32_t dist_and_fingerprint; // \u9ad8 3 \u5b57\u8282\u5b58\u8ddd\u79bb\uff0c\u4f4e 1 \u5b57\u8282\u5b58\u6307\u7eb9\n    uint32_t value_idx; // \u5b58\u50a8 vector \u4e2d\u6570\u636e\u7d22\u5f15\n};\n"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:"\u4f18\u5316\u70b9"}),"\uff1aBucket \u6570\u7ec4\u90e8\u5206\u6392\u5e8f\uff08\u964d\u5e8f\uff09\uff0c\u5185\u5b58\u8fde\u7eed\uff0c\u63d0\u9ad8\u7f13\u5b58\u5c40\u90e8\u6027\u3002"]}),"\n"]}),"\n",(0,l.jsx)(e.h4,{id:"\u6838\u5fc3\u64cd\u4f5c",children:"\u6838\u5fc3\u64cd\u4f5c"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:"Insert"}),"\uff1a"]}),"\n"]}),"\n",(0,l.jsxs)(e.ol,{children:["\n",(0,l.jsx)(e.li,{children:"\u54c8\u5e0c key \u5e76\u8ba1\u7b97 bucket_index\u3002"}),"\n",(0,l.jsx)(e.li,{children:"\u82e5\u6876\u4e3a\u7a7a\uff0c\u76f4\u63a5\u63d2\u5165\u3002"}),"\n",(0,l.jsxs)(e.li,{children:["\u82e5\u53d1\u751f\u51b2\u7a81\uff0c\u6bd4\u5bf9 ",(0,l.jsx)(e.code,{children:"dist_and_fingerprint"}),"\uff0c\u5c06\u8ddd\u79bb\u5927\u7684\u5143\u7d20\u5148\u653e\u3002"]}),"\n",(0,l.jsxs)(e.li,{children:["\u4f9d\u6b21\u5411\u524d\u79fb\u52a8 bucket_index \u5e76\u66f4\u65b0 ",(0,l.jsx)(e.code,{children:"dist_and_fingerprint"}),"\u3002"]}),"\n",(0,l.jsxs)(e.li,{children:["\u5148\u5728 vector \u4e2d\u63d2\u5165\u6570\u636e\uff0c\u518d\u66f4\u65b0 Bucket \u4e2d ",(0,l.jsx)(e.code,{children:"value_idx"}),"\uff08\u76f8\u5bf9\u4f4d\u7f6e\uff09\u3002"]}),"\n"]}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:"Find"}),"\uff1a"]}),"\n"]}),"\n",(0,l.jsxs)(e.ol,{children:["\n",(0,l.jsx)(e.li,{children:"\u54c8\u5e0c key\uff0c\u8ba1\u7b97 bucket_index\u3002"}),"\n",(0,l.jsxs)(e.li,{children:["\u5bf9\u6bd4 ",(0,l.jsx)(e.code,{children:"dist_and_fingerprint"}),"\uff0c\u82e5\u5339\u914d\uff0c\u4ece vector \u53d6 key \u6bd4\u5bf9\u3002"]}),"\n",(0,l.jsxs)(e.li,{children:["\u82e5 key \u5339\u914d\uff0c\u8fd4\u56de value\uff1b\u5426\u5219\u5411\u524d\u641c\u7d22\u76f4\u5230 ",(0,l.jsx)(e.code,{children:"dist_and_fingerprint > bucket.dist_and_fingerprint"}),"\u3002"]}),"\n",(0,l.jsx)(e.li,{children:"\u4f18\u52bf\uff1a\u67e5\u627e\u4ec5\u9700\u6709\u9650\u987a\u5e8f\u626b\u63cf\uff0c\u5145\u5206\u5229\u7528\u7f13\u5b58\u5c40\u90e8\u6027\u3002"}),"\n"]}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:"Iterate"}),"\uff1a\u76f4\u63a5\u904d\u5386 vector\uff0c\u903b\u8f91\u7b80\u5355\u4e14\u6027\u80fd\u6781\u4f73\u3002"]}),"\n"]}),"\n",(0,l.jsx)(e.hr,{}),"\n",(0,l.jsx)(e.h3,{id:"2-emhash8hashmap",children:"2. emhash8::HashMap"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:"GitHub"}),": ",(0,l.jsx)(e.a,{href:"https://github.com/ktprime/emhash",children:"https://github.com/ktprime/emhash"})]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:"\u6838\u5fc3\u5b9a\u4f4d"}),"\uff1a\u7ebf\u6027\u63a2\u6d4b\u7684\u4ee3\u8868\u4f5c\u3002"]}),"\n"]}),"\n",(0,l.jsx)(e.h4,{id:"\u67b6\u6784\u8bbe\u8ba1-1",children:"\u67b6\u6784\u8bbe\u8ba1"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:"\u54c8\u5e0c\u51fd\u6570"}),"\uff1a\u6574\u6570\u7c7b\u578b\u4f7f\u7528 murmurhash3mixer\uff0c\u5b57\u7b26\u4e32\u7c7b\u578b\u4f7f\u7528 wyhash\u3002"]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:"\u4f18\u5316\u70b9"}),"\uff1a\u901a\u8fc7 \u201c3-way combined probing\u201d \u89e3\u51b3 primary/secondary clustering\uff0c\u9ad8\u8d1f\u8f7d\uff08>0.9\uff09\u4ecd\u4fdd\u6301\u9ad8\u6027\u80fd\u3002"]}),"\n"]}),"\n",(0,l.jsx)(e.h4,{id:"\u6838\u5fc3\u6570\u636e\u7ed3\u6784",children:"\u6838\u5fc3\u6570\u636e\u7ed3\u6784"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-cpp",children:"struct Index\n{\n    size_type bucket; // \u5b58\u50a8\u51b2\u7a81\u4f4d\u7f6e\n    size_type slot;   // \u5b9e\u9645\u6570\u636e\u4f4d\u7f6e\n};\ntypedef std::pair<KeyT, ValueT> value_type; // \u952e\u503c\u5bf9\u5b58\u50a8\n"})}),"\n",(0,l.jsx)(e.h4,{id:"3-way-\u590d\u5408\u63a2\u6d4b",children:"3-way \u590d\u5408\u63a2\u6d4b"}),"\n",(0,l.jsxs)(e.ol,{children:["\n",(0,l.jsx)(e.li,{children:"2-3 \u4e2a CPU \u7f13\u5b58\u884c\u5185\uff1a\u7ebf\u6027\u63a2\u6d4b\u3002"}),"\n",(0,l.jsx)(e.li,{children:"\u8d85\u51fa\u7f13\u5b58\u884c\uff1a\u6709\u9650\u4e8c\u6b21\u63a2\u6d4b\u3002"}),"\n",(0,l.jsxs)(e.li,{children:["\u8bb0\u5f55\u6700\u540e\u7a7a\u4f4d\u7f6e ",(0,l.jsx)(e.code,{children:"_last"}),"\uff0c\u901a\u8fc7\u516c\u5f0f ",(0,l.jsx)(e.code,{children:"(_mask / 2 + _last++) & _mask"})," \u8ba1\u7b97\u7a7a\u69fd\u3002"]}),"\n"]}),"\n",(0,l.jsx)(e.h4,{id:"\u667a\u80fd\u51b2\u7a81\u89e3\u51b3",children:"\u667a\u80fd\u51b2\u7a81\u89e3\u51b3"}),"\n",(0,l.jsxs)(e.p,{children:["\u901a\u8fc7 Index \u4e2d ",(0,l.jsx)(e.code,{children:"bucket"})," \u5b57\u6bb5\u94fe\u63a5\u51b2\u7a81\u8282\u70b9\uff0c\u907f\u514d\u805a\u7c07\u5bfc\u81f4\u7684\u6027\u80fd\u4e0b\u964d\u3002"]})]})}function o(n={}){const{wrapper:e}={...(0,i.R)(),...n.components};return e?(0,l.jsx)(e,{...n,children:(0,l.jsx)(t,{...n})}):t(n)}},8453:(n,e,s)=>{s.d(e,{R:()=>d,x:()=>h});var r=s(6540);const l={},i=r.createContext(l);function d(n){const e=r.useContext(i);return r.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function h(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(l):n.components||l:d(n.components),r.createElement(i.Provider,{value:e},n.children)}}}]);