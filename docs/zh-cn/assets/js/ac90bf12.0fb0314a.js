"use strict";(globalThis.webpackChunkwebsite=globalThis.webpackChunkwebsite||[]).push([[9757],{2652:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>o,default:()=>h,frontMatter:()=>r,metadata:()=>t,toc:()=>l});const t=JSON.parse('{"id":"integration/overview","title":"overview","description":"this section list the repos integrations, all the ports are supported by kmpkg.","source":"@site/docs/integration/overview.md","sourceDirName":"integration","slug":"/integration/overview","permalink":"/zh-cn/docs/integration/overview","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/integration/overview.md","tags":[],"version":"current","frontMatter":{},"sidebar":"integrationSidebar","next":{"title":"a-","permalink":"/zh-cn/docs/category/a-"}}');var s=i(4848),a=i(8453);const r={},o="overview",c={},l=[{value:"init a cmake build system",id:"init-a-cmake-build-system",level:2},{value:"important files examples",id:"important-files-examples",level:2},{value:"dependency",id:"dependency",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",...(0,a.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"overview",children:"overview"})}),"\n",(0,s.jsxs)(n.p,{children:["this section list the repos integrations, all the ",(0,s.jsx)(n.code,{children:"ports"})," are supported by ",(0,s.jsx)(n.a,{href:"https://github.com/kumose/kmpkgcore",children:(0,s.jsx)(n.code,{children:"kmpkg"})}),"."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",metastring:'title="install kmpkgcore"',children:"git clone https://github.com/kumose/kmpkgcore.git\n./bootstrap-kmpkg.sh\necho KMPKG_HOME=/you/path\n"})}),"\n",(0,s.jsxs)(n.p,{children:["all the ports operation should be on this repos. the kmdo tools reference ",(0,s.jsx)(n.a,{href:"https://pub.kumose.cc/kmdo",children:"kmdo docs"}),"."]}),"\n",(0,s.jsx)(n.h2,{id:"init-a-cmake-build-system",children:"init a cmake build system"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"first init cmake building"}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",metastring:'title="1. init cmake"',children:"kmdo kmpkg gencmake -o . -n hello\n  \u2022 Checking CMake          Checking(seq/total)=1/3\n  \u2022 Prepare Kmcmake         Prepare(seq/total)=2/3\n      \u2022 Kmcmake Ready\n  \u2022 Generating CMake        Generating(seq/total)=3/3\n  \u2022 kmcmake installed success                        path=. project=hello\n  \u2022 thanks for using kmdo!\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",metastring:'title="2. init kmpkg"',children:"kmpkg new --application\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",metastring:'title="3. add port"',children:"kmpkg add port fmt\nSucceeded in adding ports to kmpkg.json file.\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",metastring:'title="4. configure cmake"',children:"cmake --preset=default\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",metastring:'title="5. cmake build"',children:"cmake --build build\n"})}),"\n",(0,s.jsx)(n.h2,{id:"important-files-examples",children:"important files examples"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",metastring:'title="CMakePresets.json"',children:'{\n  "version": 2,\n  "configurePresets": [\n    {\n      "name": "default",\n      "generator": "Unix Makefiles",\n      "binaryDir": "${sourceDir}/build",\n      "cacheVariables": {\n        "CMAKE_TOOLCHAIN_FILE": "$env{KMPKG_CMAKE}"\n      }\n    }\n  ]\n}\n'})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",metastring:'title="kmpkg-configuration.json"',children:'{\n  "default-registry": {\n    "kind": "git",\n    "baseline": "32b93125c33fa5c967417aa6797b2fbf6d883c22",\n    "repository": "https://github.com/kumose/kmpkgcore.git"\n  },\n  "registries": [\n    {\n      "kind": "artifact",\n      "location": "https://github.com/kumose/kmpkg-ce-catalog/archive/refs/heads/main.zip",\n      "name": "microsoft"\n    }\n  ]\n}\n'})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",metastring:'title="kmpkg.json"',children:'{\n  "dependencies": [\n    "fmt"\n  ]\n}\n'})}),"\n",(0,s.jsx)(n.h2,{id:"dependency",children:"dependency"}),"\n",(0,s.jsxs)(n.p,{children:["in kmcmake system, we alway collect denpendencies in the file ",(0,s.jsx)(n.code,{children:"cmake/xxx_deps.cmake"}),",\nin the ",(0,s.jsx)(n.code,{children:"hello"})," examples, it is ",(0,s.jsx)(n.code,{children:"cmake/hello_deps.cmake"})]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-cmake",metastring:'title="cmake/hello_deps.cmake"',children:'# Copyright (C) Kumo inc. and its affiliates.\n# Author: Jeff.li lijippy@163.com\n# All rights reserved.\n# This program is free software: you can redistribute it and/or modify\n# it under the terms of the GNU Affero General Public License as published\n# by the Free Software Foundation, either version 3 of the License, or\n# (at your option) any later version.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU Affero General Public License for more details.\n#\n# You should have received a copy of the GNU Affero General Public License\n# along with this program.  If not, see <https://www.gnu.org/licenses/>.\n#\n############################################################\n# system pthread and rt, dl\n############################################################\nset(KMCMAKE_SYSTEM_DYLINK)\nif (APPLE)\n    find_library(CoreFoundation CoreFoundation)\n    list(APPEND KMCMAKE_SYSTEM_DYLINK ${CoreFoundation} pthread)\nelseif (${CMAKE_SYSTEM_NAME} STREQUAL "Linux")\n    list(APPEND KMCMAKE_SYSTEM_DYLINK rt dl pthread)\nendif ()\n\nif (KMCMAKE_BUILD_TEST)\n    enable_testing()\n    #include(require_gtest)\n    #include(require_gmock)\n    #include(require_doctest)\nendif (KMCMAKE_BUILD_TEST)\n\nif (KMCMAKE_BUILD_BENCHMARK)\n    #include(require_benchmark)\nendif ()\n\nfind_package(Threads REQUIRED)\n\n############################################################\n#\n# add you libs to the KMCMAKE_DEPS_LINK variable eg as turbo\n# so you can and system pthread and rt, dl already add to\n# KMCMAKE_SYSTEM_DYLINK, using it for fun.\n##########################################################\nset(KMCMAKE_DEPS_LINK\n        #${TURBO_LIB}\n        ${KMCMAKE_SYSTEM_DYLINK}\n        )\nlist(REMOVE_DUPLICATES KMCMAKE_DEPS_LINK)\nkmcmake_print_list_label("Denpendcies:" KMCMAKE_DEPS_LINK)\n\n############################################################\n# for binary\n############################################################\nset(KMCMAKE_STATIC_BIN_OPTION -static-libgcc -static-libstdc++)\n\n'})}),"\n",(0,s.jsxs)(n.p,{children:["we alway process ",(0,s.jsx)(n.code,{children:"find"})," around the ",(0,s.jsx)(n.code,{children:"find_package(Threads REQUIRED)"}),","]}),"\n",(0,s.jsx)(n.p,{children:"and add the target or lib around"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-cmake",children:"set(KMCMAKE_DEPS_LINK\n        fmt::fmt\n        ${KMCMAKE_SYSTEM_DYLINK}\n        )\n"})}),"\n",(0,s.jsxs)(n.p,{children:["using ",(0,s.jsx)(n.code,{children:"${KMCMAKE_DEPS_LINK}"})," in the kmcmake's system any where, it\nwill link all the denpend libraries."]}),"\n",(0,s.jsx)(n.p,{children:"like this:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-cmake",metastring:'title="create a library"',children:"kmcmake_cc_library(\n        NAMESPACE ${PROJECT_NAME}\n        NAME foo\n        SOURCES\n        foo.cc\n        CXXOPTS\n        ${KMCMAKE_CXX_OPTIONS}\n        PLINKS\n        # private the libs\n        ${KMCMAKE_DEPS_LINK}\n        PUBLIC\n)\n"})})]})}function h(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>r,x:()=>o});var t=i(6540);const s={},a=t.createContext(s);function r(e){const n=t.useContext(a);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),t.createElement(a.Provider,{value:n},e.children)}}}]);