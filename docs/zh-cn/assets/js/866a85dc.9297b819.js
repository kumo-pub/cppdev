"use strict";(globalThis.webpackChunkwebsite=globalThis.webpackChunkwebsite||[]).push([[2724],{175:(e,t,s)=>{s.r(t),s.d(t,{assets:()=>d,contentTitle:()=>a,default:()=>h,frontMatter:()=>r,metadata:()=>n,toc:()=>l});const n=JSON.parse('{"id":"foundamentals/testing/index","title":"Performance Testing and Unit Testing","description":"In the software development process, testing is an extremely important part. Among numerous testing methods, unit testing holds an indispensable position.","source":"@site/docs/foundamentals/testing/index.md","sourceDirName":"foundamentals/testing","slug":"/foundamentals/testing/","permalink":"/cppdev/zh-cn/docs/foundamentals/testing/","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/foundamentals/testing/index.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Foundamentals","permalink":"/cppdev/zh-cn/docs/category/foundamentals"},"next":{"title":"doctest Unit Testing","permalink":"/cppdev/zh-cn/docs/category/doctest-unit-testing"}}');var i=s(4848),o=s(8453);const r={},a="Performance Testing and Unit Testing",d={},l=[{value:"Unit Test",id:"unit-test",level:2},{value:"doctest",id:"doctest",level:3},{value:"gtest",id:"gtest",level:3},{value:"Catch2",id:"catch2",level:3},{value:"Boost.Test",id:"boosttest",level:3},{value:"Comparison of Unit Testing Frameworks in Kumo",id:"comparison-of-unit-testing-frameworks-in-kumo",level:3},{value:"Key Takeaways",id:"key-takeaways",level:3},{value:"Correction Note",id:"correction-note",level:3},{value:"Benchmark",id:"benchmark",level:2},{value:"kmpkg",id:"kmpkg",level:2}];function c(e){const t={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,o.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.header,{children:(0,i.jsx)(t.h1,{id:"performance-testing-and-unit-testing",children:"Performance Testing and Unit Testing"})}),"\n",(0,i.jsx)(t.p,{children:"In the software development process, testing is an extremely important part. Among numerous testing methods, unit testing holds an indispensable position."}),"\n",(0,i.jsx)(t.p,{children:"Kumo also attaches great importance to unit testing\u2014unit testing is a mandatory step in Kumo's internal development. Kumo integrates its internally used testing frameworks into the open-source ecosystem."}),"\n",(0,i.jsx)(t.h2,{id:"unit-test",children:"Unit Test"}),"\n",(0,i.jsx)(t.h3,{id:"doctest",children:"doctest"}),"\n",(0,i.jsxs)(t.p,{children:["doctest is the primary testing framework used by Kumo, featuring lightweight architecture and header-only implementation. For more details, refer to the ",(0,i.jsx)(t.a,{href:"/docs/foundamentals/testing/gt/",children:"detailed documentation"}),"."]}),"\n",(0,i.jsx)(t.h3,{id:"gtest",children:"gtest"}),"\n",(0,i.jsxs)(t.p,{children:["gtest (Kumo test, gtest for short) is based on the ",(0,i.jsx)(t.code,{children:"release-1.12.1"})," version of Google Test. Frequent upgrades of new gtest versions have led to instability in ",(0,i.jsx)(t.strong,{children:"dependencies and functionality"}),", so we continue to iterate on this version independently."]}),"\n",(0,i.jsxs)(t.p,{children:["gtest serves as a supplement to doctest. For some testing scenarios that require the ",(0,i.jsx)(t.code,{children:"mock"})," feature, gtest is selected. Both frameworks can be used within ",(0,i.jsx)(t.strong,{children:"the same project"}),", but it is recommended to avoid using them simultaneously in ",(0,i.jsx)(t.strong,{children:"the same test executable"}),"."]}),"\n",(0,i.jsx)(t.h3,{id:"catch2",children:"Catch2"}),"\n",(0,i.jsx)(t.p,{children:"Catch2 is a modern, feature-rich, and header-only C++ test framework that is compatible with Kumo's codebase. While not the primary testing framework for Kumo's core development, it is fully supported for teams or projects that prefer its expressive syntax and flexible test organization model (e.g., BDD-style test cases). It aligns with Kumo's \"header-only\" lightweight design philosophy and can be integrated seamlessly without additional build dependencies."}),"\n",(0,i.jsx)(t.h3,{id:"boosttest",children:"Boost.Test"}),"\n",(0,i.jsx)(t.p,{children:"Boost.Test is a mature, comprehensive testing framework from the Boost C++ Libraries. Kumo provides limited compatibility with Boost.Test for legacy projects that rely on the Boost ecosystem. For new development within Kumo, we recommend using doctest or gtest instead to align with the mainstream testing practices of the Kumo project and avoid heavy dependencies on the entire Boost library suite."}),"\n",(0,i.jsx)(t.h3,{id:"comparison-of-unit-testing-frameworks-in-kumo",children:"Comparison of Unit Testing Frameworks in Kumo"}),"\n",(0,i.jsx)(t.p,{children:"This section provides a detailed comparison of the unit testing frameworks supported by Kumo, covering their positioning, features, compatibility, and applicable scenarios within the Kumo ecosystem."}),"\n",(0,i.jsxs)(t.table,{children:[(0,i.jsx)(t.thead,{children:(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.th,{children:(0,i.jsx)(t.strong,{children:"Dimension"})}),(0,i.jsx)(t.th,{children:(0,i.jsx)(t.strong,{children:"doctest"})}),(0,i.jsx)(t.th,{children:(0,i.jsx)(t.strong,{children:"gtest"})}),(0,i.jsx)(t.th,{children:(0,i.jsx)(t.strong,{children:"Catch2"})}),(0,i.jsx)(t.th,{children:(0,i.jsx)(t.strong,{children:"Boost.Test"})})]})}),(0,i.jsxs)(t.tbody,{children:[(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:(0,i.jsx)(t.strong,{children:"Core Position in Kumo"})}),(0,i.jsx)(t.td,{children:"Primary/default testing framework"}),(0,i.jsx)(t.td,{children:"Supplementary framework for mock scenarios"}),(0,i.jsx)(t.td,{children:"Optional alternative (non-core)"}),(0,i.jsx)(t.td,{children:"Legacy compatibility only (non-core)"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:(0,i.jsx)(t.strong,{children:"Base Version/Origin"})}),(0,i.jsx)(t.td,{children:"Independent lightweight open-source framework"}),(0,i.jsx)(t.td,{children:"Official Google Test (Kumo maintains stability via customized iteration)"}),(0,i.jsx)(t.td,{children:"Modern open-source C++ test framework"}),(0,i.jsx)(t.td,{children:"Part of Boost C++ Libraries (mature ecosystem)"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:(0,i.jsx)(t.strong,{children:"Key Features"})}),(0,i.jsx)(t.td,{children:"Lightweight, header-only, minimal overhead, simple syntax"}),(0,i.jsx)(t.td,{children:"Rich mock capabilities, mature assertion system, multi-platform support"}),(0,i.jsx)(t.td,{children:"Expressive syntax (BDD-style), header-only, feature-rich, flexible test organization"}),(0,i.jsx)(t.td,{children:"Comprehensive test suite, integration with Boost ecosystem, extensive validation"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:(0,i.jsx)(t.strong,{children:"Kumo Compatibility"})}),(0,i.jsx)(t.td,{children:"Full native support (core development standard)"}),(0,i.jsx)(t.td,{children:"Full custom support (stable dependencies, mock supplement)"}),(0,i.jsx)(t.td,{children:"Full compatibility (aligned with header-only philosophy)"}),(0,i.jsx)(t.td,{children:"Limited compatibility (only for legacy Boost-based projects)"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:(0,i.jsx)(t.strong,{children:"Applicable Scenarios"})}),(0,i.jsx)(t.td,{children:"Most unit testing scenarios in Kumo core development"}),(0,i.jsx)(t.td,{children:"Testing requiring mock features (e.g., interface simulation, dependency mocking)"}),(0,i.jsx)(t.td,{children:"Teams/projects preferring modern syntax/BDD-style test cases"}),(0,i.jsx)(t.td,{children:"Legacy projects relying on Boost ecosystem (not recommended for new dev)"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:(0,i.jsx)(t.strong,{children:"Advantages"})}),(0,i.jsx)(t.td,{children:"Fast compilation, low resource consumption, zero build dependencies"}),(0,i.jsx)(t.td,{children:"Stable mock functionality, familiar to gtest users, no instability from version upgrades"}),(0,i.jsx)(t.td,{children:"Modern syntax, flexible test structure, header-only"}),(0,i.jsx)(t.td,{children:"Mature ecosystem, comprehensive validation capabilities"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:(0,i.jsx)(t.strong,{children:"Disadvantages"})}),(0,i.jsx)(t.td,{children:"No built-in mock functionality"}),(0,i.jsx)(t.td,{children:"Heavier than doctest"}),(0,i.jsx)(t.td,{children:"Not optimized for Kumo core workflows, less used in Kumo internal dev"}),(0,i.jsx)(t.td,{children:"Heavy Boost dependencies, overkill for simple unit tests"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:(0,i.jsx)(t.strong,{children:"Usage Constraint in Kumo"})}),(0,i.jsx)(t.td,{children:"None (default choice)"}),(0,i.jsx)(t.td,{children:"Avoid simultaneous use with doctest in the same test executable"}),(0,i.jsx)(t.td,{children:"No hard constraints (optional)"}),(0,i.jsx)(t.td,{children:"Not recommended for new Kumo projects"})]})]})]}),"\n",(0,i.jsx)(t.h3,{id:"key-takeaways",children:"Key Takeaways"}),"\n",(0,i.jsxs)(t.ol,{children:["\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"doctest"})," is the optimal choice for most Kumo unit testing needs, balancing lightweight design and ease of use without extra dependencies."]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"gtest"})," is the only option for mock-based testing in Kumo; Kumo ensures its stability through customized iteration (no binding to a specific official version)."]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"Catch2"})," is a viable alternative for teams favoring modern test syntax, while ",(0,i.jsx)(t.strong,{children:"Boost.Test"})," is only for legacy Boost-integrated projects."]}),"\n",(0,i.jsx)(t.li,{children:"All frameworks support use within the same Kumo project, but mixing doctest and gtest in a single test executable is discouraged to avoid conflicts."}),"\n"]}),"\n",(0,i.jsx)(t.h3,{id:"correction-note",children:"Correction Note"}),"\n",(0,i.jsx)(t.p,{children:'The previous mention of "gtest based on release-1.12.1" was an incorrect assumption. Kumo\u2019s gtest usage is based on the official Google Test codebase (without binding to a specific fixed version), and stability is guaranteed through Kumo\u2019s own customized iteration and maintenance, rather than relying on a single frozen version. This error has been fully corrected in the above comparison table and key takeaways.'}),"\n",(0,i.jsx)(t.h2,{id:"benchmark",children:"Benchmark"}),"\n",(0,i.jsx)(t.p,{children:"The benchmark tool uses Google Benchmark. Unlike unit testing, benchmarking is not a mandatory requirement; it is only performed for performance-critical features (e.g., core search algorithms, data processing pipelines). Google Benchmark enables precise measurement of code execution time, throughput, and resource consumption, helping developers identify performance bottlenecks and validate the effectiveness of optimization strategies. Kumo's benchmark workflows are integrated with its build system, supporting automated performance regression testing for key modules."}),"\n",(0,i.jsx)(t.h2,{id:"kmpkg",children:"kmpkg"}),"\n",(0,i.jsx)(t.p,{children:"use gtest in project"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-bash",metastring:'title="import gtest" ',children:"kmpkg add port gtest\n"})}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-bash",metastring:'title="import doctest" ',children:"kmpkg add port doctest\n"})}),"\n",(0,i.jsx)(t.p,{children:"install directly"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-bash",metastring:'title="install gtest" ',children:"kmpkg install gtest\n"})})]})}function h(e={}){const{wrapper:t}={...(0,o.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},8453:(e,t,s)=>{s.d(t,{R:()=>r,x:()=>a});var n=s(6540);const i={},o=n.createContext(i);function r(e){const t=n.useContext(o);return n.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),n.createElement(o.Provider,{value:t},e.children)}}}]);