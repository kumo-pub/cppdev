<!doctype html>
<html lang="zh-cn" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-testing/gt/reference/assertions" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.2">
<title data-rh="true">Assertions Reference | Kumo Foundamental</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://your-docusaurus-site.example.com/cppdev/zh-cn/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://your-docusaurus-site.example.com/cppdev/zh-cn/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://your-docusaurus-site.example.com/cppdev/zh-cn/docs/testing/gt/reference/assertions"><meta data-rh="true" property="og:locale" content="zh_cn"><meta data-rh="true" property="og:locale:alternate" content="en_GB"><meta data-rh="true" name="docusaurus_locale" content="zh-cn"><meta data-rh="true" name="docsearch:language" content="zh-cn"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Assertions Reference | Kumo Foundamental"><meta data-rh="true" name="description" content="This page lists the assertion macros provided by GoogleTest for verifying code"><meta data-rh="true" property="og:description" content="This page lists the assertion macros provided by GoogleTest for verifying code"><link data-rh="true" rel="icon" href="/cppdev/zh-cn/img/favicon.svg"><link data-rh="true" rel="canonical" href="https://your-docusaurus-site.example.com/cppdev/zh-cn/docs/testing/gt/reference/assertions"><link data-rh="true" rel="alternate" href="https://your-docusaurus-site.example.com/cppdev/docs/testing/gt/reference/assertions" hreflang="en-GB"><link data-rh="true" rel="alternate" href="https://your-docusaurus-site.example.com/cppdev/zh-cn/docs/testing/gt/reference/assertions" hreflang="zh-cn"><link data-rh="true" rel="alternate" href="https://your-docusaurus-site.example.com/cppdev/docs/testing/gt/reference/assertions" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Foundamentals","item":"https://your-docusaurus-site.example.com/cppdev/zh-cn/docs/category/foundamentals"},{"@type":"ListItem","position":2,"name":"Performance Testing and Unit Testing","item":"https://your-docusaurus-site.example.com/cppdev/zh-cn/docs/testing/"},{"@type":"ListItem","position":3,"name":"Google Test","item":"https://your-docusaurus-site.example.com/cppdev/zh-cn/docs/category/google-test"},{"@type":"ListItem","position":4,"name":"Assertions Reference","item":"https://your-docusaurus-site.example.com/cppdev/zh-cn/docs/testing/gt/reference/assertions"}]}</script><link rel="alternate" type="application/rss+xml" href="/cppdev/zh-cn/blog/rss.xml" title="Kumo Foundamental RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/cppdev/zh-cn/blog/atom.xml" title="Kumo Foundamental Atom Feed"><link rel="stylesheet" href="/cppdev/zh-cn/assets/css/styles.a7490ef4.css">
<script src="/cppdev/zh-cn/assets/js/runtime~main.5442a8df.js" defer="defer"></script>
<script src="/cppdev/zh-cn/assets/js/main.de344197.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")),document.documentElement.setAttribute("data-theme-choice",t||"system")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/cppdev/zh-cn/img/kumo-logo.svg"><div role="region" aria-label="跳到主要内容"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">跳到主要内容</a></div><nav aria-label="主导航" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="切换导航栏" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/cppdev/zh-cn/"><div class="navbar__logo"><img src="/cppdev/zh-cn/img/kumo-logo.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/cppdev/zh-cn/img/kumo-logo.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">My Site</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/cppdev/zh-cn/docs/intro">教程</a><a class="navbar__item navbar__link" href="/cppdev/zh-cn/docs/integration/overview">Integration</a><a class="navbar__item navbar__link" href="/cppdev/zh-cn/blog">Blog</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_nlXk"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>中文（中国）</a><ul class="dropdown__menu"><li><a href="/cppdev/docs/testing/gt/reference/assertions" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="en-GB">English</a></li><li><a href="/cppdev/zh-cn/docs/testing/gt/reference/assertions" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="zh-cn">中文（中国）</a></li></ul></div><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="切换浅色/暗黑模式（当前为system mode）"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="回到顶部" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="文档侧边栏" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/cppdev/zh-cn/docs/intro"><span title="介绍" class="linkLabel_WmDU">介绍</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--active" href="/cppdev/zh-cn/docs/category/foundamentals"><span title="Foundamentals" class="categoryLinkLabel_W154">Foundamentals</span></a><button aria-label="折叠侧边栏分类 &#x27;Foundamentals&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--active" tabindex="0" href="/cppdev/zh-cn/docs/testing/"><span title="Performance Testing and Unit Testing" class="categoryLinkLabel_W154">Performance Testing and Unit Testing</span></a><button aria-label="折叠侧边栏分类 &#x27;Performance Testing and Unit Testing&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" tabindex="0" href="/cppdev/zh-cn/docs/category/doctest-unit-testing"><span title="doctest Unit Testing" class="categoryLinkLabel_W154">doctest Unit Testing</span></a><button aria-label="展开侧边栏分类 &#x27;doctest Unit Testing&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--active" tabindex="0" href="/cppdev/zh-cn/docs/category/google-test"><span title="Google Test" class="categoryLinkLabel_W154">Google Test</span></a><button aria-label="折叠侧边栏分类 &#x27;Google Test&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/cppdev/zh-cn/docs/testing/gt/platforms"><span title="Supported Platforms" class="linkLabel_WmDU">Supported Platforms</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/cppdev/zh-cn/docs/testing/gt/quickstart-bazel"><span title="Quickstart: Building with Bazel" class="linkLabel_WmDU">Quickstart: Building with Bazel</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/cppdev/zh-cn/docs/testing/gt/quickstart-cmake"><span title="Quickstart: Building with CMake" class="linkLabel_WmDU">Quickstart: Building with CMake</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/cppdev/zh-cn/docs/testing/gt/primer"><span title="GoogleTest Primer" class="linkLabel_WmDU">GoogleTest Primer</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/cppdev/zh-cn/docs/testing/gt/advanced"><span title="Advanced GoogleTest Topics" class="linkLabel_WmDU">Advanced GoogleTest Topics</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/cppdev/zh-cn/docs/testing/gt/gmock_for_dummies"><span title="gMock for Dummies" class="linkLabel_WmDU">gMock for Dummies</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/cppdev/zh-cn/docs/testing/gt/gmock_cook_book"><span title="gMock Cookbook" class="linkLabel_WmDU">gMock Cookbook</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/cppdev/zh-cn/docs/testing/gt/gmock_cheat_sheet"><span title="gMock Cheat Sheet" class="linkLabel_WmDU">gMock Cheat Sheet</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/cppdev/zh-cn/docs/testing/gt/reference/testing"><span title="Testing Reference" class="linkLabel_WmDU">Testing Reference</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/cppdev/zh-cn/docs/testing/gt/reference/mocking"><span title="Mocking Reference" class="linkLabel_WmDU">Mocking Reference</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/cppdev/zh-cn/docs/testing/gt/reference/assertions"><span title="Assertions Reference" class="linkLabel_WmDU">Assertions Reference</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/cppdev/zh-cn/docs/testing/gt/reference/matchers"><span title="Matchers Reference" class="linkLabel_WmDU">Matchers Reference</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/cppdev/zh-cn/docs/testing/gt/reference/actions"><span title="Actions Reference" class="linkLabel_WmDU">Actions Reference</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/cppdev/zh-cn/docs/testing/gt/faq"><span title="GoogleTest FAQ" class="linkLabel_WmDU">GoogleTest FAQ</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/cppdev/zh-cn/docs/testing/gt/gmock_faq"><span title="Legacy gMock FAQ" class="linkLabel_WmDU">Legacy gMock FAQ</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/cppdev/zh-cn/docs/testing/gt/samples"><span title="Googletest Samples" class="linkLabel_WmDU">Googletest Samples</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/cppdev/zh-cn/docs/testing/gt/pkgconfig"><span title="pkgconfig" class="linkLabel_WmDU">pkgconfig</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/cppdev/zh-cn/docs/testing/gt/community_created_documentation"><span title="Community-Created Documentation" class="linkLabel_WmDU">Community-Created Documentation</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" tabindex="0" href="/cppdev/zh-cn/docs/testing/benchmark/"><span title="benchmark" class="categoryLinkLabel_W154">benchmark</span></a><button aria-label="展开侧边栏分类 &#x27;benchmark&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" tabindex="0" href="/cppdev/zh-cn/docs/log/"><span title="Log Section" class="categoryLinkLabel_W154">Log Section</span></a><button aria-label="展开侧边栏分类 &#x27;Log Section&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cppdev/zh-cn/docs/time/"><span title="Time and Calendar" class="linkLabel_WmDU">Time and Calendar</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" tabindex="0" href="/cppdev/zh-cn/docs/category/standardized-errors-and-error-return-values"><span title="Standardized Errors and Error Return Values" class="categoryLinkLabel_W154">Standardized Errors and Error Return Values</span></a><button aria-label="展开侧边栏分类 &#x27;Standardized Errors and Error Return Values&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" tabindex="0" href="/cppdev/zh-cn/docs/strings/"><span title="strings operations" class="categoryLinkLabel_W154">strings operations</span></a><button aria-label="展开侧边栏分类 &#x27;strings operations&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cppdev/zh-cn/docs/flags/"><span title="Turbo Command-Line Flags (Turbo Flags)" class="linkLabel_WmDU">Turbo Command-Line Flags (Turbo Flags)</span></a></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="页面路径"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="主页面" class="breadcrumbs__link" href="/cppdev/zh-cn/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/cppdev/zh-cn/docs/category/foundamentals"><span>Foundamentals</span></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/cppdev/zh-cn/docs/testing/"><span>Performance Testing and Unit Testing</span></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/cppdev/zh-cn/docs/category/google-test"><span>Google Test</span></a></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Assertions Reference</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">本页总览</button></div><div class="theme-doc-markdown markdown"><header><h1>Assertions Reference</h1></header>
<p>This page lists the assertion macros provided by GoogleTest for verifying code
behavior. To use them, add <code>#include &lt;gtest/gtest.h&gt;</code>.</p>
<p>The majority of the macros listed below come as a pair with an <code>EXPECT_</code> variant
and an <code>ASSERT_</code> variant. Upon failure, <code>EXPECT_</code> macros generate nonfatal
failures and allow the current function to continue running, while <code>ASSERT_</code>
macros generate fatal failures and abort the current function.</p>
<p>All assertion macros support streaming a custom failure message into them with
the <code>&lt;&lt;</code> operator, for example:</p>
<div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">EXPECT_TRUE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">my_condition</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;&lt;</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;My condition is not true&quot;</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p>Anything that can be streamed to an <code>ostream</code> can be streamed to an assertion
macro—in particular, C strings and string objects. If a wide string (<code>wchar_t*</code>,
<code>TCHAR*</code> in <code>UNICODE</code> mode on Windows, or <code>std::wstring</code>) is streamed to an
assertion, it will be translated to UTF-8 when printed.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="success-failure">Explicit Success and Failure<a href="#success-failure" class="hash-link" aria-label="Explicit Success and Failure的直接链接" title="Explicit Success and Failure的直接链接" translate="no">​</a></h2>
<p>The assertions in this section generate a success or failure directly instead of
testing a value or expression. These are useful when control flow, rather than a
Boolean expression, determines the test&#x27;s success or failure, as shown by the
following example:</p>
<div class="language-c++ codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c++ codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">switch(expression) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  case 1:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ... some checks ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  case 2:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ... some other checks ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  default:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    FAIL() &lt;&lt; &quot;We shouldn&#x27;t get here.&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="SUCCEED">SUCCEED<a href="#SUCCEED" class="hash-link" aria-label="SUCCEED的直接链接" title="SUCCEED的直接链接" translate="no">​</a></h3>
<p><code>SUCCEED()</code></p>
<p>Generates a success. This <em>does not</em> make the overall test succeed. A test is
considered successful only if none of its assertions fail during its execution.</p>
<p>The <code>SUCCEED</code> assertion is purely documentary and currently doesn&#x27;t generate any
user-visible output. However, we may add <code>SUCCEED</code> messages to GoogleTest output
in the future.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="FAIL">FAIL<a href="#FAIL" class="hash-link" aria-label="FAIL的直接链接" title="FAIL的直接链接" translate="no">​</a></h3>
<p><code>FAIL()</code></p>
<p>Generates a fatal failure, which returns from the current function.</p>
<p>Can only be used in functions that return <code>void</code>. See
<a class="" href="/cppdev/zh-cn/docs/testing/gt/advanced#assertion-placement">Assertion Placement</a> for more information.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="ADD_FAILURE">ADD_FAILURE<a href="#ADD_FAILURE" class="hash-link" aria-label="ADD_FAILURE的直接链接" title="ADD_FAILURE的直接链接" translate="no">​</a></h3>
<p><code>ADD_FAILURE()</code></p>
<p>Generates a nonfatal failure, which allows the current function to continue
running.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="ADD_FAILURE_AT">ADD_FAILURE_AT<a href="#ADD_FAILURE_AT" class="hash-link" aria-label="ADD_FAILURE_AT的直接链接" title="ADD_FAILURE_AT的直接链接" translate="no">​</a></h3>
<p><code>ADD_FAILURE_AT(</code><em><code>file_path</code></em><code>,</code><em><code>line_number</code></em><code>)</code></p>
<p>Generates a nonfatal failure at the file and line number specified.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="generalized">Generalized Assertion<a href="#generalized" class="hash-link" aria-label="Generalized Assertion的直接链接" title="Generalized Assertion的直接链接" translate="no">​</a></h2>
<p>The following assertion allows <a class="" href="/cppdev/zh-cn/docs/testing/gt/reference/matchers">matchers</a> to be used to verify
values.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="EXPECT_THAT">EXPECT_THAT<a href="#EXPECT_THAT" class="hash-link" aria-label="EXPECT_THAT的直接链接" title="EXPECT_THAT的直接链接" translate="no">​</a></h3>
<p><code>EXPECT_THAT(</code><em><code>value</code></em><code>,</code><em><code>matcher</code></em><code>)</code> <br>
<code>ASSERT_THAT(</code><em><code>value</code></em><code>,</code><em><code>matcher</code></em><code>)</code></p>
<p>Verifies that <em><code>value</code></em> matches the <a class="" href="/cppdev/zh-cn/docs/testing/gt/reference/matchers">matcher</a> <em><code>matcher</code></em>.</p>
<p>For example, the following code verifies that the string <code>value1</code> starts with
<code>&quot;Hello&quot;</code>, <code>value2</code> matches a regular expression, and <code>value3</code> is between 5 and
10:</p>
<div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">include</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property string" style="color:#e3116c">&lt;gmock/gmock.h&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">using</span><span class="token plain"> </span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">testing</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">AllOf</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">using</span><span class="token plain"> </span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">testing</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Gt</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">using</span><span class="token plain"> </span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">testing</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Lt</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">using</span><span class="token plain"> </span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">testing</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">MatchesRegex</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">using</span><span class="token plain"> </span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">testing</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">StartsWith</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">EXPECT_THAT</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">value1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">StartsWith</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Hello&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">EXPECT_THAT</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">value2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">MatchesRegex</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Line \\d+&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">ASSERT_THAT</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">value3</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">AllOf</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">Gt</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">5</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">Lt</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">10</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p>Matchers enable assertions of this form to read like English and generate
informative failure messages. For example, if the above assertion on <code>value1</code>
fails, the resulting message will be similar to the following:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Value of: value1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Actual: &quot;Hi, world!&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Expected: starts with &quot;Hello&quot;</span><br></span></code></pre></div></div>
<p>GoogleTest provides a built-in library of matchers—see the
<a class="" href="/cppdev/zh-cn/docs/testing/gt/reference/matchers">Matchers Reference</a>. It is also possible to write your own
matchers—see <a class="" href="/cppdev/zh-cn/docs/testing/gt/gmock_cook_book#NewMatchers">Writing New Matchers Quickly</a>.
The use of matchers makes <code>EXPECT_THAT</code> a powerful, extensible assertion.</p>
<p><em>The idea for this assertion was borrowed from Joe Walnes&#x27; Hamcrest project,
which adds <code>assertThat()</code> to JUnit.</em></p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="boolean">Boolean Conditions<a href="#boolean" class="hash-link" aria-label="Boolean Conditions的直接链接" title="Boolean Conditions的直接链接" translate="no">​</a></h2>
<p>The following assertions test Boolean conditions.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="EXPECT_TRUE">EXPECT_TRUE<a href="#EXPECT_TRUE" class="hash-link" aria-label="EXPECT_TRUE的直接链接" title="EXPECT_TRUE的直接链接" translate="no">​</a></h3>
<p><code>EXPECT_TRUE(</code><em><code>condition</code></em><code>)</code> <br>
<code>ASSERT_TRUE(</code><em><code>condition</code></em><code>)</code></p>
<p>Verifies that <em><code>condition</code></em> is true.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="EXPECT_FALSE">EXPECT_FALSE<a href="#EXPECT_FALSE" class="hash-link" aria-label="EXPECT_FALSE的直接链接" title="EXPECT_FALSE的直接链接" translate="no">​</a></h3>
<p><code>EXPECT_FALSE(</code><em><code>condition</code></em><code>)</code> <br>
<code>ASSERT_FALSE(</code><em><code>condition</code></em><code>)</code></p>
<p>Verifies that <em><code>condition</code></em> is false.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="binary-comparison">Binary Comparison<a href="#binary-comparison" class="hash-link" aria-label="Binary Comparison的直接链接" title="Binary Comparison的直接链接" translate="no">​</a></h2>
<p>The following assertions compare two values. The value arguments must be
comparable by the assertion&#x27;s comparison operator, otherwise a compiler error
will result.</p>
<p>If an argument supports the <code>&lt;&lt;</code> operator, it will be called to print the
argument when the assertion fails. Otherwise, GoogleTest will attempt to print
them in the best way it can—see
<a class="" href="/cppdev/zh-cn/docs/testing/gt/advanced#teaching-googletest-how-to-print-your-values">Teaching GoogleTest How to Print Your Values</a>.</p>
<p>Arguments are always evaluated exactly once, so it&#x27;s OK for the arguments to
have side effects. However, the argument evaluation order is undefined and
programs should not depend on any particular argument evaluation order.</p>
<p>These assertions work with both narrow and wide string objects (<code>string</code> and
<code>wstring</code>).</p>
<p>See also the <a href="#floating-point" class="">Floating-Point Comparison</a> assertions to compare
floating-point numbers and avoid problems caused by rounding.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="EXPECT_EQ">EXPECT_EQ<a href="#EXPECT_EQ" class="hash-link" aria-label="EXPECT_EQ的直接链接" title="EXPECT_EQ的直接链接" translate="no">​</a></h3>
<p><code>EXPECT_EQ(</code><em><code>val1</code></em><code>,</code><em><code>val2</code></em><code>)</code> <br>
<code>ASSERT_EQ(</code><em><code>val1</code></em><code>,</code><em><code>val2</code></em><code>)</code></p>
<p>Verifies that <em><code>val1</code></em><code>==</code><em><code>val2</code></em>.</p>
<p>Does pointer equality on pointers. If used on two C strings, it tests if they
are in the same memory location, not if they have the same value. Use
<a href="#EXPECT_STREQ" class=""><code>EXPECT_STREQ</code></a> to compare C strings (e.g. <code>const char*</code>) by
value.</p>
<p>When comparing a pointer to <code>NULL</code>, use <code>EXPECT_EQ(</code><em><code>ptr</code></em><code>, nullptr)</code> instead
of <code>EXPECT_EQ(</code><em><code>ptr</code></em><code>, NULL)</code>.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="EXPECT_NE">EXPECT_NE<a href="#EXPECT_NE" class="hash-link" aria-label="EXPECT_NE的直接链接" title="EXPECT_NE的直接链接" translate="no">​</a></h3>
<p><code>EXPECT_NE(</code><em><code>val1</code></em><code>,</code><em><code>val2</code></em><code>)</code> <br>
<code>ASSERT_NE(</code><em><code>val1</code></em><code>,</code><em><code>val2</code></em><code>)</code></p>
<p>Verifies that <em><code>val1</code></em><code>!=</code><em><code>val2</code></em>.</p>
<p>Does pointer equality on pointers. If used on two C strings, it tests if they
are in different memory locations, not if they have different values. Use
<a href="#EXPECT_STRNE" class=""><code>EXPECT_STRNE</code></a> to compare C strings (e.g. <code>const char*</code>) by
value.</p>
<p>When comparing a pointer to <code>NULL</code>, use <code>EXPECT_NE(</code><em><code>ptr</code></em><code>, nullptr)</code> instead
of <code>EXPECT_NE(</code><em><code>ptr</code></em><code>, NULL)</code>.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="EXPECT_LT">EXPECT_LT<a href="#EXPECT_LT" class="hash-link" aria-label="EXPECT_LT的直接链接" title="EXPECT_LT的直接链接" translate="no">​</a></h3>
<p><code>EXPECT_LT(</code><em><code>val1</code></em><code>,</code><em><code>val2</code></em><code>)</code> <br>
<code>ASSERT_LT(</code><em><code>val1</code></em><code>,</code><em><code>val2</code></em><code>)</code></p>
<p>Verifies that <em><code>val1</code></em><code>&lt;</code><em><code>val2</code></em>.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="EXPECT_LE">EXPECT_LE<a href="#EXPECT_LE" class="hash-link" aria-label="EXPECT_LE的直接链接" title="EXPECT_LE的直接链接" translate="no">​</a></h3>
<p><code>EXPECT_LE(</code><em><code>val1</code></em><code>,</code><em><code>val2</code></em><code>)</code> <br>
<code>ASSERT_LE(</code><em><code>val1</code></em><code>,</code><em><code>val2</code></em><code>)</code></p>
<p>Verifies that <em><code>val1</code></em><code>&lt;=</code><em><code>val2</code></em>.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="EXPECT_GT">EXPECT_GT<a href="#EXPECT_GT" class="hash-link" aria-label="EXPECT_GT的直接链接" title="EXPECT_GT的直接链接" translate="no">​</a></h3>
<p><code>EXPECT_GT(</code><em><code>val1</code></em><code>,</code><em><code>val2</code></em><code>)</code> <br>
<code>ASSERT_GT(</code><em><code>val1</code></em><code>,</code><em><code>val2</code></em><code>)</code></p>
<p>Verifies that <em><code>val1</code></em><code>&gt;</code><em><code>val2</code></em>.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="EXPECT_GE">EXPECT_GE<a href="#EXPECT_GE" class="hash-link" aria-label="EXPECT_GE的直接链接" title="EXPECT_GE的直接链接" translate="no">​</a></h3>
<p><code>EXPECT_GE(</code><em><code>val1</code></em><code>,</code><em><code>val2</code></em><code>)</code> <br>
<code>ASSERT_GE(</code><em><code>val1</code></em><code>,</code><em><code>val2</code></em><code>)</code></p>
<p>Verifies that <em><code>val1</code></em><code>&gt;=</code><em><code>val2</code></em>.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="c-strings">String Comparison<a href="#c-strings" class="hash-link" aria-label="String Comparison的直接链接" title="String Comparison的直接链接" translate="no">​</a></h2>
<p>The following assertions compare two <strong>C strings</strong>. To compare two <code>string</code>
objects, use <a href="#EXPECT_EQ" class=""><code>EXPECT_EQ</code></a> or <a href="#EXPECT_NE" class=""><code>EXPECT_NE</code></a> instead.</p>
<p>These assertions also accept wide C strings (<code>wchar_t*</code>). If a comparison of two
wide strings fails, their values will be printed as UTF-8 narrow strings.</p>
<p>To compare a C string with <code>NULL</code>, use <code>EXPECT_EQ(</code><em><code>c_string</code></em><code>, nullptr)</code> or
<code>EXPECT_NE(</code><em><code>c_string</code></em><code>, nullptr)</code>.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="EXPECT_STREQ">EXPECT_STREQ<a href="#EXPECT_STREQ" class="hash-link" aria-label="EXPECT_STREQ的直接链接" title="EXPECT_STREQ的直接链接" translate="no">​</a></h3>
<p><code>EXPECT_STREQ(</code><em><code>str1</code></em><code>,</code><em><code>str2</code></em><code>)</code> <br>
<code>ASSERT_STREQ(</code><em><code>str1</code></em><code>,</code><em><code>str2</code></em><code>)</code></p>
<p>Verifies that the two C strings <em><code>str1</code></em> and <em><code>str2</code></em> have the same contents.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="EXPECT_STRNE">EXPECT_STRNE<a href="#EXPECT_STRNE" class="hash-link" aria-label="EXPECT_STRNE的直接链接" title="EXPECT_STRNE的直接链接" translate="no">​</a></h3>
<p><code>EXPECT_STRNE(</code><em><code>str1</code></em><code>,</code><em><code>str2</code></em><code>)</code> <br>
<code>ASSERT_STRNE(</code><em><code>str1</code></em><code>,</code><em><code>str2</code></em><code>)</code></p>
<p>Verifies that the two C strings <em><code>str1</code></em> and <em><code>str2</code></em> have different contents.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="EXPECT_STRCASEEQ">EXPECT_STRCASEEQ<a href="#EXPECT_STRCASEEQ" class="hash-link" aria-label="EXPECT_STRCASEEQ的直接链接" title="EXPECT_STRCASEEQ的直接链接" translate="no">​</a></h3>
<p><code>EXPECT_STRCASEEQ(</code><em><code>str1</code></em><code>,</code><em><code>str2</code></em><code>)</code> <br>
<code>ASSERT_STRCASEEQ(</code><em><code>str1</code></em><code>,</code><em><code>str2</code></em><code>)</code></p>
<p>Verifies that the two C strings <em><code>str1</code></em> and <em><code>str2</code></em> have the same contents,
ignoring case.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="EXPECT_STRCASENE">EXPECT_STRCASENE<a href="#EXPECT_STRCASENE" class="hash-link" aria-label="EXPECT_STRCASENE的直接链接" title="EXPECT_STRCASENE的直接链接" translate="no">​</a></h3>
<p><code>EXPECT_STRCASENE(</code><em><code>str1</code></em><code>,</code><em><code>str2</code></em><code>)</code> <br>
<code>ASSERT_STRCASENE(</code><em><code>str1</code></em><code>,</code><em><code>str2</code></em><code>)</code></p>
<p>Verifies that the two C strings <em><code>str1</code></em> and <em><code>str2</code></em> have different contents,
ignoring case.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="floating-point">Floating-Point Comparison<a href="#floating-point" class="hash-link" aria-label="Floating-Point Comparison的直接链接" title="Floating-Point Comparison的直接链接" translate="no">​</a></h2>
<p>The following assertions compare two floating-point values.</p>
<p>Due to rounding errors, it is very unlikely that two floating-point values will
match exactly, so <code>EXPECT_EQ</code> is not suitable. In general, for floating-point
comparison to make sense, the user needs to carefully choose the error bound.</p>
<p>GoogleTest also provides assertions that use a default error bound based on
Units in the Last Place (ULPs). To learn more about ULPs, see the article
<a href="https://randomascii.wordpress.com/2012/02/25/comparing-floating-point-numbers-2012-edition/" target="_blank" rel="noopener noreferrer" class="">Comparing Floating Point Numbers</a>.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="EXPECT_FLOAT_EQ">EXPECT_FLOAT_EQ<a href="#EXPECT_FLOAT_EQ" class="hash-link" aria-label="EXPECT_FLOAT_EQ的直接链接" title="EXPECT_FLOAT_EQ的直接链接" translate="no">​</a></h3>
<p><code>EXPECT_FLOAT_EQ(</code><em><code>val1</code></em><code>,</code><em><code>val2</code></em><code>)</code> <br>
<code>ASSERT_FLOAT_EQ(</code><em><code>val1</code></em><code>,</code><em><code>val2</code></em><code>)</code></p>
<p>Verifies that the two <code>float</code> values <em><code>val1</code></em> and <em><code>val2</code></em> are approximately
equal, to within 4 ULPs from each other. Infinity and the largest finite float
value are considered to be one ULP apart.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="EXPECT_DOUBLE_EQ">EXPECT_DOUBLE_EQ<a href="#EXPECT_DOUBLE_EQ" class="hash-link" aria-label="EXPECT_DOUBLE_EQ的直接链接" title="EXPECT_DOUBLE_EQ的直接链接" translate="no">​</a></h3>
<p><code>EXPECT_DOUBLE_EQ(</code><em><code>val1</code></em><code>,</code><em><code>val2</code></em><code>)</code> <br>
<code>ASSERT_DOUBLE_EQ(</code><em><code>val1</code></em><code>,</code><em><code>val2</code></em><code>)</code></p>
<p>Verifies that the two <code>double</code> values <em><code>val1</code></em> and <em><code>val2</code></em> are approximately
equal, to within 4 ULPs from each other. Infinity and the largest finite double
value are considered to be one ULP apart.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="EXPECT_NEAR">EXPECT_NEAR<a href="#EXPECT_NEAR" class="hash-link" aria-label="EXPECT_NEAR的直接链接" title="EXPECT_NEAR的直接链接" translate="no">​</a></h3>
<p><code>EXPECT_NEAR(</code><em><code>val1</code></em><code>,</code><em><code>val2</code></em><code>,</code><em><code>abs_error</code></em><code>)</code> <br>
<code>ASSERT_NEAR(</code><em><code>val1</code></em><code>,</code><em><code>val2</code></em><code>,</code><em><code>abs_error</code></em><code>)</code></p>
<p>Verifies that the difference between <em><code>val1</code></em> and <em><code>val2</code></em> does not exceed the
absolute error bound <em><code>abs_error</code></em>.</p>
<p>If <em><code>val</code></em> and <em><code>val2</code></em> are both infinity of the same sign, the difference is
considered to be 0. Otherwise, if either value is infinity, the difference is
considered to be infinity. All non-NaN values (including infinity) are
considered to not exceed an <em><code>abs_error</code></em> of infinity.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="exceptions">Exception Assertions<a href="#exceptions" class="hash-link" aria-label="Exception Assertions的直接链接" title="Exception Assertions的直接链接" translate="no">​</a></h2>
<p>The following assertions verify that a piece of code throws, or does not throw,
an exception. Usage requires exceptions to be enabled in the build environment.</p>
<p>Note that the piece of code under test can be a compound statement, for example:</p>
<div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">EXPECT_NO_THROW</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> n </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">5</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">DoSomething</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">n</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="EXPECT_THROW">EXPECT_THROW<a href="#EXPECT_THROW" class="hash-link" aria-label="EXPECT_THROW的直接链接" title="EXPECT_THROW的直接链接" translate="no">​</a></h3>
<p><code>EXPECT_THROW(</code><em><code>statement</code></em><code>,</code><em><code>exception_type</code></em><code>)</code> <br>
<code>ASSERT_THROW(</code><em><code>statement</code></em><code>,</code><em><code>exception_type</code></em><code>)</code></p>
<p>Verifies that <em><code>statement</code></em> throws an exception of type <em><code>exception_type</code></em>.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="EXPECT_ANY_THROW">EXPECT_ANY_THROW<a href="#EXPECT_ANY_THROW" class="hash-link" aria-label="EXPECT_ANY_THROW的直接链接" title="EXPECT_ANY_THROW的直接链接" translate="no">​</a></h3>
<p><code>EXPECT_ANY_THROW(</code><em><code>statement</code></em><code>)</code> <br>
<code>ASSERT_ANY_THROW(</code><em><code>statement</code></em><code>)</code></p>
<p>Verifies that <em><code>statement</code></em> throws an exception of any type.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="EXPECT_NO_THROW">EXPECT_NO_THROW<a href="#EXPECT_NO_THROW" class="hash-link" aria-label="EXPECT_NO_THROW的直接链接" title="EXPECT_NO_THROW的直接链接" translate="no">​</a></h3>
<p><code>EXPECT_NO_THROW(</code><em><code>statement</code></em><code>)</code> <br>
<code>ASSERT_NO_THROW(</code><em><code>statement</code></em><code>)</code></p>
<p>Verifies that <em><code>statement</code></em> does not throw any exception.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="predicates">Predicate Assertions<a href="#predicates" class="hash-link" aria-label="Predicate Assertions的直接链接" title="Predicate Assertions的直接链接" translate="no">​</a></h2>
<p>The following assertions enable more complex predicates to be verified while
printing a more clear failure message than if <code>EXPECT_TRUE</code> were used alone.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="EXPECT_PRED">EXPECT_PRED*<a href="#EXPECT_PRED" class="hash-link" aria-label="EXPECT_PRED*的直接链接" title="EXPECT_PRED*的直接链接" translate="no">​</a></h3>
<p><code>EXPECT_PRED1(</code><em><code>pred</code></em><code>,</code><em><code>val1</code></em><code>)</code> <br>
<code>EXPECT_PRED2(</code><em><code>pred</code></em><code>,</code><em><code>val1</code></em><code>,</code><em><code>val2</code></em><code>)</code> <br>
<code>EXPECT_PRED3(</code><em><code>pred</code></em><code>,</code><em><code>val1</code></em><code>,</code><em><code>val2</code></em><code>,</code><em><code>val3</code></em><code>)</code> <br>
<code>EXPECT_PRED4(</code><em><code>pred</code></em><code>,</code><em><code>val1</code></em><code>,</code><em><code>val2</code></em><code>,</code><em><code>val3</code></em><code>,</code><em><code>val4</code></em><code>)</code> <br>
<code>EXPECT_PRED5(</code><em><code>pred</code></em><code>,</code><em><code>val1</code></em><code>,</code><em><code>val2</code></em><code>,</code><em><code>val3</code></em><code>,</code><em><code>val4</code></em><code>,</code><em><code>val5</code></em><code>)</code></p>
<p><code>ASSERT_PRED1(</code><em><code>pred</code></em><code>,</code><em><code>val1</code></em><code>)</code> <br>
<code>ASSERT_PRED2(</code><em><code>pred</code></em><code>,</code><em><code>val1</code></em><code>,</code><em><code>val2</code></em><code>)</code> <br>
<code>ASSERT_PRED3(</code><em><code>pred</code></em><code>,</code><em><code>val1</code></em><code>,</code><em><code>val2</code></em><code>,</code><em><code>val3</code></em><code>)</code> <br>
<code>ASSERT_PRED4(</code><em><code>pred</code></em><code>,</code><em><code>val1</code></em><code>,</code><em><code>val2</code></em><code>,</code><em><code>val3</code></em><code>,</code><em><code>val4</code></em><code>)</code> <br>
<code>ASSERT_PRED5(</code><em><code>pred</code></em><code>,</code><em><code>val1</code></em><code>,</code><em><code>val2</code></em><code>,</code><em><code>val3</code></em><code>,</code><em><code>val4</code></em><code>,</code><em><code>val5</code></em><code>)</code></p>
<p>Verifies that the predicate <em><code>pred</code></em> returns <code>true</code> when passed the given values
as arguments.</p>
<p>The parameter <em><code>pred</code></em> is a function or functor that accepts as many arguments
as the corresponding macro accepts values. If <em><code>pred</code></em> returns <code>true</code> for the
given arguments, the assertion succeeds, otherwise the assertion fails.</p>
<p>When the assertion fails, it prints the value of each argument. Arguments are
always evaluated exactly once.</p>
<p>As an example, see the following code:</p>
<div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// Returns true if m and n have no common divisors except 1.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">bool</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">MutuallyPrime</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> m</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> n</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> a </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> b </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">4</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> c </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">10</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">EXPECT_PRED2</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">MutuallyPrime</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> a</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> b</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// Succeeds</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">EXPECT_PRED2</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">MutuallyPrime</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> b</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> c</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// Fails</span><br></span></code></pre></div></div>
<p>In the above example, the first assertion succeeds, and the second fails with
the following message:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">MutuallyPrime(b, c) is false, where</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">b is 4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">c is 10</span><br></span></code></pre></div></div>
<p>Note that if the given predicate is an overloaded function or a function
template, the assertion macro might not be able to determine which version to
use, and it might be necessary to explicitly specify the type of the function.
For example, for a Boolean function <code>IsPositive()</code> overloaded to take either a
single <code>int</code> or <code>double</code> argument, it would be necessary to write one of the
following:</p>
<div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">EXPECT_PRED1</span><span class="token punctuation" style="color:#393A34">(</span><span class="token generic-function function" style="color:#d73a49">static_cast</span><span class="token generic-function generic class-name operator" style="color:#393A34">&lt;</span><span class="token generic-function generic class-name keyword" style="color:#00009f">bool</span><span class="token generic-function generic class-name"> </span><span class="token generic-function generic class-name punctuation" style="color:#393A34">(</span><span class="token generic-function generic class-name operator" style="color:#393A34">*</span><span class="token generic-function generic class-name punctuation" style="color:#393A34">)</span><span class="token generic-function generic class-name punctuation" style="color:#393A34">(</span><span class="token generic-function generic class-name keyword" style="color:#00009f">int</span><span class="token generic-function generic class-name punctuation" style="color:#393A34">)</span><span class="token generic-function generic class-name operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">IsPositive</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">5</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">EXPECT_PRED1</span><span class="token punctuation" style="color:#393A34">(</span><span class="token generic-function function" style="color:#d73a49">static_cast</span><span class="token generic-function generic class-name operator" style="color:#393A34">&lt;</span><span class="token generic-function generic class-name keyword" style="color:#00009f">bool</span><span class="token generic-function generic class-name"> </span><span class="token generic-function generic class-name punctuation" style="color:#393A34">(</span><span class="token generic-function generic class-name operator" style="color:#393A34">*</span><span class="token generic-function generic class-name punctuation" style="color:#393A34">)</span><span class="token generic-function generic class-name punctuation" style="color:#393A34">(</span><span class="token generic-function generic class-name keyword" style="color:#00009f">double</span><span class="token generic-function generic class-name punctuation" style="color:#393A34">)</span><span class="token generic-function generic class-name operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">IsPositive</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3.14</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p>Writing simply <code>EXPECT_PRED1(IsPositive, 5);</code> would result in a compiler error.
Similarly, to use a template function, specify the template arguments:</p>
<div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">template</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token keyword" style="color:#00009f">typename</span><span class="token plain"> </span><span class="token class-name">T</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">bool</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">IsNegative</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">T x</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> x </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">EXPECT_PRED1</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">IsNegative</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token keyword" style="color:#00009f">int</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">5</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// Must specify type for IsNegative</span><br></span></code></pre></div></div>
<p>If a template has multiple parameters, wrap the predicate in parentheses so the
macro arguments are parsed correctly:</p>
<div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">ASSERT_PRED2</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">MyPredicate</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token keyword" style="color:#00009f">int</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">int</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">5</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="EXPECT_PRED_FORMAT">EXPECT_PRED_FORMAT*<a href="#EXPECT_PRED_FORMAT" class="hash-link" aria-label="EXPECT_PRED_FORMAT*的直接链接" title="EXPECT_PRED_FORMAT*的直接链接" translate="no">​</a></h3>
<p><code>EXPECT_PRED_FORMAT1(</code><em><code>pred_formatter</code></em><code>,</code><em><code>val1</code></em><code>)</code> <br>
<code>EXPECT_PRED_FORMAT2(</code><em><code>pred_formatter</code></em><code>,</code><em><code>val1</code></em><code>,</code><em><code>val2</code></em><code>)</code> <br>
<code>EXPECT_PRED_FORMAT3(</code><em><code>pred_formatter</code></em><code>,</code><em><code>val1</code></em><code>,</code><em><code>val2</code></em><code>,</code><em><code>val3</code></em><code>)</code> <br>
<code>EXPECT_PRED_FORMAT4(</code><em><code>pred_formatter</code></em><code>,</code><em><code>val1</code></em><code>,</code><em><code>val2</code></em><code>,</code><em><code>val3</code></em><code>,</code><em><code>val4</code></em><code>)</code>
<br>
<code>EXPECT_PRED_FORMAT5(</code><em><code>pred_formatter</code></em><code>,</code><em><code>val1</code></em><code>,</code><em><code>val2</code></em><code>,</code><em><code>val3</code></em><code>,</code><em><code>val4</code></em><code>,</code><em><code>val5</code></em><code>)</code></p>
<p><code>ASSERT_PRED_FORMAT1(</code><em><code>pred_formatter</code></em><code>,</code><em><code>val1</code></em><code>)</code> <br>
<code>ASSERT_PRED_FORMAT2(</code><em><code>pred_formatter</code></em><code>,</code><em><code>val1</code></em><code>,</code><em><code>val2</code></em><code>)</code> <br>
<code>ASSERT_PRED_FORMAT3(</code><em><code>pred_formatter</code></em><code>,</code><em><code>val1</code></em><code>,</code><em><code>val2</code></em><code>,</code><em><code>val3</code></em><code>)</code> <br>
<code>ASSERT_PRED_FORMAT4(</code><em><code>pred_formatter</code></em><code>,</code><em><code>val1</code></em><code>,</code><em><code>val2</code></em><code>,</code><em><code>val3</code></em><code>,</code><em><code>val4</code></em><code>)</code>
<br>
<code>ASSERT_PRED_FORMAT5(</code><em><code>pred_formatter</code></em><code>,</code><em><code>val1</code></em><code>,</code><em><code>val2</code></em><code>,</code><em><code>val3</code></em><code>,</code><em><code>val4</code></em><code>,</code><em><code>val5</code></em><code>)</code></p>
<p>Verifies that the predicate <em><code>pred_formatter</code></em> succeeds when passed the given
values as arguments.</p>
<p>The parameter <em><code>pred_formatter</code></em> is a <em>predicate-formatter</em>, which is a function
or functor with the signature:</p>
<div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">testing</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">AssertionResult </span><span class="token function" style="color:#d73a49">PredicateFormatter</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">char</span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> expr1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                            </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">char</span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> expr2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                            </span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                            </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">char</span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> exprn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                            T1 val1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                            T2 val2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                            </span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                            Tn valn</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p>where <em><code>val1</code></em>, <em><code>val2</code></em>, ..., <em><code>valn</code></em> are the values of the predicate
arguments, and <em><code>expr1</code></em>, <em><code>expr2</code></em>, ..., <em><code>exprn</code></em> are the corresponding
expressions as they appear in the source code. The types <code>T1</code>, <code>T2</code>, ..., <code>Tn</code>
can be either value types or reference types; if an argument has type <code>T</code>, it
can be declared as either <code>T</code> or <code>const T&amp;</code>, whichever is appropriate. For more
about the return type <code>testing::AssertionResult</code>, see
<a class="" href="/cppdev/zh-cn/docs/testing/gt/advanced#using-a-function-that-returns-an-assertionresult">Using a Function That Returns an AssertionResult</a>.</p>
<p>As an example, see the following code:</p>
<div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// Returns the smallest prime common divisor of m and n,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// or 1 when m and n are mutually prime.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">SmallestPrimeCommonDivisor</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> m</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> n</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Returns true if m and n have no common divisors except 1.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">bool</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">MutuallyPrime</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> m</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> n</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// A predicate-formatter for asserting that two integers are mutually prime.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">testing</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">AssertionResult </span><span class="token function" style="color:#d73a49">AssertMutuallyPrime</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">char</span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> m_expr</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                             </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">char</span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> n_expr</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                             </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> m</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                             </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> n</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">MutuallyPrime</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">m</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> n</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> testing</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">AssertionSuccess</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> testing</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">AssertionFailure</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;&lt;</span><span class="token plain"> m_expr </span><span class="token operator" style="color:#393A34">&lt;&lt;</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot; and &quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;&lt;</span><span class="token plain"> n_expr</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token operator" style="color:#393A34">&lt;&lt;</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot; (&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;&lt;</span><span class="token plain"> m </span><span class="token operator" style="color:#393A34">&lt;&lt;</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot; and &quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;&lt;</span><span class="token plain"> n </span><span class="token operator" style="color:#393A34">&lt;&lt;</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;) are not mutually prime, &quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token operator" style="color:#393A34">&lt;&lt;</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;as they have a common divisor &quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;&lt;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">SmallestPrimeCommonDivisor</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">m</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> n</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> a </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> b </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">4</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> c </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">10</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">EXPECT_PRED_FORMAT2</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">AssertMutuallyPrime</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> a</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> b</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// Succeeds</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">EXPECT_PRED_FORMAT2</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">AssertMutuallyPrime</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> b</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> c</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// Fails</span><br></span></code></pre></div></div>
<p>In the above example, the final assertion fails and the predicate-formatter
produces the following failure message:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">b and c (4 and 10) are not mutually prime, as they have a common divisor 2</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="HRESULT">Windows HRESULT Assertions<a href="#HRESULT" class="hash-link" aria-label="Windows HRESULT Assertions的直接链接" title="Windows HRESULT Assertions的直接链接" translate="no">​</a></h2>
<p>The following assertions test for <code>HRESULT</code> success or failure. For example:</p>
<div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">CComPtr</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">IShellDispatch2</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> shell</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">ASSERT_HRESULT_SUCCEEDED</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">shell</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">CoCreateInstance</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">L</span><span class="token string" style="color:#e3116c">&quot;Shell.Application&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">CComVariant empty</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">ASSERT_HRESULT_SUCCEEDED</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">shell</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">ShellExecute</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">CComBSTR</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">url</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> empty</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> empty</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> empty</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> empty</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p>The generated output contains the human-readable error message associated with
the returned <code>HRESULT</code> code.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="EXPECT_HRESULT_SUCCEEDED">EXPECT_HRESULT_SUCCEEDED<a href="#EXPECT_HRESULT_SUCCEEDED" class="hash-link" aria-label="EXPECT_HRESULT_SUCCEEDED的直接链接" title="EXPECT_HRESULT_SUCCEEDED的直接链接" translate="no">​</a></h3>
<p><code>EXPECT_HRESULT_SUCCEEDED(</code><em><code>expression</code></em><code>)</code> <br>
<code>ASSERT_HRESULT_SUCCEEDED(</code><em><code>expression</code></em><code>)</code></p>
<p>Verifies that <em><code>expression</code></em> is a success <code>HRESULT</code>.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="EXPECT_HRESULT_FAILED">EXPECT_HRESULT_FAILED<a href="#EXPECT_HRESULT_FAILED" class="hash-link" aria-label="EXPECT_HRESULT_FAILED的直接链接" title="EXPECT_HRESULT_FAILED的直接链接" translate="no">​</a></h3>
<p><code>EXPECT_HRESULT_FAILED(</code><em><code>expression</code></em><code>)</code> <br>
<code>ASSERT_HRESULT_FAILED(</code><em><code>expression</code></em><code>)</code></p>
<p>Verifies that <em><code>expression</code></em> is a failure <code>HRESULT</code>.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="death">Death Assertions<a href="#death" class="hash-link" aria-label="Death Assertions的直接链接" title="Death Assertions的直接链接" translate="no">​</a></h2>
<p>The following assertions verify that a piece of code causes the process to
terminate. For context, see <a class="" href="/cppdev/zh-cn/docs/testing/gt/advanced#death-tests">Death Tests</a>.</p>
<p>These assertions spawn a new process and execute the code under test in that
process. How that happens depends on the platform and the variable
<code>::testing::GTEST_FLAG(death_test_style)</code>, which is initialized from the
command-line flag <code>--gtest_death_test_style</code>.</p>
<ul>
<li class="">On POSIX systems, <code>fork()</code> (or <code>clone()</code> on Linux) is used to spawn the
child, after which:<!-- -->
<ul>
<li class="">If the variable&#x27;s value is <code>&quot;fast&quot;</code>, the death test statement is
immediately executed.</li>
<li class="">If the variable&#x27;s value is <code>&quot;threadsafe&quot;</code>, the child process re-executes
the unit test binary just as it was originally invoked, but with some
extra flags to cause just the single death test under consideration to
be run.</li>
</ul>
</li>
<li class="">On Windows, the child is spawned using the <code>CreateProcess()</code> API, and
re-executes the binary to cause just the single death test under
consideration to be run - much like the <code>&quot;threadsafe&quot;</code> mode on POSIX.</li>
</ul>
<p>Other values for the variable are illegal and will cause the death test to fail.
Currently, the flag&#x27;s default value is
<strong><code>&quot;fast&quot;</code></strong>.</p>
<p>If the death test statement runs to completion without dying, the child process
will nonetheless terminate, and the assertion fails.</p>
<p>Note that the piece of code under test can be a compound statement, for example:</p>
<div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">EXPECT_DEATH</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> n </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">5</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">DoSomething</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">n</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Error on line .* of DoSomething()&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="EXPECT_DEATH">EXPECT_DEATH<a href="#EXPECT_DEATH" class="hash-link" aria-label="EXPECT_DEATH的直接链接" title="EXPECT_DEATH的直接链接" translate="no">​</a></h3>
<p><code>EXPECT_DEATH(</code><em><code>statement</code></em><code>,</code><em><code>matcher</code></em><code>)</code> <br>
<code>ASSERT_DEATH(</code><em><code>statement</code></em><code>,</code><em><code>matcher</code></em><code>)</code></p>
<p>Verifies that <em><code>statement</code></em> causes the process to terminate with a nonzero exit
status and produces <code>stderr</code> output that matches <em><code>matcher</code></em>.</p>
<p>The parameter <em><code>matcher</code></em> is either a <a class="" href="/cppdev/zh-cn/docs/testing/gt/reference/matchers">matcher</a> for a <code>const std::string&amp;</code>, or a regular expression (see
<a class="" href="/cppdev/zh-cn/docs/testing/gt/advanced#regular-expression-syntax">Regular Expression Syntax</a>)—a bare
string <em><code>s</code></em> (with no matcher) is treated as
<a class="" href="/cppdev/zh-cn/docs/testing/gt/reference/matchers#string-matchers"><code>ContainsRegex(s)</code></a>, <strong>not</strong>
<a class="" href="/cppdev/zh-cn/docs/testing/gt/reference/matchers#generic-comparison"><code>Eq(s)</code></a>.</p>
<p>For example, the following code verifies that calling <code>DoSomething(42)</code> causes
the process to die with an error message that contains the text <code>My error</code>:</p>
<div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">EXPECT_DEATH</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">DoSomething</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">42</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;My error&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="EXPECT_DEATH_IF_SUPPORTED">EXPECT_DEATH_IF_SUPPORTED<a href="#EXPECT_DEATH_IF_SUPPORTED" class="hash-link" aria-label="EXPECT_DEATH_IF_SUPPORTED的直接链接" title="EXPECT_DEATH_IF_SUPPORTED的直接链接" translate="no">​</a></h3>
<p><code>EXPECT_DEATH_IF_SUPPORTED(</code><em><code>statement</code></em><code>,</code><em><code>matcher</code></em><code>)</code> <br>
<code>ASSERT_DEATH_IF_SUPPORTED(</code><em><code>statement</code></em><code>,</code><em><code>matcher</code></em><code>)</code></p>
<p>If death tests are supported, behaves the same as
<a href="#EXPECT_DEATH" class=""><code>EXPECT_DEATH</code></a>. Otherwise, verifies nothing.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="EXPECT_DEBUG_DEATH">EXPECT_DEBUG_DEATH<a href="#EXPECT_DEBUG_DEATH" class="hash-link" aria-label="EXPECT_DEBUG_DEATH的直接链接" title="EXPECT_DEBUG_DEATH的直接链接" translate="no">​</a></h3>
<p><code>EXPECT_DEBUG_DEATH(</code><em><code>statement</code></em><code>,</code><em><code>matcher</code></em><code>)</code> <br>
<code>ASSERT_DEBUG_DEATH(</code><em><code>statement</code></em><code>,</code><em><code>matcher</code></em><code>)</code></p>
<p>In debug mode, behaves the same as <a href="#EXPECT_DEATH" class=""><code>EXPECT_DEATH</code></a>. When not in
debug mode (i.e. <code>NDEBUG</code> is defined), just executes <em><code>statement</code></em>.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="EXPECT_EXIT">EXPECT_EXIT<a href="#EXPECT_EXIT" class="hash-link" aria-label="EXPECT_EXIT的直接链接" title="EXPECT_EXIT的直接链接" translate="no">​</a></h3>
<p><code>EXPECT_EXIT(</code><em><code>statement</code></em><code>,</code><em><code>predicate</code></em><code>,</code><em><code>matcher</code></em><code>)</code> <br>
<code>ASSERT_EXIT(</code><em><code>statement</code></em><code>,</code><em><code>predicate</code></em><code>,</code><em><code>matcher</code></em><code>)</code></p>
<p>Verifies that <em><code>statement</code></em> causes the process to terminate with an exit status
that satisfies <em><code>predicate</code></em>, and produces <code>stderr</code> output that matches
<em><code>matcher</code></em>.</p>
<p>The parameter <em><code>predicate</code></em> is a function or functor that accepts an <code>int</code> exit
status and returns a <code>bool</code>. GoogleTest provides two predicates to handle common
cases:</p>
<div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// Returns true if the program exited normally with the given exit status code.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">testing</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">ExitedWithCode</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">exit_code</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Returns true if the program was killed by the given signal.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Not available on Windows.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">testing</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">KilledBySignal</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">signal_number</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p>The parameter <em><code>matcher</code></em> is either a <a class="" href="/cppdev/zh-cn/docs/testing/gt/reference/matchers">matcher</a> for a <code>const std::string&amp;</code>, or a regular expression (see
<a class="" href="/cppdev/zh-cn/docs/testing/gt/advanced#regular-expression-syntax">Regular Expression Syntax</a>)—a bare
string <em><code>s</code></em> (with no matcher) is treated as
<a class="" href="/cppdev/zh-cn/docs/testing/gt/reference/matchers#string-matchers"><code>ContainsRegex(s)</code></a>, <strong>not</strong>
<a class="" href="/cppdev/zh-cn/docs/testing/gt/reference/matchers#generic-comparison"><code>Eq(s)</code></a>.</p>
<p>For example, the following code verifies that calling <code>NormalExit()</code> causes the
process to print a message containing the text <code>Success</code> to <code>stderr</code> and exit
with exit status code 0:</p>
<div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">EXPECT_EXIT</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">NormalExit</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> testing</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">ExitedWithCode</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Success&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col noPrint_WFHX"><a href="https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/testing/gt/reference/assertions.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>编辑此页</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="文件选项卡"><a class="pagination-nav__link pagination-nav__link--prev" href="/cppdev/zh-cn/docs/testing/gt/reference/mocking"><div class="pagination-nav__sublabel">上一页</div><div class="pagination-nav__label">Mocking Reference</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/cppdev/zh-cn/docs/testing/gt/reference/matchers"><div class="pagination-nav__sublabel">下一页</div><div class="pagination-nav__label">Matchers Reference</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#success-failure" class="table-of-contents__link toc-highlight">Explicit Success and Failure</a><ul><li><a href="#SUCCEED" class="table-of-contents__link toc-highlight">SUCCEED</a></li><li><a href="#FAIL" class="table-of-contents__link toc-highlight">FAIL</a></li><li><a href="#ADD_FAILURE" class="table-of-contents__link toc-highlight">ADD_FAILURE</a></li><li><a href="#ADD_FAILURE_AT" class="table-of-contents__link toc-highlight">ADD_FAILURE_AT</a></li></ul></li><li><a href="#generalized" class="table-of-contents__link toc-highlight">Generalized Assertion</a><ul><li><a href="#EXPECT_THAT" class="table-of-contents__link toc-highlight">EXPECT_THAT</a></li></ul></li><li><a href="#boolean" class="table-of-contents__link toc-highlight">Boolean Conditions</a><ul><li><a href="#EXPECT_TRUE" class="table-of-contents__link toc-highlight">EXPECT_TRUE</a></li><li><a href="#EXPECT_FALSE" class="table-of-contents__link toc-highlight">EXPECT_FALSE</a></li></ul></li><li><a href="#binary-comparison" class="table-of-contents__link toc-highlight">Binary Comparison</a><ul><li><a href="#EXPECT_EQ" class="table-of-contents__link toc-highlight">EXPECT_EQ</a></li><li><a href="#EXPECT_NE" class="table-of-contents__link toc-highlight">EXPECT_NE</a></li><li><a href="#EXPECT_LT" class="table-of-contents__link toc-highlight">EXPECT_LT</a></li><li><a href="#EXPECT_LE" class="table-of-contents__link toc-highlight">EXPECT_LE</a></li><li><a href="#EXPECT_GT" class="table-of-contents__link toc-highlight">EXPECT_GT</a></li><li><a href="#EXPECT_GE" class="table-of-contents__link toc-highlight">EXPECT_GE</a></li></ul></li><li><a href="#c-strings" class="table-of-contents__link toc-highlight">String Comparison</a><ul><li><a href="#EXPECT_STREQ" class="table-of-contents__link toc-highlight">EXPECT_STREQ</a></li><li><a href="#EXPECT_STRNE" class="table-of-contents__link toc-highlight">EXPECT_STRNE</a></li><li><a href="#EXPECT_STRCASEEQ" class="table-of-contents__link toc-highlight">EXPECT_STRCASEEQ</a></li><li><a href="#EXPECT_STRCASENE" class="table-of-contents__link toc-highlight">EXPECT_STRCASENE</a></li></ul></li><li><a href="#floating-point" class="table-of-contents__link toc-highlight">Floating-Point Comparison</a><ul><li><a href="#EXPECT_FLOAT_EQ" class="table-of-contents__link toc-highlight">EXPECT_FLOAT_EQ</a></li><li><a href="#EXPECT_DOUBLE_EQ" class="table-of-contents__link toc-highlight">EXPECT_DOUBLE_EQ</a></li><li><a href="#EXPECT_NEAR" class="table-of-contents__link toc-highlight">EXPECT_NEAR</a></li></ul></li><li><a href="#exceptions" class="table-of-contents__link toc-highlight">Exception Assertions</a><ul><li><a href="#EXPECT_THROW" class="table-of-contents__link toc-highlight">EXPECT_THROW</a></li><li><a href="#EXPECT_ANY_THROW" class="table-of-contents__link toc-highlight">EXPECT_ANY_THROW</a></li><li><a href="#EXPECT_NO_THROW" class="table-of-contents__link toc-highlight">EXPECT_NO_THROW</a></li></ul></li><li><a href="#predicates" class="table-of-contents__link toc-highlight">Predicate Assertions</a><ul><li><a href="#EXPECT_PRED" class="table-of-contents__link toc-highlight">EXPECT_PRED*</a></li><li><a href="#EXPECT_PRED_FORMAT" class="table-of-contents__link toc-highlight">EXPECT_PRED_FORMAT*</a></li></ul></li><li><a href="#HRESULT" class="table-of-contents__link toc-highlight">Windows HRESULT Assertions</a><ul><li><a href="#EXPECT_HRESULT_SUCCEEDED" class="table-of-contents__link toc-highlight">EXPECT_HRESULT_SUCCEEDED</a></li><li><a href="#EXPECT_HRESULT_FAILED" class="table-of-contents__link toc-highlight">EXPECT_HRESULT_FAILED</a></li></ul></li><li><a href="#death" class="table-of-contents__link toc-highlight">Death Assertions</a><ul><li><a href="#EXPECT_DEATH" class="table-of-contents__link toc-highlight">EXPECT_DEATH</a></li><li><a href="#EXPECT_DEATH_IF_SUPPORTED" class="table-of-contents__link toc-highlight">EXPECT_DEATH_IF_SUPPORTED</a></li><li><a href="#EXPECT_DEBUG_DEATH" class="table-of-contents__link toc-highlight">EXPECT_DEBUG_DEATH</a></li><li><a href="#EXPECT_EXIT" class="table-of-contents__link toc-highlight">EXPECT_EXIT</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/cppdev/zh-cn/docs/intro">Tutorial</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://discordapp.com/invite/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://x.com/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">X<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/cppdev/zh-cn/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/kumo-pub" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 Kumo, Inc.</div></div></div></footer></div>
</body>
</html>