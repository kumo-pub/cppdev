<!doctype html>
<html lang="zh-cn" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-foundamentals/time" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.2">
<title data-rh="true">时间与日历 | Kumo Search</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://your-docusaurus-site.example.com/cppdev/zh-cn/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://your-docusaurus-site.example.com/cppdev/zh-cn/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://your-docusaurus-site.example.com/cppdev/zh-cn/docs/foundamentals/time"><meta data-rh="true" property="og:locale" content="zh_cn"><meta data-rh="true" property="og:locale:alternate" content="en_GB"><meta data-rh="true" name="docusaurus_locale" content="zh-cn"><meta data-rh="true" name="docsearch:language" content="zh-cn"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="时间与日历 | Kumo Search"><meta data-rh="true" name="description" content="Turbo time 库包含了用于表示时间值的抽象，包括 绝对时间 和 民用时间。该时间库由以下组件组成："><meta data-rh="true" property="og:description" content="Turbo time 库包含了用于表示时间值的抽象，包括 绝对时间 和 民用时间。该时间库由以下组件组成："><link data-rh="true" rel="icon" href="/cppdev/zh-cn/img/favicon.svg"><link data-rh="true" rel="canonical" href="https://your-docusaurus-site.example.com/cppdev/zh-cn/docs/foundamentals/time"><link data-rh="true" rel="alternate" href="https://your-docusaurus-site.example.com/cppdev/docs/foundamentals/time" hreflang="en-GB"><link data-rh="true" rel="alternate" href="https://your-docusaurus-site.example.com/cppdev/zh-cn/docs/foundamentals/time" hreflang="zh-cn"><link data-rh="true" rel="alternate" href="https://your-docusaurus-site.example.com/cppdev/docs/foundamentals/time" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"基础开发","item":"https://your-docusaurus-site.example.com/cppdev/zh-cn/docs/category/foundamentals"},{"@type":"ListItem","position":2,"name":"时间与日历","item":"https://your-docusaurus-site.example.com/cppdev/zh-cn/docs/foundamentals/time"}]}</script><link rel="alternate" type="application/rss+xml" href="/cppdev/zh-cn/blog/rss.xml" title="Kumo Search RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/cppdev/zh-cn/blog/atom.xml" title="Kumo Search Atom Feed"><link rel="stylesheet" href="/cppdev/zh-cn/assets/css/styles.582e0043.css">
<script src="/cppdev/zh-cn/assets/js/runtime~main.ab755061.js" defer="defer"></script>
<script src="/cppdev/zh-cn/assets/js/main.0dd454fe.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")),document.documentElement.setAttribute("data-theme-choice",t||"system")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/cppdev/zh-cn/img/kumo-logo.svg"><div role="region" aria-label="跳到主要内容"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">跳到主要内容</a></div><nav aria-label="主导航" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="切换导航栏" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/cppdev/zh-cn/"><div class="navbar__logo"><img src="/cppdev/zh-cn/img/kumo-logo.svg" alt="Kumo logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/cppdev/zh-cn/img/kumo-logo.svg" alt="Kumo logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">开发导论</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/cppdev/zh-cn/docs/intro">教程</a><a class="navbar__item navbar__link" href="/cppdev/zh-cn/docs/integration/overview">集成</a><a class="navbar__item navbar__link" href="/cppdev/zh-cn/blog">博客</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://github.com/kumose" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_nlXk"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>中文（中国）</a><ul class="dropdown__menu"><li><a href="/cppdev/docs/foundamentals/time" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="en-GB">English</a></li><li><a href="/cppdev/zh-cn/docs/foundamentals/time" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="zh-cn">中文（中国）</a></li></ul></div><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="切换浅色/暗黑模式（当前为system mode）"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="回到顶部" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="文档侧边栏" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/cppdev/zh-cn/docs/intro"><span title="概览" class="linkLabel_WmDU">概览</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--active" href="/cppdev/zh-cn/docs/category/foundamentals"><span title="基础开发" class="categoryLinkLabel_W154">基础开发</span></a><button aria-label="折叠侧边栏分类 &#x27;基础开发&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" tabindex="0" href="/cppdev/zh-cn/docs/foundamentals/testing/"><span title="性能测试与单元测试" class="categoryLinkLabel_W154">性能测试与单元测试</span></a><button aria-label="展开侧边栏分类 &#x27;性能测试与单元测试&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" tabindex="0" href="/cppdev/zh-cn/docs/foundamentals/log/"><span title="日志" class="categoryLinkLabel_W154">日志</span></a><button aria-label="展开侧边栏分类 &#x27;日志&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/cppdev/zh-cn/docs/foundamentals/time"><span title="时间与日历" class="linkLabel_WmDU">时间与日历</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" tabindex="0" href="/cppdev/zh-cn/docs/category/standardized-errors-and-error-return-values"><span title="标准化错误与错误返回值" class="categoryLinkLabel_W154">标准化错误与错误返回值</span></a><button aria-label="展开侧边栏分类 &#x27;标准化错误与错误返回值&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" tabindex="0" href="/cppdev/zh-cn/docs/foundamentals/strings/"><span title="strings 操作" class="categoryLinkLabel_W154">strings 操作</span></a><button aria-label="展开侧边栏分类 &#x27;strings 操作&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cppdev/zh-cn/docs/foundamentals/flags"><span title="Turbo 命令行标志（Turbo Flags）" class="linkLabel_WmDU">Turbo 命令行标志（Turbo Flags）</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" tabindex="0" href="/cppdev/zh-cn/docs/foundamentals/codec/"><span title="编码与解码" class="categoryLinkLabel_W154">编码与解码</span></a><button aria-label="展开侧边栏分类 &#x27;编码与解码&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cppdev/zh-cn/docs/foundamentals/format/"><span title="格式化与输出（字符串格式化和输出）" class="linkLabel_WmDU">格式化与输出（字符串格式化和输出）</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" tabindex="0" href="/cppdev/zh-cn/docs/foundamentals/map/"><span title="map容器" class="categoryLinkLabel_W154">map容器</span></a><button aria-label="展开侧边栏分类 &#x27;map容器&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" tabindex="0" href="/cppdev/zh-cn/docs/foundamentals/compress/"><span title="压缩与解压缩" class="categoryLinkLabel_W154">压缩与解压缩</span></a><button aria-label="展开侧边栏分类 &#x27;压缩与解压缩&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" tabindex="0" href="/cppdev/zh-cn/docs/foundamentals/fibers/"><span title="Fiber And Future" class="categoryLinkLabel_W154">Fiber And Future</span></a><button aria-label="展开侧边栏分类 &#x27;Fiber And Future&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" tabindex="0" href="/cppdev/zh-cn/docs/foundamentals/monitor/"><span title="监控" class="categoryLinkLabel_W154">监控</span></a><button aria-label="展开侧边栏分类 &#x27;监控&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" tabindex="0" href="/cppdev/zh-cn/docs/foundamentals/filesystem/"><span title="文件系统" class="categoryLinkLabel_W154">文件系统</span></a><button aria-label="展开侧边栏分类 &#x27;文件系统&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" tabindex="0" href="/cppdev/zh-cn/docs/foundamentals/json/"><span title="json" class="categoryLinkLabel_W154">json</span></a><button aria-label="展开侧边栏分类 &#x27;json&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/cppdev/zh-cn/docs/rpc/"><span title="rpc远程调用" class="categoryLinkLabel_W154">rpc远程调用</span></a><button aria-label="展开侧边栏分类 &#x27;rpc远程调用&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/cppdev/zh-cn/docs/retrieve/"><span title="检索开发" class="categoryLinkLabel_W154">检索开发</span></a><button aria-label="展开侧边栏分类 &#x27;检索开发&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/cppdev/zh-cn/docs/store/"><span title="存储" class="categoryLinkLabel_W154">存储</span></a><button aria-label="展开侧边栏分类 &#x27;存储&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/cppdev/zh-cn/docs/ir/"><span title="IR" class="categoryLinkLabel_W154">IR</span></a><button aria-label="展开侧边栏分类 &#x27;IR&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/cppdev/zh-cn/docs/advance/"><span title="进阶开发" class="categoryLinkLabel_W154">进阶开发</span></a><button aria-label="展开侧边栏分类 &#x27;进阶开发&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="页面路径"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="主页面" class="breadcrumbs__link" href="/cppdev/zh-cn/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/cppdev/zh-cn/docs/category/foundamentals"><span>基础开发</span></a></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">时间与日历</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">本页总览</button></div><div class="theme-doc-markdown markdown"><header><h1>时间与日历</h1></header>
<p>Turbo <code>time</code> 库包含了用于表示时间值的抽象，包括 <em>绝对时间</em> 和 <em>民用时间</em>。该时间库由以下组件组成：</p>
<ul>
<li class=""><code>time.h</code>：包含绝对时间（及持续时间）的抽象，以及用于构造、解析和转换这些类型的辅助函数。此外，该头文件还支持时区，使你可以在绝对时间和民用时间之间进行映射。</li>
<li class=""><code>civil_time.h</code>：包含民用时间的抽象，以及用于构造、解析和转换这些类型的辅助函数。</li>
<li class=""><code>clock.h</code>：包含使用系统时钟创建时间对象的工具函数。</li>
</ul>
<p>这些抽象和工具函数在下文中进行了说明。</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="fundamental-concepts">基本概念<a href="#fundamental-concepts" class="hash-link" aria-label="基本概念的直接链接" title="基本概念的直接链接" translate="no">​</a></h2>
<p>表示时间有两种方式：<em>绝对时间</em> 和 <em>民用时间</em>。绝对时间可以唯一且全局地表示某一特定时刻。每个事件都发生在特定的绝对时间上，世界上的每个人都同意事件发生的绝对时间。<code>time_t</code> 是一个众所周知的绝对时间类型。想象尼尔·阿姆斯特朗首次踏上月球的瞬间。他只发生过一次。一个小时后，他不会再为西部时区的观众重复此刻。世界上所有人都同意该事件发生的 <code>绝对时间</code>。</p>
<p>另一方面，并非每个人都同意这个“民用时间”。民用时间表示为“六个独立字段”，分别表示年、月、日、小时、分钟和秒（即 YMDHMS）。这六个字段表示某些地方政府定义的时间。你的民用时间与挂在 Dilbert 墙上的时钟和你桌上的日历显示的值一致。你住在全国另一端的朋友，在同一时刻看到的民用时间可能不同。</p>
<p>例如，如果你住在纽约，你在 1969 年 7 月 20 日晚上 10:56 目睹了尼尔·阿姆斯特朗的小步，而你的旧金山朋友在同一时刻看到的是下午 7:56，你的悉尼笔友看到的是 1969 年 7 月 21 日中午 12:56。你们都同意事件的绝对时间，但民用时间不同。</p>
<p>时区是一个地缘政治区域，在该区域内，绝对时间和民用时间之间的转换规则是共享的。时区的地理特征可以从其标识符中看出，例如 <code>America/New_York</code>、<code>America/Los_Angeles</code> 和 <code>Australia/Sydney</code>。时区规则包括该区域相对于 UTC 标准的偏移、夏令时调整以及缩写字符串。由于这些规则可能随地方政府的决定而变化，历史上时区在特定时期可能有不同规则。时区非常复杂，因此应始终让时间库为你执行时区计算。</p>
<p>时区定义了绝对时间与民用时间之间的关系。给定一个绝对时间或民用时间以及时区，你可以计算出另一个，如下所示及图 1。</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">民用时间 = F(绝对时间, 时区)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">绝对时间 = F&#x27;(民用时间, 时区)</span><br></span></code></pre></div></div>
<!-- -->
<img src="data:image/png;base64,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">
<p>到目前为止描述的概念——绝对时间、民用时间和时区——是通用概念，适用于 <code>所有编程语言</code>，因为它们描述的是现实世界中的时间。不同编程语言和库可能使用不同的类甚至不同的名称来建模这些概念，但这些基本概念和关系保持不变。</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="turbotime-构造">turbo::Time 构造<a href="#turbotime-构造" class="hash-link" aria-label="turbo::Time 构造的直接链接" title="turbo::Time 构造的直接链接" translate="no">​</a></h2>
<p>Turbo 时间库包含几个核心类，它们映射到上述概念：</p>
<ul>
<li class="">绝对时间由 <code>turbo::Time</code> 类表示。（见 <a href="https://gitee.com/kumo-pub/turbo/blob/master/turbo/times/time.h" target="_blank" rel="noopener noreferrer" class="">time.h</a>）这是一个小型的类整数类型，应按值传递，并使用算术运算符和描述性函数进行计算。<code>turbo::Time</code> 可以通过转换函数与其他绝对时间表示进行相互转换，并在 <code>turbo::TimeZone</code> 的帮助下与民用时间表示进行相互转换。</li>
<li class="">民用时间由六个独立整数表示，指定 <code>turbo::Civil*</code> 对象的年、月、日、小时、分钟和秒，应按值传递。（见 <a href="https://gitee.com/kumo-pub/turbo/blob/master/turbo/times/civil_time.h" target="_blank" rel="noopener noreferrer" class="">civil_time.h</a>）这些整数值可以作为民用时间构造函数（如 <code>turbo::CivilYear</code> 或 <code>turbo::CivilSecond</code>）的参数，或从格式化时间字符串中解析。</li>
<li class="">时区由 <code>turbo::TimeZone</code> 类表示。（见 <a href="https://gitee.com/kumo-pub/turbo/blob/master/turbo/times/time.h" target="_blank" rel="noopener noreferrer" class="">time.h</a>）这是一个大部分不透明的值类型，通过值传递给其他 Turbo 时间函数，这些函数随后执行必要的绝对时间与民用时间转换。Turbo 时间库本身会处理所有时区运算，从而几乎消除了代码中的偏移计算错误。</li>
</ul>
<p>一个尚未讨论的重要辅助概念是固定长度的时间间隔，由 <code>turbo::Duration</code> 类表示。这是一个小型的类整数类型，应按值传递，并使用普通整数算术运算符进行计算。Turbo 时间库包含多个函数用于与其他持续时间类型相互转换以及执行浮点运算。持续时间是单位安全的，非常适合用于接受超时或其他固定长度时间间隔的接口。</p>
<p>图 2 展示了主要的 <code>Turbo Time</code> 类型，以及它们如何映射到前面描述的基本时间概念。</p>
<p><code>![Turbo Time Classes](images/turbo-time-classes.png)</code> 图 2</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="使用-turbotime-的绝对时间">使用 <code>turbo::Time</code> 的绝对时间<a href="#使用-turbotime-的绝对时间" class="hash-link" aria-label="使用-turbotime-的绝对时间的直接链接" title="使用-turbotime-的绝对时间的直接链接" translate="no">​</a></h2>
<p><code>turbo::Time</code> 表示某一特定时刻，以某个起点（纪元）为基础的某种粒度（分辨率）下的时钟计数。<code>turbo::Time</code> 应按值传递，而非按 const 引用传递。提供了算术运算符，以便自然地表达时间计算。</p>
<p>它适用于大多数可用的时间尺度（即精度至少为一纳秒，范围为 +/- 1000 亿年）。时间尺度之间的转换通过向下取整（向负无穷方向）到最接近的可表示点进行。</p>
<p><code>turbo::Time</code> 假设一分钟为 60 秒，这意味着底层时间尺度必须“平滑”以处理闰秒。详见 <a href="https://developers.google.com/time/smear%E3%80%82" target="_blank" rel="noopener noreferrer" class="">https://developers.google.com/time/smear。</a></p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="构造-turbotime">构造 <code>turbo::Time</code><a href="#构造-turbotime" class="hash-link" aria-label="构造-turbotime的直接链接" title="构造-turbotime的直接链接" translate="no">​</a></h3>
<p>可以直接构造 <code>turbo::Time</code> 实例：</p>
<div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// 使用系统时钟构造 turbo::Time。（见 clock.h）</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">turbo</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Time t1 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> turbo</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token class-name">Time</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">current_time</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// 默认构造产生 UNIX 纪元的绝对时间</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">turbo</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Time t2 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> turbo</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">Time</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// 为了清晰，建议直接构造此类时间</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">turbo</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Time t3 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> turbo</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token class-name">Time</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">unix_epoch</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p><code>turbo::Time</code> 值通常从其他值类型创建。Turbo 时间库包含众多 <code>turbo::Time::from_*()</code> 工厂函数，可接受其他时间表示。</p>
<div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// 从 time_t 构造 turbo::Time。time() 返回自 UNIX 纪元以来的秒数。</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">time_t tt </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">time</span><span class="token punctuation" style="color:#393A34">(</span><span class="token constant" style="color:#36acaa">NULL</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">turbo</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Time t1 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> turbo</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token class-name">Time</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">from_time_t</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">tt</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// 从 std::chrono 时间构造 turbo::Time</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">auto</span><span class="token plain"> tp </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">chrono</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">system_clock</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">from_time_t</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">123</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">turbo</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Time t2 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> turbo</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token class-name">Time</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">from_chrono</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">tp</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// 使用转换函数构造 turbo::Time。（假设 MyCustomTime() 返回自 UNIX 纪元以来的微秒数）</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">int64_t</span><span class="token plain"> unix_micros </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">MyCustomTime</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">turbo</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Time t3 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> turbo</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token class-name">Time</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">from_unix_micros</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">unix_micros</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// 从民用时间和时区构造 turbo::Time</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// （见下文这些类型的说明）</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">turbo</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">TimeZone nyc</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// TimeZone::load 可能失败，因此最好检查是否成功</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">!</span><span class="token plain">turbo</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token class-name">TimeZone</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">load</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;America/New_York&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">nyc</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// 处理错误</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// 我的航班在 2017 年 1 月 2 日 03:04:05 从 NYC 出发</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">turbo</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">CivilSecond </span><span class="token function" style="color:#d73a49">ct</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">2017</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">4</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">5</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">turbo</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Time takeoff </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> turbo</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token class-name">Time</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">from_civil</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ct</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> nyc</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p><code>turbo::Time</code> 可以获取未来或过去的时间。Turbo 时间库包含众多 <code>turbo::Time::future_*()</code> 工厂函数，可接受其他时间表示。</p>
<div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">static</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">constexpr</span><span class="token plain"> Time </span><span class="token function" style="color:#d73a49">future_infinite</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">static</span><span class="token plain"> Time </span><span class="token function" style="color:#d73a49">future_time</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">Duration d</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">static</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">int64_t</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">future_nanoseconds</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">int64_t</span><span class="token plain"> ns</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">static</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">int64_t</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">future_microseconds</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">int64_t</span><span class="token plain"> us</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">static</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">int64_t</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">future_milliseconds</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">int64_t</span><span class="token plain"> ms</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">static</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">int64_t</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">future_seconds</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">int64_t</span><span class="token plain"> s</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">static</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">constexpr</span><span class="token plain"> Time </span><span class="token function" style="color:#d73a49">past_infinite</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">static</span><span class="token plain"> Time </span><span class="token function" style="color:#d73a49">past_time</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">Duration d</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">static</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">int64_t</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">past_nanoseconds</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">int64_t</span><span class="token plain"> ns</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">static</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">int64_t</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">past_microseconds</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">int64_t</span><span class="token plain"> us</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">static</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">int64_t</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">past_milliseconds</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">int64_t</span><span class="token plain"> ms</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">static</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">int64_t</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">past_seconds</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">int64_t</span><span class="token plain"> s</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p>通过 <code>turbo::Time</code> 获取当前的纳秒、微秒：</p>
<div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">static</span><span class="token plain"> Time </span><span class="token function" style="color:#d73a49">current_time</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">static</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">int64_t</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">current_nanoseconds</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">static</span><span class="token plain"> T </span><span class="token function" style="color:#d73a49">current_microseconds</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">static</span><span class="token plain"> T </span><span class="token function" style="color:#d73a49">current_milliseconds</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">static</span><span class="token plain"> T </span><span class="token function" style="color:#d73a49">current_seconds</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="格式化-turbotime">格式化 <code>turbo::Time</code><a href="#格式化-turbotime" class="hash-link" aria-label="格式化-turbotime的直接链接" title="格式化-turbotime的直接链接" translate="no">​</a></h3>
<p>提供了格式化和解析函数，用于在字符串与时间之间进行转换。<code>FormatTime()</code> 可以接受一个绝对时间和一个时区，并返回表示该时间的字符串。（见下文 <a href="#time-zones" class="">时区</a> 说明。）</p>
<div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// 使用系统时钟构造 turbo::Time。</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">turbo</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Time t1 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> turbo</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token class-name">Time</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">current_time</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// 格式化时间时，应传入一个时区。</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">turbo</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">TimeZone utc </span><span class="token operator" style="color:#393A34">=</span><span class="token plain">  turbo</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">UTCTimeZone</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">cout </span><span class="token operator" style="color:#393A34">&lt;&lt;</span><span class="token plain"> turbo</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token class-name">Time</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">format_time</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">t1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> utc</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// 输出示例: &quot;2018-08-06T23:35:32.637472794+00:00&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// turbo::Time 的流操作符使用 turbo::Time::format_time()，默认使用</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// turbo::TimeZone::local()。建议直接使用显式指定时区的 turbo::Time::format_time()，如上所示。</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">cout </span><span class="token operator" style="color:#393A34">&lt;&lt;</span><span class="token plain"> t1 </span><span class="token operator" style="color:#393A34">&lt;&lt;</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;\n&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// 输出示例: &quot;2018-08-06T17:35:32.637472794-04:00&quot;</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="time-durations">时间持续量<a href="#time-durations" class="hash-link" aria-label="时间持续量的直接链接" title="时间持续量的直接链接" translate="no">​</a></h2>
<p><code>turbo::Duration</code> 表示有符号的固定长度时间间隔。<code>Duration</code> 可以通过单位特定的工厂函数生成，或者由两个 <code>turbo::Time</code> 相减得到。
持续量行为类似单位安全的整数，支持所有自然的整数算术运算。算术溢出时将饱和到 +/- 无限大。<code>Duration</code> 应按值传递，而非按 const 引用。</p>
<p>工厂函数 <code>Duration::nanoseconds()</code>、<code>Duration::microseconds()</code>、<code>Duration::milliseconds()</code>、<code>Duration::seconds()</code>、<code>Duration::minutes()</code>、<code>Duration::hours()</code> 和 <code>Duration::infinite_duration()</code> 可用于创建 <code>constexpr</code> 的 <code>Duration</code> 值。</p>
<div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">constexpr</span><span class="token plain"> turbo</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Duration ten_ns </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> turbo</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token class-name">Duration</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">nanoseconds</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">10</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">constexpr</span><span class="token plain"> turbo</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Duration min </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> turbo</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token class-name">Duration</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">minutes</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">constexpr</span><span class="token plain"> turbo</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Duration hour </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> turbo</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token class-name">Duration</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">hours</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">turbo</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Duration dur </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">60</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> min</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// dur == hour</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">turbo</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Duration half_sec </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> turbo</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token class-name">Duration</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">milliseconds</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">500</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">turbo</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Duration quarter_sec </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.25</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> turbo</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token class-name">Duration</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">seconds</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p><code>Duration</code> 值可以通过除法运算轻松转换为整数单位。</p>
<div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">constexpr</span><span class="token plain"> turbo</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Duration dur </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> turbo</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token class-name">Duration</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">milliseconds</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1500</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">int64_t</span><span class="token plain"> ns </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> dur </span><span class="token operator" style="color:#393A34">/</span><span class="token plain"> turbo</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token class-name">Duration</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">nanoseconds</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">   </span><span class="token comment" style="color:#999988;font-style:italic">// ns == 1500000000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">int64_t</span><span class="token plain"> ms </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> dur </span><span class="token operator" style="color:#393A34">/</span><span class="token plain"> turbo</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token class-name">Duration</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">milliseconds</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// ms == 1500</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">int64_t</span><span class="token plain"> sec </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> dur </span><span class="token operator" style="color:#393A34">/</span><span class="token plain"> turbo</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token class-name">Duration</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">seconds</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">// sec == 1 (小数部分被截断)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">int64_t</span><span class="token plain"> min </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> dur </span><span class="token operator" style="color:#393A34">/</span><span class="token plain"> turbo</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token class-name">Duration</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">minutes</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">// min == 0</span><br></span></code></pre></div></div>
<p>此外，Turbo 时间库提供了将持续量值转换为 <code>int64_t</code> 或 <code>double</code> 的辅助函数：</p>
<ul>
<li class=""><code>Duration::to_int64_nanoseconds()</code> 和 <code>Duration::to_double_nanoseconds()</code></li>
<li class=""><code>Duration::to_int64_microseconds()</code> 和 <code>Duration::to_double_microseconds()</code></li>
<li class=""><code>Duration::to_int64_milliseconds()</code> 和 <code>Duration::to_double_milliseconds()</code></li>
<li class=""><code>Duration::to_int64_seconds()</code> 和 <code>Duration::to_double_seconds()</code></li>
<li class=""><code>Duration::to_int64_minutes()</code> 和 <code>Duration::to_double_minutes()</code></li>
<li class=""><code>Duration::to_int64_hours()</code> 和 <code>Duration::to_double_hours()</code></li>
</ul>
<div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">turbo</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Duration d </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> turbo</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token class-name">Duration</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">milliseconds</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1500</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">int64_t</span><span class="token plain"> isec </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> turbo</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token class-name">Duration</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">to_int64_seconds</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">d</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// isec == 1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">turbo</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Duration d </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> turbo</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token class-name">Duration</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">milliseconds</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1500</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">double</span><span class="token plain"> dsec </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> turbo</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token class-name">Duration</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">to_double_seconds</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">d</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// dsec == 1.5</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="civil-times">民用时间<a href="#civil-times" class="hash-link" aria-label="民用时间的直接链接" title="民用时间的直接链接" translate="no">​</a></h2>
<p>“民用时间”指法律上认可的人类尺度时间，由六个字段表示：“YYYY-MM-DD hh:mm<!-- -->:ss<!-- -->”。
“日期”可能是民用时间最常见的例子。现代民用时间遵循公历，并且与时区无关：例如，“2016-06-01 12:00:00”的民用时间不依赖于时区。换句话说，民用时间不会映射到唯一的绝对时间；民用时间必须通过时区映射到绝对时间。</p>
<p>由于民用时间是大多数人理解的“时间”，绝对时间通常会映射到民用时间以供用户显示。Turbo 时间库允许从绝对时间构造民用时间；相关函数见 <a href="https://gitee.com/kumo-pub/turbo/blob/master/turbo/times/time.h" target="_blank" rel="noopener noreferrer" class="">time.h</a>。</p>
<p>该库提供了六个类用于构造民用时间对象，同时提供若干辅助函数用于四舍五入、迭代及在民用时间对象上执行算术运算，同时避免夏令时（DST）等复杂性：</p>
<ul>
<li class=""><code>turbo::CivilSecond</code></li>
<li class=""><code>turbo::CivilMinute</code></li>
<li class=""><code>turbo::CivilHour</code></li>
<li class=""><code>turbo::CivilDay</code></li>
<li class=""><code>turbo::CivilMonth</code></li>
<li class=""><code>turbo::CivilYear</code></li>
</ul>
<p>建议按值传递这些 <code>turbo::Civil*</code> 类型，而非按 const 引用。</p>
<p>每种民用时间类型都是简单的值类型，具有相同的构造接口和六个字段的访问器（年、月、日、小时、分钟、秒，即 YMDHMS）。
各类仅在对齐方式上不同，对齐方式由类型名指示，并指定算术操作作用的字段。</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="civil-time-construction">民用时间构造<a href="#civil-time-construction" class="hash-link" aria-label="民用时间构造的直接链接" title="民用时间构造的直接链接" translate="no">​</a></h3>
<p>每种民用时间类型可以通过两种方式构造：</p>
<ol>
<li class="">直接向构造函数传入最多六个整数，表示 YMDHMS 字段；</li>
<li class="">从对齐方式不同的民用时间类型复制 YMDHMS 字段。</li>
</ol>
<p>省略的字段将被赋予最小有效值。小时、分钟、秒设为 0，月和日设为 1。由于没有最小年份，默认为 1970。</p>
<div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">turbo</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">CivilDay default_value</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">               </span><span class="token comment" style="color:#999988;font-style:italic">// 1970-01-01 00:00:00</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// 构造特定日期的民用时间对象</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">turbo</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">CivilDay </span><span class="token function" style="color:#d73a49">a</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">2015</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">               </span><span class="token comment" style="color:#999988;font-style:italic">// 2015-02-03 00:00:00</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">turbo</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">CivilDay </span><span class="token function" style="color:#d73a49">b</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">2015</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">4</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">5</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">6</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">// 2015-02-03 04:05:06</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">turbo</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">CivilDay </span><span class="token function" style="color:#d73a49">c</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">2015</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">                     </span><span class="token comment" style="color:#999988;font-style:italic">// 2015-01-01 00:00:00</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// 构造特定秒的民用时间对象</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">turbo</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">CivilSecond </span><span class="token function" style="color:#d73a49">ss</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">2015</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">4</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">5</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">6</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// 2015-02-03 04:05:06</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">turbo</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">CivilMinute </span><span class="token function" style="color:#d73a49">mm</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ss</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">                   </span><span class="token comment" style="color:#999988;font-style:italic">// 2015-02-03 04:05:00</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">turbo</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">CivilHour </span><span class="token function" style="color:#d73a49">hh</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">mm</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">                     </span><span class="token comment" style="color:#999988;font-style:italic">// 2015-02-03 04:00:00</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">turbo</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">CivilDay </span><span class="token function" style="color:#d73a49">d</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">hh</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">                       </span><span class="token comment" style="color:#999988;font-style:italic">// 2015-02-03 00:00:00</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">turbo</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">CivilMonth </span><span class="token function" style="color:#d73a49">m</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">d</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">                      </span><span class="token comment" style="color:#999988;font-style:italic">// 2015-02-01 00:00:00</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">turbo</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">CivilYear </span><span class="token function" style="color:#d73a49">y</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">m</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">                       </span><span class="token comment" style="color:#999988;font-style:italic">// 2015-01-01 00:00:00</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">m </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> turbo</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">CivilMonth</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">y</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">                    </span><span class="token comment" style="color:#999988;font-style:italic">// 2015-01-01 00:00:00</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">d </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> turbo</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">CivilDay</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">m</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">                      </span><span class="token comment" style="color:#999988;font-style:italic">// 2015-01-01 00:00:00</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">hh </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> turbo</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">CivilHour</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">d</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">                    </span><span class="token comment" style="color:#999988;font-style:italic">// 2015-01-01 00:00:00</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mm </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> turbo</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">CivilMinute</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">hh</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">                 </span><span class="token comment" style="color:#999988;font-style:italic">// 2015-01-01 00:00:00</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ss </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> turbo</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">CivilSecond</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">mm</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">                 </span><span class="token comment" style="color:#999988;font-style:italic">// 2015-01-01 00:00:00</span><br></span></code></pre></div></div>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>注意</div><div class="admonitionContent_BuS1"><p>超出范围的字段会被归一化（例如 10 月 32 日 -&gt; 11 月 1 日），确保所有民用时间对象表示有效值。详情见 <a href="#normalization" class="">归一化</a>。</p></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="civil-time-alignment">民用时间对齐<a href="#civil-time-alignment" class="hash-link" aria-label="民用时间对齐的直接链接" title="民用时间对齐的直接链接" translate="no">​</a></h3>
<p>每个民用时间类根据类名中指示的字段进行对齐。对齐通过将所有下属字段设为最小有效值完成（如上所述）。
下例展示六种类型如何对齐 2015 年 11 月 22 日 12:34:56 的时间字段。（注：这里的字符串格式仅作为 YMDHMS 字段的简写示例。）</p>
<div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">turbo</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">CivilSecond   </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2015</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">11</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">22</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">12</span><span class="token operator" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">34</span><span class="token operator" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">56</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">turbo</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">CivilMinute   </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2015</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">11</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">22</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">12</span><span class="token operator" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">34</span><span class="token operator" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">00</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">turbo</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">CivilHour     </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2015</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">11</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">22</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">12</span><span class="token operator" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">00</span><span class="token operator" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">00</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">turbo</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">CivilDay      </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2015</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">11</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">22</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">00</span><span class="token operator" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">00</span><span class="token operator" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">00</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">turbo</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">CivilMonth    </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2015</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">11</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">01</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">00</span><span class="token operator" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">00</span><span class="token operator" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">00</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">turbo</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">CivilYear     </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2015</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">01</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">01</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">00</span><span class="token operator" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">00</span><span class="token operator" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">00</span><br></span></code></pre></div></div>
<p>每种民用时间类型对其指定的字段执行算术运算。这意味着给 <code>turbo::CivilDay</code> 加 1 会增加天字段（必要时归一化），而从 <code>turbo::CivilMonth</code> 减去 7 会操作月字段（必要时归一化）。所有算术运算均产生有效的民用时间。
差值运算符接受两个对齐方式相似的民用时间对象，并返回按对象对齐单位的标量结果。例如，两个 <code>turbo::CivilHour</code> 对象的差值将以民用小时为单位。</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="civil-time-conversions">民用时间转换<a href="#civil-time-conversions" class="hash-link" aria-label="民用时间转换的直接链接" title="民用时间转换的直接链接" translate="no">​</a></h3>
<p>民用时间对象的对齐方式不可更改，但可以用于构造新的不同对齐的对象。
这称为“重新对齐”。当重新对齐到相同或更高精度的类型（如 <code>turbo::CivilDay</code> -&gt; <code>turbo::CivilSecond</code>）时，可以隐式转换，因为不会丢失信息。然而，如果可能丢失信息（如 <code>turbo::CivilSecond</code> -&gt; <code>turbo::CivilDay</code>），则必须在调用处显式转换。</p>
<div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">UseDay</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">turbo</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">CivilDay day</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">turbo</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">CivilSecond cs</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">UseDay</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">cs</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">                  </span><span class="token comment" style="color:#999988;font-style:italic">// 编译失败，可能丢失数据</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">UseDay</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">turbo</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">CivilDay</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">cs</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// OK: 显式转换</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">turbo</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">CivilDay cd</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">UseDay</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">cd</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">                  </span><span class="token comment" style="color:#999988;font-style:italic">// OK: 无需转换</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">turbo</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">CivilMonth cm</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">UseDay</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">cm</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">                  </span><span class="token comment" style="color:#999988;font-style:italic">// OK: 隐式转换为 turbo::CivilDay</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="normalization">民用时间归一化<a href="#normalization" class="hash-link" aria-label="民用时间归一化的直接链接" title="民用时间归一化的直接链接" translate="no">​</a></h3>
<p>归一化会将无效值调整为有效值。在民用时间库中，传递给 <code>Civil*</code> 构造函数的整数参数可能超出范围，这时会通过进位到更粗粒度的字段生成有效的民用时间对象。归一化允许对构造函数参数进行自然算术运算，而无需担心字段范围。</p>
<div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// 超出范围；归一化为 2016-11-01</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">turbo</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">CivilDay </span><span class="token function" style="color:#d73a49">d</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">2016</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">10</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">32</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// 超出范围，负数；归一化为 2016-10-30T23</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">turbo</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">CivilHour </span><span class="token function" style="color:#d73a49">h1</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">2016</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">10</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">31</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// 归一化是累积的；归一化为 2016-10-30T23</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">turbo</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">CivilHour </span><span class="token function" style="color:#d73a49">h2</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">2016</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">10</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">32</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">25</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<hr>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="civil-time-comparisons">民用时间比较<a href="#civil-time-comparisons" class="hash-link" aria-label="民用时间比较的直接链接" title="民用时间比较的直接链接" translate="no">​</a></h3>
<p>民用时间对象的比较会考虑所有六个 YMDHMS 字段，而不管类型的对齐方式如何。不同对齐方式的民用时间类型之间也允许比较。</p>
<div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">turbo</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">CivilDay </span><span class="token function" style="color:#d73a49">feb_3</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">2015</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// 2015-02-03 00:00:00</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">turbo</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">CivilDay </span><span class="token function" style="color:#d73a49">mar_4</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">2015</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">4</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// 2015-03-04 00:00:00</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// feb_3 &lt; mar_4</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// turbo::CivilYear(feb_3) == turbo::CivilYear(mar_4)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">turbo</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">CivilSecond </span><span class="token function" style="color:#d73a49">feb_3_noon</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">2015</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">12</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// 2015-02-03 12:00:00</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// feb_3 &lt; feb_3_noon</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// feb_3 == turbo::CivilDay(feb_3_noon)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// 遍历 2015 年 2 月的所有天</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">turbo</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">CivilDay </span><span class="token function" style="color:#d73a49">d</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">2015</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> d </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> turbo</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">CivilMonth</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">2015</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">++</span><span class="token plain">d</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<hr>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="civil-time-arithmetic">民用时间算术<a href="#civil-time-arithmetic" class="hash-link" aria-label="民用时间算术的直接链接" title="民用时间算术的直接链接" translate="no">​</a></h3>
<p>民用时间类型支持自然算术运算符，如加法、减法和求差。算术运算在类型名指示的民用时间字段上进行。差值运算符要求参数具有相同对齐方式，返回值单位为该对齐字段单位。</p>
<div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">turbo</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">CivilDay </span><span class="token function" style="color:#d73a49">a</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">2015</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">++</span><span class="token plain">a</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">                              </span><span class="token comment" style="color:#999988;font-style:italic">// 2015-02-04 00:00:00</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">--</span><span class="token plain">a</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">                              </span><span class="token comment" style="color:#999988;font-style:italic">// 2015-02-03 00:00:00</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">turbo</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">CivilDay b </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> a </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">         </span><span class="token comment" style="color:#999988;font-style:italic">// 2015-02-04 00:00:00</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">turbo</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">CivilDay c </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> b</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">         </span><span class="token comment" style="color:#999988;font-style:italic">// 2015-02-05 00:00:00</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> n </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> c </span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> a</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">                    </span><span class="token comment" style="color:#999988;font-style:italic">// n = 2 (民用天数)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> m </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> c </span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> turbo</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">CivilMonth</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">c</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// 编译失败：类型不同</span><br></span></code></pre></div></div>
<hr>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="civil-time-accessors">民用时间访问器<a href="#civil-time-accessors" class="hash-link" aria-label="民用时间访问器的直接链接" title="民用时间访问器的直接链接" translate="no">​</a></h3>
<p>每个民用时间类型都提供访问所有六个字段的方法：</p>
<ul>
<li class=""><code>year()</code> 返回 <code>civil_year_t</code></li>
<li class=""><code>month()</code> 返回 <code>int</code></li>
<li class=""><code>day()</code> 返回 <code>int</code></li>
<li class=""><code>hour()</code> 返回 <code>int</code></li>
<li class=""><code>minute()</code> 返回 <code>int</code></li>
<li class=""><code>second()</code> 返回 <code>int</code></li>
</ul>
<p>注意，低于类型对齐字段的值会被设为最小有效值。</p>
<div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">turbo</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">CivilDay </span><span class="token function" style="color:#d73a49">d</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">2015</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">6</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">28</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// d.year() == 2015</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// d.month() == 6</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// d.day() == 28</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// d.hour() == 0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// d.minute() == 0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// d.second() == 0</span><br></span></code></pre></div></div>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="time-zones">时区<a href="#time-zones" class="hash-link" aria-label="时区的直接链接" title="时区的直接链接" translate="no">​</a></h2>
<p><code>turbo::TimeZone</code> 是一个小型值类型，表示地缘政治区域，其中使用特定规则在绝对时间和民用时间之间转换。
<code>turbo::TimeZone</code> 值使用 IANA 时区数据库中的 TZ 标识符命名，如 <code>&quot;America/Los_Angeles&quot;</code> 或 <code>&quot;Australia/Sydney&quot;</code>，可通过 <code>turbo::TimeZone::load()</code> 加载。</p>
<div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">turbo</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">TimeZone lax</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// 加载时区可能失败，建议检查返回值</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">!</span><span class="token plain">turbo</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token class-name">TimeZone</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">load</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;America/Los_Angeles&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">lax</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// 处理失败</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<p>建议按值传递 <code>turbo::TimeZone</code> 而非按 const 引用。</p>
<p>Turbo 时间库还提供几个便捷函数用于构造时区：</p>
<ul>
<li class=""><code>turbo::UTCTimeZone()</code></li>
<li class=""><code>turbo::FixedTimeZone(offset)</code> 以 UTC 偏移构造时区（尽量避免，适用于旧 API）。</li>
<li class=""><code>turbo::LocalTimeZone()</code> 构造本地时区（未知时默认为 UTC）。<strong>建议使用显式时区名</strong>。</li>
</ul>
<div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">turbo</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">TimeZone utc </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> turbo</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token class-name">TimeZone</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">utc</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">turbo</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">TimeZone pst </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> turbo</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">FixedTimeZone</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">8</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">60</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">60</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">turbo</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">TimeZone loc </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> turbo</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">LocalTimeZone</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="converting-between-absolute-and-civil-times">绝对时间与民用时间转换<a href="#converting-between-absolute-and-civil-times" class="hash-link" aria-label="绝对时间与民用时间转换的直接链接" title="绝对时间与民用时间转换的直接链接" translate="no">​</a></h2>
<p><code>turbo::TimeZone</code> 用于在 <code>turbo::Time</code> 与民用时间之间转换。
可以使用 <code>turbo::TimeZone::At()</code> 进行转换，也有辅助函数直接转换。</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="absolute-to-civil">绝对时间 -&gt; 民用时间<a href="#absolute-to-civil" class="hash-link" aria-label="绝对时间 -&gt; 民用时间的直接链接" title="绝对时间 -&gt; 民用时间的直接链接" translate="no">​</a></h3>
<div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">turbo</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Time t </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">turbo</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">TimeZone tz </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> turbo</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">CivilDay cd </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> turbo</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">ToCivilDay</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">t</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> tz</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p><code>TimeZone::at(Time)</code> 提供更多转换信息，包括子秒和 UTC 偏移。如果时间是无限值，会返回最大或最小的民用秒，并且子秒为无限。</p>
<div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">turbo</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">TimeZone lax</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">turbo</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token class-name">TimeZone</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">load</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;America/Los_Angeles&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">lax</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> turbo</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">TimeZone</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">CivilInfo epoch_info </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> lax</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">at</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">turbo</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token class-name">Time</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">unix_epoch</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// epoch_info.cs        == 1969-12-31 16:00:00</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// epoch_info.subsecond == turbo::ZeroDuration()</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// epoch_info.offset    == -28800</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// epoch_info.is_dst    == false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// epoch_info.abbr      == &quot;PST&quot;</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="civil-to-absolute">民用时间 -&gt; 绝对时间<a href="#civil-to-absolute" class="hash-link" aria-label="民用时间 -&gt; 绝对时间的直接链接" title="民用时间 -&gt; 绝对时间的直接链接" translate="no">​</a></h3>
<p>转换民用时间到绝对时间时需小心，因为某些民用时间可能不存在或不唯一（如夏令时跳过或重复的时间）。</p>
<ul>
<li class="">
<p><code>FromCivil()</code> 将任何对齐的民用时间转换为绝对时间：</p>
</li>
<li class="">
<p>唯一时间 -&gt; 返回该时间</p>
</li>
<li class="">
<p>重复时间 -&gt; 返回较早时间</p>
</li>
<li class="">
<p>跳过时间 -&gt; 返回过渡时间</p>
</li>
</ul>
<div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">turbo</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">CivilSecond cs </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">turbo</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">TimeZone tz </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">turbo</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Time t </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> turbo</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">FromCivil</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">cs</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> tz</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p><code>TimeZone::at(CivilSecond)</code> 提供完整转换信息：</p>
<ul>
<li class=""><code>pre</code>：过渡前时间</li>
<li class=""><code>post</code>：过渡后时间</li>
<li class=""><code>trans</code>：过渡时刻</li>
<li class=""><code>kind</code>：转换类型，值为 <code>UNIQUE</code>、<code>REPEATED</code> 或 <code>SKIPPED</code></li>
</ul>
<p>示例：</p>
<div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// 唯一时间</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">auto</span><span class="token plain"> jan01 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> lax</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">At</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">turbo</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">CivilSecond</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">2011</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// jan01.kind == UNIQUE</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// 被跳过的时间（DST spring forward）</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">auto</span><span class="token plain"> mar13 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> lax</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">At</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">turbo</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">CivilSecond</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">2011</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">13</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">15</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// mar13.kind == SKIPPED</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// 被重复的时间（DST fall back）</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">auto</span><span class="token plain"> nov06 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> lax</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">At</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">turbo</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">CivilSecond</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">2011</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">11</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">6</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">15</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// nov06.kind == REPEATED</span><br></span></code></pre></div></div>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="proper-time-hygiene">正确的时间使用习惯<a href="#proper-time-hygiene" class="hash-link" aria-label="正确的时间使用习惯的直接链接" title="正确的时间使用习惯的直接链接" translate="no">​</a></h2>
<ul>
<li class="">在系统内部及接口中尽量使用 Turbo 时间类型。</li>
<li class="">仅在系统边界进行类型转换。</li>
<li class=""><strong>不要</strong>手动使用时区偏移进行计算，让 Turbo 时间库处理。</li>
<li class="">使用显式时区名，避免“本地时间”假设。</li>
<li class="">尽量让代码与时区无关，如无法避免，推荐使用 UTC。</li>
<li class="">时间字符串包含偏移 <code>%z</code>，推荐 RFC3339/ISO8601 格式（如 <code>turbo::RFC3339_full</code>）。</li>
<li class="">使用 <code>turbo::Time::format_time</code> 格式化时间，<code>turbo::Time::parse_time</code> 解析时间。</li>
</ul></div></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="文件选项卡"><a class="pagination-nav__link pagination-nav__link--prev" href="/cppdev/zh-cn/docs/foundamentals/log/flags"><div class="pagination-nav__sublabel">上一页</div><div class="pagination-nav__label">配置日志</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/cppdev/zh-cn/docs/category/standardized-errors-and-error-return-values"><div class="pagination-nav__sublabel">下一页</div><div class="pagination-nav__label">Standardized Errors and Error Return Values</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#fundamental-concepts" class="table-of-contents__link toc-highlight">基本概念</a></li><li><a href="#turbotime-构造" class="table-of-contents__link toc-highlight">turbo::Time 构造</a></li><li><a href="#使用-turbotime-的绝对时间" class="table-of-contents__link toc-highlight">使用 <code>turbo::Time</code> 的绝对时间</a><ul><li><a href="#构造-turbotime" class="table-of-contents__link toc-highlight">构造 <code>turbo::Time</code></a></li><li><a href="#格式化-turbotime" class="table-of-contents__link toc-highlight">格式化 <code>turbo::Time</code></a></li></ul></li><li><a href="#time-durations" class="table-of-contents__link toc-highlight">时间持续量</a></li><li><a href="#civil-times" class="table-of-contents__link toc-highlight">民用时间</a><ul><li><a href="#civil-time-construction" class="table-of-contents__link toc-highlight">民用时间构造</a></li><li><a href="#civil-time-alignment" class="table-of-contents__link toc-highlight">民用时间对齐</a></li><li><a href="#civil-time-conversions" class="table-of-contents__link toc-highlight">民用时间转换</a></li><li><a href="#normalization" class="table-of-contents__link toc-highlight">民用时间归一化</a></li><li><a href="#civil-time-comparisons" class="table-of-contents__link toc-highlight">民用时间比较</a></li><li><a href="#civil-time-arithmetic" class="table-of-contents__link toc-highlight">民用时间算术</a></li><li><a href="#civil-time-accessors" class="table-of-contents__link toc-highlight">民用时间访问器</a></li></ul></li><li><a href="#time-zones" class="table-of-contents__link toc-highlight">时区</a></li><li><a href="#converting-between-absolute-and-civil-times" class="table-of-contents__link toc-highlight">绝对时间与民用时间转换</a><ul><li><a href="#absolute-to-civil" class="table-of-contents__link toc-highlight">绝对时间 -&gt; 民用时间</a></li><li><a href="#civil-to-absolute" class="table-of-contents__link toc-highlight">民用时间 -&gt; 绝对时间</a></li></ul></li><li><a href="#proper-time-hygiene" class="table-of-contents__link toc-highlight">正确的时间使用习惯</a></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/cppdev/zh-cn/docs/intro">Tutorial</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://x.com/jefflothar" target="_blank" rel="noopener noreferrer" class="footer__link-item">X<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/cppdev/zh-cn/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/kumo-pub" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2026 Kumo, Inc.</div></div></div></footer></div>
</body>
</html>