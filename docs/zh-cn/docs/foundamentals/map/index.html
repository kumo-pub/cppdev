<!doctype html>
<html lang="zh-cn" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-foundamentals/map/index" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.2">
<title data-rh="true">High-Performance Map Container Selection Guide | Kumo Foundamental</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://your-docusaurus-site.example.com/cppdev/zh-cn/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://your-docusaurus-site.example.com/cppdev/zh-cn/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://your-docusaurus-site.example.com/cppdev/zh-cn/docs/foundamentals/map/"><meta data-rh="true" property="og:locale" content="zh_cn"><meta data-rh="true" property="og:locale:alternate" content="en_GB"><meta data-rh="true" name="docusaurus_locale" content="zh-cn"><meta data-rh="true" name="docsearch:language" content="zh-cn"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="High-Performance Map Container Selection Guide | Kumo Foundamental"><meta data-rh="true" name="description" content="I. Containers and Their Underlying Technical Characteristics"><meta data-rh="true" property="og:description" content="I. Containers and Their Underlying Technical Characteristics"><link data-rh="true" rel="icon" href="/cppdev/zh-cn/img/favicon.svg"><link data-rh="true" rel="canonical" href="https://your-docusaurus-site.example.com/cppdev/zh-cn/docs/foundamentals/map/"><link data-rh="true" rel="alternate" href="https://your-docusaurus-site.example.com/cppdev/docs/foundamentals/map/" hreflang="en-GB"><link data-rh="true" rel="alternate" href="https://your-docusaurus-site.example.com/cppdev/zh-cn/docs/foundamentals/map/" hreflang="zh-cn"><link data-rh="true" rel="alternate" href="https://your-docusaurus-site.example.com/cppdev/docs/foundamentals/map/" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Foundamentals","item":"https://your-docusaurus-site.example.com/cppdev/zh-cn/docs/category/foundamentals"},{"@type":"ListItem","position":2,"name":"Map Containers","item":"https://your-docusaurus-site.example.com/cppdev/zh-cn/docs/foundamentals/map/"}]}</script><link rel="alternate" type="application/rss+xml" href="/cppdev/zh-cn/blog/rss.xml" title="Kumo Foundamental RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/cppdev/zh-cn/blog/atom.xml" title="Kumo Foundamental Atom Feed"><link rel="stylesheet" href="/cppdev/zh-cn/assets/css/styles.a7490ef4.css">
<script src="/cppdev/zh-cn/assets/js/runtime~main.84ee4f51.js" defer="defer"></script>
<script src="/cppdev/zh-cn/assets/js/main.3113f152.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")),document.documentElement.setAttribute("data-theme-choice",t||"system")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/cppdev/zh-cn/img/kumo-logo.svg"><div role="region" aria-label="跳到主要内容"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">跳到主要内容</a></div><nav aria-label="主导航" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="切换导航栏" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/cppdev/zh-cn/"><div class="navbar__logo"><img src="/cppdev/zh-cn/img/kumo-logo.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/cppdev/zh-cn/img/kumo-logo.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">My Site</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/cppdev/zh-cn/docs/intro">教程</a><a class="navbar__item navbar__link" href="/cppdev/zh-cn/docs/integration/overview">Integration</a><a class="navbar__item navbar__link" href="/cppdev/zh-cn/blog">Blog</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_nlXk"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>中文（中国）</a><ul class="dropdown__menu"><li><a href="/cppdev/docs/foundamentals/map/" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="en-GB">English</a></li><li><a href="/cppdev/zh-cn/docs/foundamentals/map/" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="zh-cn">中文（中国）</a></li></ul></div><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="切换浅色/暗黑模式（当前为system mode）"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="回到顶部" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="文档侧边栏" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/cppdev/zh-cn/docs/intro"><span title="介绍" class="linkLabel_WmDU">介绍</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--active" href="/cppdev/zh-cn/docs/category/foundamentals"><span title="Foundamentals" class="categoryLinkLabel_W154">Foundamentals</span></a><button aria-label="折叠侧边栏分类 &#x27;Foundamentals&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" tabindex="0" href="/cppdev/zh-cn/docs/foundamentals/testing/"><span title="Performance Testing and Unit Testing" class="categoryLinkLabel_W154">Performance Testing and Unit Testing</span></a><button aria-label="展开侧边栏分类 &#x27;Performance Testing and Unit Testing&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" tabindex="0" href="/cppdev/zh-cn/docs/foundamentals/log/"><span title="Log Section" class="categoryLinkLabel_W154">Log Section</span></a><button aria-label="展开侧边栏分类 &#x27;Log Section&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cppdev/zh-cn/docs/foundamentals/time"><span title="Time and Calendar" class="linkLabel_WmDU">Time and Calendar</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" tabindex="0" href="/cppdev/zh-cn/docs/category/standardized-errors-and-error-return-values"><span title="Standardized Errors and Error Return Values" class="categoryLinkLabel_W154">Standardized Errors and Error Return Values</span></a><button aria-label="展开侧边栏分类 &#x27;Standardized Errors and Error Return Values&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" tabindex="0" href="/cppdev/zh-cn/docs/foundamentals/strings/"><span title="strings operations" class="categoryLinkLabel_W154">strings operations</span></a><button aria-label="展开侧边栏分类 &#x27;strings operations&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cppdev/zh-cn/docs/foundamentals/flags"><span title="Turbo Command-Line Flags (Turbo Flags)" class="linkLabel_WmDU">Turbo Command-Line Flags (Turbo Flags)</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" tabindex="0" href="/cppdev/zh-cn/docs/foundamentals/codec/"><span title="Codec" class="categoryLinkLabel_W154">Codec</span></a><button aria-label="展开侧边栏分类 &#x27;Codec&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cppdev/zh-cn/docs/foundamentals/format/"><span title="Format &amp; Output (String Formatting and Output)" class="linkLabel_WmDU">Format &amp; Output (String Formatting and Output)</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible menu__list-item-collapsible--active"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--active" aria-current="page" tabindex="0" href="/cppdev/zh-cn/docs/foundamentals/map/"><span title="Map Containers" class="categoryLinkLabel_W154">Map Containers</span></a><button aria-label="折叠侧边栏分类 &#x27;Map Containers&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/cppdev/zh-cn/docs/foundamentals/map/turbo_hash"><span title="Turbo Hash Containers" class="linkLabel_WmDU">Turbo Hash Containers</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/cppdev/zh-cn/docs/foundamentals/map/concurrent_hash_map"><span title="concurrent_hash_map" class="linkLabel_WmDU">concurrent_hash_map</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/cppdev/zh-cn/docs/foundamentals/map/pmap"><span title="Introduction to parallel-hashmap: High-Performance, Thread-Safe, Memory-Efficient Hash Tables and B-Trees" class="linkLabel_WmDU">Introduction to parallel-hashmap: High-Performance, Thread-Safe, Memory-Efficient Hash Tables and B-Trees</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/cppdev/zh-cn/docs/foundamentals/map/benchmark"><span title="C++ Hashmap Benchmark" class="linkLabel_WmDU">C++ Hashmap Benchmark</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" tabindex="0" href="/cppdev/zh-cn/docs/foundamentals/compress/"><span title="Compression" class="categoryLinkLabel_W154">Compression</span></a><button aria-label="展开侧边栏分类 &#x27;Compression&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" tabindex="0" href="/cppdev/zh-cn/docs/foundamentals/fibers/"><span title="Fiber And Future" class="categoryLinkLabel_W154">Fiber And Future</span></a><button aria-label="展开侧边栏分类 &#x27;Fiber And Future&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" tabindex="0" href="/cppdev/zh-cn/docs/foundamentals/monitor/"><span title="monitor" class="categoryLinkLabel_W154">monitor</span></a><button aria-label="展开侧边栏分类 &#x27;monitor&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" tabindex="0" href="/cppdev/zh-cn/docs/foundamentals/filesystem/"><span title="filesystem" class="categoryLinkLabel_W154">filesystem</span></a><button aria-label="展开侧边栏分类 &#x27;filesystem&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" tabindex="0" href="/cppdev/zh-cn/docs/foundamentals/json/"><span title="json" class="categoryLinkLabel_W154">json</span></a><button aria-label="展开侧边栏分类 &#x27;json&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/cppdev/zh-cn/docs/rpc/"><span title="rpc" class="categoryLinkLabel_W154">rpc</span></a><button aria-label="展开侧边栏分类 &#x27;rpc&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/cppdev/zh-cn/docs/retrieve/"><span title="Retrieve" class="categoryLinkLabel_W154">Retrieve</span></a><button aria-label="展开侧边栏分类 &#x27;Retrieve&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/cppdev/zh-cn/docs/store/"><span title="store" class="categoryLinkLabel_W154">store</span></a><button aria-label="展开侧边栏分类 &#x27;store&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/cppdev/zh-cn/docs/ir/"><span title="IR" class="categoryLinkLabel_W154">IR</span></a><button aria-label="展开侧边栏分类 &#x27;IR&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/cppdev/zh-cn/docs/advance/"><span title="advance" class="categoryLinkLabel_W154">advance</span></a><button aria-label="展开侧边栏分类 &#x27;advance&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="页面路径"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="主页面" class="breadcrumbs__link" href="/cppdev/zh-cn/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/cppdev/zh-cn/docs/category/foundamentals"><span>Foundamentals</span></a></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Map Containers</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">本页总览</button></div><div class="theme-doc-markdown markdown"><header><h1>High-Performance Map Container Selection Guide</h1></header>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="i-containers-and-their-underlying-technical-characteristics">I. Containers and Their Underlying Technical Characteristics<a href="#i-containers-and-their-underlying-technical-characteristics" class="hash-link" aria-label="I. Containers and Their Underlying Technical Characteristics的直接链接" title="I. Containers and Their Underlying Technical Characteristics的直接链接" translate="no">​</a></h2>
<p>The core value of ordered containers lies in supporting range queries and ordered traversal. The technical differences between the two mainstream containers stem from their underlying storage structures, which directly determine their performance boundaries and applicable scenarios.</p>
<p>turbo::btree_map/set is implemented based on a <strong>variant of B+ tree</strong>. Compared with the red-black tree of <code>std::map</code>, its node structure has been specially optimized—non-leaf nodes only store key-value indexes instead of complete data, while leaf nodes are linked through a doubly linked list, with all data concentrated in the leaf layer. This structure allows batch loading of consecutive leaf nodes during a single range query, significantly reducing the number of CPU memory accesses, and the cache hit rate is over 30% higher than that of red-black trees. Its expansion adopts a <strong>batch progressive migration</strong> strategy, which avoids business blocking caused by a large number of node rotations like red-black trees, and can maintain more stable write performance in scenarios with millions of Key insertions. In terms of C++17 compatibility, it natively supports <code>std::string_view</code> as the Key, eliminating the need for intermediate copying via <code>std::string</code>, and is compatible with structured binding syntax, so there&#x27;s no need to manually call <code>first</code> and <code>second</code> when traversing key-value pairs. The core reason for the permanent stability of iterators is that insertion and deletion operations only adjust node pointers without moving the memory addresses of existing data. However, the index structure of non-leaf nodes brings about a 10% additional memory overhead, which accounts for a higher proportion in small dataset scenarios (fewer than 10,000 Keys), making it difficult to reflect its advantages.</p>
<p>tsl::ordered_map/set adopts a <strong>hybrid architecture of hash table + doubly linked list</strong>. The hash table provides O(1)-level fast lookup capabilities, while the doubly linked list maintains the insertion order of data to achieve the requirement of &quot;unordered insertion and ordered traversal&quot;. Its hash buckets use <strong>chaining</strong> to resolve conflicts, but the linked list nodes are optimized with cache line padding—each node&#x27;s size is aligned to 64 bytes to avoid false sharing caused by multiple nodes being squeezed into the same cache line. This makes its lookup performance about 20% higher than traditional chaining implementations. However, this container has an obvious technical shortcoming: it needs to rebuild the mapping relationship between hash buckets and linked list nodes during expansion. This process will cause temporary performance jitter, which is more obvious in high-frequency insertion scenarios with tens of thousands of operations per second. Therefore, it is more suitable for mixed scenarios with moderate insertion frequency and requirements for traversal order.</p>
<p>Unordered hash containers are the mainstream choice in projects. The differences in conflict resolution mechanisms and memory layouts among containers with different algorithms are the core factors determining their performance and applicable scenarios.</p>
<p>turbo::flat_hash_map/set with flat algorithm adopts <strong>open addressing + quadratic probing strategy</strong>. All key-value pairs are stored in a continuous memory array, eliminating the pointer overhead of linked list nodes in traditional chaining. It chooses quadratic probing instead of linear probing as the probing strategy, aiming to avoid the &quot;clustering effect&quot; of linear probing—where conflicting elements cluster together, leading to a sharp increase in probing steps. The step size of quadratic probing is <code>i²</code> (where <code>i</code> is the number of probes), which can distribute conflicting elements more evenly in the array. In terms of memory layout, it strictly follows <strong>64-byte cache line alignment</strong>, and the size of each data block is adapted to the CPU&#x27;s cache reading granularity, making the cache hit rate of small objects close to 100%, far higher than that of containers with linked list structures. In terms of C++17 feature support, its <code>emplace</code> operation implements <strong>perfect forwarding</strong>, which can directly construct objects in the memory array, avoiding the redundant step of &quot;constructing temporary objects first and then copying&quot; in the Abseil version. As a result, the insertion performance of small objects is improved by more than 15%. It should be noted that the invalidation of its iterators stems from memory reallocation during expansion—the address of the new array is different from the original array, and the original memory address pointed to by the iterator becomes invalid. Therefore, it is necessary to call <code>reserve</code> to preallocate sufficient space before batch insertion. In addition, its hash seed is stored in <strong>Thread Local Storage (TLS)</strong>, and the TLS spaces of different processes are isolated from each other, leading to inconsistent hash values across processes and making it impossible to be directly used in serialization scenarios.</p>
<p>The core technology of F14 algorithm containers (folly::F14Map/Set, melon::F14Map/Set) is the <strong>hybrid addressing mechanism</strong>, whose core design goal is to balance cache friendliness at low load and conflict resolution capabilities at high load. When the load factor is lower than 0.5, it uses open addressing; when the load factor exceeds 0.5, it automatically switches to chaining. This switching threshold is verified through a large number of actual tests—0.5 is the critical point of the cache advantage of open addressing, and the conflict probability will increase significantly beyond this point. It supports a high load factor of up to 0.9, which benefits from the <strong>segmented hash bucket design</strong>: the entire hash table is divided into multiple independent segments, and each segment handles conflicts independently, avoiding performance degradation caused by global conflicts. In terms of serialization support, it has a built-in <strong>fixed hash seed</strong>, which is stored in the metadata area of the container and can be directly reused during cross-process deserialization, fundamentally solving the problem of hash stability. During project implementation, targeted fixes have been made for the high-concurrency deadlock problem of the Folly version—in the original implementation, when multiple threads lock different segments at the same time, lock order inversion may occur (thread 1 locks segment A first and then segment B, while thread 2 locks segment B first and then segment A). After the fix, all threads are forced to lock in the order of &quot;segment number from smallest to largest&quot;, completely eliminating deadlocks. The melon version has streamlined the metadata of Folly, removing non-core functions such as statistical monitoring, reducing the metadata memory usage by 20%, and is more suitable for scenarios with tight memory resources such as edge nodes.</p>
<p>The core competitiveness of tsl::robin_map/set lies in the <strong>Robin Hood hashing conflict resolution mechanism</strong>, which is an optimization for open addressing. In traditional open addressing, conflicting elements are placed in the next free bucket, causing elements to move further away from their ideal hash buckets and leading to a sharp increase in the number of probing steps during lookup. The core logic of Robin Hood hashing is &quot;fair competition&quot;—when inserting an element, calculate its &quot;distance&quot; from the ideal bucket. If this distance is greater than the distance of the existing element in the current bucket, swap their positions to keep the element with the greater distance in the current bucket. This swapping logic can make all elements as close to their ideal buckets as possible, significantly reducing the number of probing steps during lookup. In scenarios with long string Keys, due to the higher probability of hash conflicts, the effect of this optimization is more obvious—the number of probing steps is reduced by 40% compared with traditional chaining, and the conflict resolution efficiency is improved by 30%. Its hash algorithm adopts <strong>fixed FarmHash</strong> without random seeds, natively supporting cross-process serialization. At the same time, it is natively compatible with <code>std::string_view</code>, avoiding data copying without additional conversion, and has significant advantages in scenarios with a high proportion of string Keys.</p>
<p>turbo::node_hash_map/set adopts a <strong>structure of chaining + independent node storage</strong>. Each node contains a key-value pair and two pointers (prev and next). Insertion and deletion operations only need to adjust pointer directions without changing the memory address of the node, which is the core technical reason for the permanent stability of its iterators. The advantage of this structure is that it supports dynamic insertion and deletion of data during traversal, without the need to collect Keys first and then process them in batches like the flat algorithm. However, it has obvious shortcomings—scattered node storage will lead to a significant decrease in CPU cache hit rate. Because the memory addresses of nodes are discontinuous, after the CPU reads one node each time, the next node is likely not in the current cache line, requiring a new memory access. Actual test data shows that in small object scenarios, its cache miss rate is 13 percentage points higher than that of flat algorithm containers, and the performance is therefore about 30% lower, making it only suitable for scenarios with rigid requirements for iterator stability.</p>
<p>Atomic lock-free containers (folly::AtomicHashMap/Set, melon::AtomicHashMap/Set) are the optimal solution for high-concurrency read scenarios. Their core technology is <strong>fine-grained atomic operations + double-word CAS mechanism</strong>. Their hash table is divided into multiple segments, and the head of each segment is stored through an atomic variable. Read operations do not require locking and directly obtain the head pointer through <code>atomic_load</code>. In high-concurrency read scenarios with 32 threads, the QPS is more than 50% higher than that of locked containers. To address the classic ABA problem of atomic operations, it adopts a double-word CAS scheme of &quot;pointer + version number&quot;—each node&#x27;s pointer is accompanied by a 32-bit version number, which increments by 1 each time the node is modified. When a thread performs CAS, it not only compares the pointer value but also the version number, completely avoiding the problem where &quot;thread 1 reads A, thread 2 modifies A to B and then back to A, and thread 1 mistakenly judges that A has not been modified&quot;. On this basis, the melon version has made <strong>compressed storage optimization</strong>: using the free high-order space of 64-bit addresses (most systems only use 48-bit addresses), it packs a 16-bit version number and a 48-bit pointer into a 64-bit variable. Compared with Folly&#x27;s &quot;64-bit pointer + 64-bit version number&quot; scheme, the metadata memory usage is reduced by 50%, and the single-thread performance loss is only 3%, making it more suitable for resource-constrained scenarios such as edge nodes. It should be clearly stated that such containers are only applicable to <strong>read-heavy and write-light scenarios with a read-write ratio greater than 20:1</strong>. In high-concurrency write scenarios, multiple threads performing CAS on the head of the same segment will lead to a large number of retries and a sharp performance drop.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="ii-scenario-based-selection-and-technical-basis">II. Scenario-Based Selection and Technical Basis<a href="#ii-scenario-based-selection-and-technical-basis" class="hash-link" aria-label="II. Scenario-Based Selection and Technical Basis的直接链接" title="II. Scenario-Based Selection and Technical Basis的直接链接" translate="no">​</a></h2>
<p>For small dataset scenarios (such as function parameter passing and temporary data storage), turbo::flat_hash_map is preferred. The core technical basis is that its continuous memory layout has high memory utilization and does not require frequent node memory allocation during construction. In scenarios with 10,000 Keys, the construction speed is 30% faster than that of <code>std::unordered_map</code>. If no additional dependencies are desired, <code>std::unordered_map</code> can be used directly, as the performance difference between the two is negligible for small datasets.</p>
<p>For large dataset scenarios storing small objects, turbo::flat_hash_map is still the first choice. The technical reason is that its cache line alignment design can maximize CPU cache hit rate and reduce memory access overhead. During implementation, it is necessary to call <code>reserve</code> to preallocate space in advance. The recommended preallocation size is 1.2 times the actual data volume, which is a verified optimal threshold—it can avoid expansion while not wasting too much memory. If memory resources are tight and the data load factor is higher than 0.7, folly::F14Map can be selected because its hybrid addressing mechanism has more stable performance under high load.</p>
<p>For high-concurrency read and low-concurrency write scenarios (such as configuration caching and dictionary query), turbo::flat_hash_map is selected for single-machine environments based on the technical basis of its excellent lookup performance and low memory usage. In concurrent environments, if the Map data is completely independent, atomic lock-free containers are selected because their lock-free read feature can maximize concurrent performance. If the Map data is strongly bound to business data (such as counters and user status), the slot hash sharding scheme must be adopted. The technical reason is that the built-in locks of the container cannot be linked with business locks; forced use will lead to lock order inversion and deadlocks. Manual sharding can strictly control the order of &quot;locking business data first and then shard locks&quot;, balancing performance and data consistency.</p>
<p>For low-concurrency read and high-concurrency write scenarios (such as log burying points and data collection), folly::F14Map is selected for single-machine environments. The core technical basis is that its hybrid addressing mechanism has stable insertion and deletion performance under high load—with a load factor of 0.86, the average probing length is only 1.275, and the performance attenuation is less than 5%. If dynamic insertion and deletion of data during traversal are required, turbo::node_hash_map is selected because its iterator stability feature eliminates the need for additional Key processing. In concurrent environments, if the Map data is independent, pmap containers (if with built-in shard locks) are selected. The granularity of shard locks is finer than that of global locks, which can reduce lock contention. If the Map data is bound to business, slot hash sharding is selected, and the number of shards is recommended to be equal to the number of CPU cores to maximize multi-core parallel efficiency.</p>
<p>The selection for scenarios with special requirements must be closely linked to technical characteristics: when <code>std::string_view</code> is needed as a non-copy Key, tsl::robin_map is preferred because it natively supports it and has high hash conflict resolution efficiency. If turbo::flat_hash_map is used, a custom hash function based on <code>std::string_view</code> is required to avoid temporary copying. When stable iterators are needed for traversal and modification, turbo::node_hash_map is selected for single-machine environments, and pmap::flat_node_map is selected for concurrent independent Maps. For serialization or cross-process transmission, only F14, Robin, or atomic containers can be selected. The technical reason is that they support fixed hash seeds, ensuring cross-process hash consistency. For memory-sensitive embedded/edge node scenarios, turbo::flat_hash_map is preferred. If high load support is required, melon::F14Map is selected, benefiting from its streamlined metadata design.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="iii-coding-and-integration-technical-points">III. Coding and Integration Technical Points<a href="#iii-coding-and-integration-technical-points" class="hash-link" aria-label="III. Coding and Integration Technical Points的直接链接" title="III. Coding and Integration Technical Points的直接链接" translate="no">​</a></h2>
<p>In terms of iterator usage, the iterators of flat, F14, and Robin series containers will be invalidated due to expansion, with the core reason being memory address reallocation. Therefore, direct insertion and deletion during traversal are prohibited, and the Keys to be operated must be collected first before batch processing. Node series iterators are stable, but locks must be added in concurrent scenarios; otherwise, data races will occur, leading to node pointer confusion.</p>
<p>In terms of concurrent coding, for scenarios where Map is bound to business data, the number of shards in slot hash sharding must be equal to the number of CPU cores, and the locks and data of each shard must be aligned to 64-byte cache lines to avoid false sharing. The lock order must strictly follow &quot;business lock → shard lock&quot;, which is a necessary condition to avoid deadlocks. For scenarios where Map data is independent, atomic lock-free containers are selected for high-concurrency reads, and pmap containers with built-in shard locks are selected for high-concurrency writes. Encapsulating single-machine containers with <code>std::mutex</code> is prohibited. Actual tests show that the concurrent QPS of this scheme is only 60% of that of mature containers.</p>
<p>In terms of serialization coding, containers supporting fixed hash seeds are preferred, and the seed must be explicitly passed as a template parameter in the code. If turbo/Abseil containers must be used, a custom stateless hash function is required, such as one based on CityHash with a fixed seed passed in, to avoid the impact of process-local random seeds.</p>
<p>In terms of integration, turbo containers must enable C++17 compilation options (such as GCC&#x27;s <code>-std=c++17</code>), otherwise <code>std::string_view</code> and structured binding cannot be supported. For Folly containers, the lock order inversion problem must be fixed first; for melon containers, it is necessary to confirm that the ABA problem has been fixed. For tsl::robin_map, the hash seed configuration must be verified to ensure stability in serialization scenarios. Self-developed pmap containers only support independent Map scenarios, and slot hash sharding must be used in binding scenarios.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="iv-quick-selection-reference-table">IV. Quick Selection Reference Table<a href="#iv-quick-selection-reference-table" class="hash-link" aria-label="IV. Quick Selection Reference Table的直接链接" title="IV. Quick Selection Reference Table的直接链接" translate="no">​</a></h2>
<table><thead><tr><th>Business Scenario</th><th>Recommended Container</th><th>Core Technical Basis</th></tr></thead><tbody><tr><td>Single-machine small/large dataset, performance + memory sensitivity</td><td>turbo::flat_hash_map</td><td>Continuous memory + cache line alignment, high memory utilization and cache hit rate</td></tr><tr><td>Insert/delete data during traversal (single-machine)</td><td>turbo::node_hash_map</td><td>Chaining with independent nodes, permanent iterator stability</td></tr><tr><td>Insert/delete data during traversal (concurrent independent Map)</td><td>pmap::flat_node_map</td><td>Built-in shard locks + stable iterators, balancing concurrency and dynamic operations</td></tr><tr><td>Data serialization/cross-process transmission</td><td>folly::F14Map/tsl::robin_map</td><td>Fixed hash seed, cross-process hash consistency</td></tr><tr><td>High-concurrency read (independent Map)</td><td>melon::AtomicHashMap</td><td>Lock-free read + compressed storage, excellent high-concurrency performance and low memory usage</td></tr><tr><td>High-concurrency write (independent Map)</td><td>pmap::flat_hash_map (concurrent version)</td><td>Built-in shard locks, fine lock granularity and low contention</td></tr><tr><td>Map bound to external data (concurrent)</td><td>Slot hash sharding (turbo::flat_hash_map + shard locks)</td><td>Controllable lock order, avoiding deadlocks and data inconsistency</td></tr></tbody></table></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col noPrint_WFHX"><a href="https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/foundamentals/map/index.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>编辑此页</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="文件选项卡"><a class="pagination-nav__link pagination-nav__link--prev" href="/cppdev/zh-cn/docs/foundamentals/format/"><div class="pagination-nav__sublabel">上一页</div><div class="pagination-nav__label">Format &amp; Output (String Formatting and Output)</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/cppdev/zh-cn/docs/foundamentals/map/turbo_hash"><div class="pagination-nav__sublabel">下一页</div><div class="pagination-nav__label">Turbo Hash Containers</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#i-containers-and-their-underlying-technical-characteristics" class="table-of-contents__link toc-highlight">I. Containers and Their Underlying Technical Characteristics</a></li><li><a href="#ii-scenario-based-selection-and-technical-basis" class="table-of-contents__link toc-highlight">II. Scenario-Based Selection and Technical Basis</a></li><li><a href="#iii-coding-and-integration-technical-points" class="table-of-contents__link toc-highlight">III. Coding and Integration Technical Points</a></li><li><a href="#iv-quick-selection-reference-table" class="table-of-contents__link toc-highlight">IV. Quick Selection Reference Table</a></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/cppdev/zh-cn/docs/intro">Tutorial</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://discordapp.com/invite/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://x.com/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">X<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/cppdev/zh-cn/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/kumo-pub" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 Kumo, Inc.</div></div></div></footer></div>
</body>
</html>