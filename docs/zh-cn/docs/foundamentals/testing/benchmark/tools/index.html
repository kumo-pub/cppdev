<!doctype html>
<html lang="zh-cn" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-foundamentals/testing/benchmark/tools" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.2">
<title data-rh="true">Benchmark Tools | Kumo Search</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://your-docusaurus-site.example.com/cppdev/zh-cn/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://your-docusaurus-site.example.com/cppdev/zh-cn/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://your-docusaurus-site.example.com/cppdev/zh-cn/docs/foundamentals/testing/benchmark/tools"><meta data-rh="true" property="og:locale" content="zh_cn"><meta data-rh="true" property="og:locale:alternate" content="en_GB"><meta data-rh="true" name="docusaurus_locale" content="zh-cn"><meta data-rh="true" name="docsearch:language" content="zh-cn"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Benchmark Tools | Kumo Search"><meta data-rh="true" name="description" content="compare.py"><meta data-rh="true" property="og:description" content="compare.py"><link data-rh="true" rel="icon" href="/cppdev/zh-cn/img/favicon.svg"><link data-rh="true" rel="canonical" href="https://your-docusaurus-site.example.com/cppdev/zh-cn/docs/foundamentals/testing/benchmark/tools"><link data-rh="true" rel="alternate" href="https://your-docusaurus-site.example.com/cppdev/docs/foundamentals/testing/benchmark/tools" hreflang="en-GB"><link data-rh="true" rel="alternate" href="https://your-docusaurus-site.example.com/cppdev/zh-cn/docs/foundamentals/testing/benchmark/tools" hreflang="zh-cn"><link data-rh="true" rel="alternate" href="https://your-docusaurus-site.example.com/cppdev/docs/foundamentals/testing/benchmark/tools" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"基础开发","item":"https://your-docusaurus-site.example.com/cppdev/zh-cn/docs/category/foundamentals"},{"@type":"ListItem","position":2,"name":"性能测试与单元测试","item":"https://your-docusaurus-site.example.com/cppdev/zh-cn/docs/foundamentals/testing/"},{"@type":"ListItem","position":3,"name":"benchmark","item":"https://your-docusaurus-site.example.com/cppdev/zh-cn/docs/foundamentals/testing/benchmark/"},{"@type":"ListItem","position":4,"name":"Benchmark Tools","item":"https://your-docusaurus-site.example.com/cppdev/zh-cn/docs/foundamentals/testing/benchmark/tools"}]}</script><link rel="alternate" type="application/rss+xml" href="/cppdev/zh-cn/blog/rss.xml" title="Kumo Search RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/cppdev/zh-cn/blog/atom.xml" title="Kumo Search Atom Feed"><link rel="stylesheet" href="/cppdev/zh-cn/assets/css/styles.582e0043.css">
<script src="/cppdev/zh-cn/assets/js/runtime~main.ab755061.js" defer="defer"></script>
<script src="/cppdev/zh-cn/assets/js/main.0dd454fe.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")),document.documentElement.setAttribute("data-theme-choice",t||"system")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/cppdev/zh-cn/img/kumo-logo.svg"><div role="region" aria-label="跳到主要内容"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">跳到主要内容</a></div><nav aria-label="主导航" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="切换导航栏" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/cppdev/zh-cn/"><div class="navbar__logo"><img src="/cppdev/zh-cn/img/kumo-logo.svg" alt="Kumo logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/cppdev/zh-cn/img/kumo-logo.svg" alt="Kumo logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">开发导论</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/cppdev/zh-cn/docs/intro">教程</a><a class="navbar__item navbar__link" href="/cppdev/zh-cn/docs/integration/overview">集成</a><a class="navbar__item navbar__link" href="/cppdev/zh-cn/blog">博客</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://github.com/kumose" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_nlXk"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>中文（中国）</a><ul class="dropdown__menu"><li><a href="/cppdev/docs/foundamentals/testing/benchmark/tools" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="en-GB">English</a></li><li><a href="/cppdev/zh-cn/docs/foundamentals/testing/benchmark/tools" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="zh-cn">中文（中国）</a></li></ul></div><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="切换浅色/暗黑模式（当前为system mode）"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="回到顶部" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="文档侧边栏" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/cppdev/zh-cn/docs/intro"><span title="概览" class="linkLabel_WmDU">概览</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--active" href="/cppdev/zh-cn/docs/category/foundamentals"><span title="基础开发" class="categoryLinkLabel_W154">基础开发</span></a><button aria-label="折叠侧边栏分类 &#x27;基础开发&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--active" tabindex="0" href="/cppdev/zh-cn/docs/foundamentals/testing/"><span title="性能测试与单元测试" class="categoryLinkLabel_W154">性能测试与单元测试</span></a><button aria-label="折叠侧边栏分类 &#x27;性能测试与单元测试&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" tabindex="0" href="/cppdev/zh-cn/docs/category/doctest-unit-testing"><span title="doctest单元测试" class="categoryLinkLabel_W154">doctest单元测试</span></a><button aria-label="展开侧边栏分类 &#x27;doctest单元测试&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" tabindex="0" href="/cppdev/zh-cn/docs/category/google-test"><span title="Google Test" class="categoryLinkLabel_W154">Google Test</span></a><button aria-label="展开侧边栏分类 &#x27;Google Test&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--active" tabindex="0" href="/cppdev/zh-cn/docs/foundamentals/testing/benchmark/"><span title="benchmark" class="categoryLinkLabel_W154">benchmark</span></a><button aria-label="折叠侧边栏分类 &#x27;benchmark&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/cppdev/zh-cn/docs/foundamentals/testing/benchmark/AssemblyTests"><span title="Assembly Tests" class="linkLabel_WmDU">Assembly Tests</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/cppdev/zh-cn/docs/foundamentals/testing/benchmark/dependencies"><span title="Build tool dependency policy" class="linkLabel_WmDU">Build tool dependency policy</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/cppdev/zh-cn/docs/foundamentals/testing/benchmark/perf_counters"><span title="User-Requested Performance Counters" class="linkLabel_WmDU">User-Requested Performance Counters</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/cppdev/zh-cn/docs/foundamentals/testing/benchmark/platform_specific_build_instructions"><span title="Platform Specific Build Instructions" class="linkLabel_WmDU">Platform Specific Build Instructions</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/cppdev/zh-cn/docs/foundamentals/testing/benchmark/python_bindings"><span title="Building and installing Python bindings" class="linkLabel_WmDU">Building and installing Python bindings</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/cppdev/zh-cn/docs/foundamentals/testing/benchmark/random_interleaving"><span title="Random Interleaving" class="linkLabel_WmDU">Random Interleaving</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/cppdev/zh-cn/docs/foundamentals/testing/benchmark/reducing_variance"><span title="Reducing Variance" class="linkLabel_WmDU">Reducing Variance</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/cppdev/zh-cn/docs/foundamentals/testing/benchmark/releasing"><span title="How to release" class="linkLabel_WmDU">How to release</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/cppdev/zh-cn/docs/foundamentals/testing/benchmark/tools"><span title="Benchmark Tools" class="linkLabel_WmDU">Benchmark Tools</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/cppdev/zh-cn/docs/foundamentals/testing/benchmark/user_guide"><span title="User Guide" class="linkLabel_WmDU">User Guide</span></a></li></ul></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" tabindex="0" href="/cppdev/zh-cn/docs/foundamentals/log/"><span title="日志" class="categoryLinkLabel_W154">日志</span></a><button aria-label="展开侧边栏分类 &#x27;日志&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cppdev/zh-cn/docs/foundamentals/time"><span title="时间与日历" class="linkLabel_WmDU">时间与日历</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" tabindex="0" href="/cppdev/zh-cn/docs/category/standardized-errors-and-error-return-values"><span title="标准化错误与错误返回值" class="categoryLinkLabel_W154">标准化错误与错误返回值</span></a><button aria-label="展开侧边栏分类 &#x27;标准化错误与错误返回值&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" tabindex="0" href="/cppdev/zh-cn/docs/foundamentals/strings/"><span title="strings 操作" class="categoryLinkLabel_W154">strings 操作</span></a><button aria-label="展开侧边栏分类 &#x27;strings 操作&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cppdev/zh-cn/docs/foundamentals/flags"><span title="Turbo 命令行标志（Turbo Flags）" class="linkLabel_WmDU">Turbo 命令行标志（Turbo Flags）</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" tabindex="0" href="/cppdev/zh-cn/docs/foundamentals/codec/"><span title="编码与解码" class="categoryLinkLabel_W154">编码与解码</span></a><button aria-label="展开侧边栏分类 &#x27;编码与解码&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cppdev/zh-cn/docs/foundamentals/format/"><span title="格式化与输出（字符串格式化和输出）" class="linkLabel_WmDU">格式化与输出（字符串格式化和输出）</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" tabindex="0" href="/cppdev/zh-cn/docs/foundamentals/map/"><span title="map容器" class="categoryLinkLabel_W154">map容器</span></a><button aria-label="展开侧边栏分类 &#x27;map容器&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" tabindex="0" href="/cppdev/zh-cn/docs/foundamentals/compress/"><span title="压缩与解压缩" class="categoryLinkLabel_W154">压缩与解压缩</span></a><button aria-label="展开侧边栏分类 &#x27;压缩与解压缩&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" tabindex="0" href="/cppdev/zh-cn/docs/foundamentals/fibers/"><span title="Fiber And Future" class="categoryLinkLabel_W154">Fiber And Future</span></a><button aria-label="展开侧边栏分类 &#x27;Fiber And Future&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" tabindex="0" href="/cppdev/zh-cn/docs/foundamentals/monitor/"><span title="监控" class="categoryLinkLabel_W154">监控</span></a><button aria-label="展开侧边栏分类 &#x27;监控&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" tabindex="0" href="/cppdev/zh-cn/docs/foundamentals/filesystem/"><span title="文件系统" class="categoryLinkLabel_W154">文件系统</span></a><button aria-label="展开侧边栏分类 &#x27;文件系统&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" tabindex="0" href="/cppdev/zh-cn/docs/foundamentals/json/"><span title="json" class="categoryLinkLabel_W154">json</span></a><button aria-label="展开侧边栏分类 &#x27;json&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/cppdev/zh-cn/docs/rpc/"><span title="rpc远程调用" class="categoryLinkLabel_W154">rpc远程调用</span></a><button aria-label="展开侧边栏分类 &#x27;rpc远程调用&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/cppdev/zh-cn/docs/retrieve/"><span title="检索开发" class="categoryLinkLabel_W154">检索开发</span></a><button aria-label="展开侧边栏分类 &#x27;检索开发&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/cppdev/zh-cn/docs/store/"><span title="存储" class="categoryLinkLabel_W154">存储</span></a><button aria-label="展开侧边栏分类 &#x27;存储&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/cppdev/zh-cn/docs/ir/"><span title="IR" class="categoryLinkLabel_W154">IR</span></a><button aria-label="展开侧边栏分类 &#x27;IR&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/cppdev/zh-cn/docs/advance/"><span title="进阶开发" class="categoryLinkLabel_W154">进阶开发</span></a><button aria-label="展开侧边栏分类 &#x27;进阶开发&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="页面路径"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="主页面" class="breadcrumbs__link" href="/cppdev/zh-cn/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/cppdev/zh-cn/docs/category/foundamentals"><span>基础开发</span></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/cppdev/zh-cn/docs/foundamentals/testing/"><span>性能测试与单元测试</span></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/cppdev/zh-cn/docs/foundamentals/testing/benchmark/"><span>benchmark</span></a></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Benchmark Tools</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">本页总览</button></div><div class="theme-doc-markdown markdown"><header><h1>Benchmark Tools</h1></header>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="comparepy">compare.py<a href="#comparepy" class="hash-link" aria-label="compare.py的直接链接" title="compare.py的直接链接" translate="no">​</a></h2>
<p>The <code>compare.py</code> can be used to compare the result of benchmarks.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="dependencies">Dependencies<a href="#dependencies" class="hash-link" aria-label="Dependencies的直接链接" title="Dependencies的直接链接" translate="no">​</a></h3>
<p>The utility relies on the <a href="https://www.scipy.org" target="_blank" rel="noopener noreferrer" class="">scipy</a> package which can be installed using pip:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">pip3 install -r requirements.txt</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="displaying-aggregates-only">Displaying aggregates only<a href="#displaying-aggregates-only" class="hash-link" aria-label="Displaying aggregates only的直接链接" title="Displaying aggregates only的直接链接" translate="no">​</a></h3>
<p>The switch <code>-a</code> / <code>--display_aggregates_only</code> can be used to control the
displayment of the normal iterations vs the aggregates. When passed, it will
be passthrough to the benchmark binaries to be run, and will be accounted for
in the tool itself; only the aggregates will be displayed, but not normal runs.
It only affects the display, the separate runs will still be used to calculate
the U test.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="modes-of-operation">Modes of operation<a href="#modes-of-operation" class="hash-link" aria-label="Modes of operation的直接链接" title="Modes of operation的直接链接" translate="no">​</a></h3>
<p>There are three modes of operation:</p>
<ol>
<li class="">Just compare two benchmarks
The program is invoked like:</li>
</ol>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ compare.py benchmarks &lt;benchmark_baseline&gt; &lt;benchmark_contender&gt; [benchmark options]...</span><br></span></code></pre></div></div>
<p>Where <code>&lt;benchmark_baseline&gt;</code> and <code>&lt;benchmark_contender&gt;</code> either specify a benchmark executable file, or a JSON output file. The type of the input file is automatically detected. If a benchmark executable is specified then the benchmark is run to obtain the results. Otherwise the results are simply loaded from the output file.</p>
<p><code>[benchmark options]</code> will be passed to the benchmarks invocations. They can be anything that binary accepts, be it either normal <code>--benchmark_*</code> parameters, or some custom parameters your binary takes.</p>
<p>Example output:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ ./compare.py benchmarks ./a.out ./a.out</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">RUNNING: ./a.out --benchmark_out=/tmp/tmprBT5nW</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Run on (8 X 4000 MHz CPU s)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2017-11-07 21:16:44</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">------------------------------------------------------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Benchmark               Time           CPU Iterations</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">------------------------------------------------------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">BM_memcpy/8            36 ns         36 ns   19101577   211.669MB/s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">BM_memcpy/64           76 ns         76 ns    9412571   800.199MB/s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">BM_memcpy/512          84 ns         84 ns    8249070   5.64771GB/s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">BM_memcpy/1024        116 ns        116 ns    6181763   8.19505GB/s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">BM_memcpy/8192        643 ns        643 ns    1062855   11.8636GB/s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">BM_copy/8             222 ns        222 ns    3137987   34.3772MB/s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">BM_copy/64           1608 ns       1608 ns     432758   37.9501MB/s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">BM_copy/512         12589 ns      12589 ns      54806   38.7867MB/s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">BM_copy/1024        25169 ns      25169 ns      27713   38.8003MB/s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">BM_copy/8192       201165 ns     201112 ns       3486   38.8466MB/s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">RUNNING: ./a.out --benchmark_out=/tmp/tmpt1wwG_</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Run on (8 X 4000 MHz CPU s)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2017-11-07 21:16:53</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">------------------------------------------------------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Benchmark               Time           CPU Iterations</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">------------------------------------------------------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">BM_memcpy/8            36 ns         36 ns   19397903   211.255MB/s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">BM_memcpy/64           73 ns         73 ns    9691174   839.635MB/s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">BM_memcpy/512          85 ns         85 ns    8312329   5.60101GB/s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">BM_memcpy/1024        118 ns        118 ns    6438774   8.11608GB/s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">BM_memcpy/8192        656 ns        656 ns    1068644   11.6277GB/s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">BM_copy/8             223 ns        223 ns    3146977   34.2338MB/s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">BM_copy/64           1611 ns       1611 ns     435340   37.8751MB/s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">BM_copy/512         12622 ns      12622 ns      54818   38.6844MB/s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">BM_copy/1024        25257 ns      25239 ns      27779   38.6927MB/s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">BM_copy/8192       205013 ns     205010 ns       3479    38.108MB/s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Comparing ./a.out to ./a.out</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Benchmark                 Time             CPU      Time Old      Time New       CPU Old       CPU New</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">------------------------------------------------------------------------------------------------------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">BM_memcpy/8            +0.0020         +0.0020            36            36            36            36</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">BM_memcpy/64           -0.0468         -0.0470            76            73            76            73</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">BM_memcpy/512          +0.0081         +0.0083            84            85            84            85</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">BM_memcpy/1024         +0.0098         +0.0097           116           118           116           118</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">BM_memcpy/8192         +0.0200         +0.0203           643           656           643           656</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">BM_copy/8              +0.0046         +0.0042           222           223           222           223</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">BM_copy/64             +0.0020         +0.0020          1608          1611          1608          1611</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">BM_copy/512            +0.0027         +0.0026         12589         12622         12589         12622</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">BM_copy/1024           +0.0035         +0.0028         25169         25257         25169         25239</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">BM_copy/8192           +0.0191         +0.0194        201165        205013        201112        205010</span><br></span></code></pre></div></div>
<p>What it does is for the every benchmark from the first run it looks for the benchmark with exactly the same name in the second run, and then compares the results. If the names differ, the benchmark is omitted from the diff.
As you can note, the values in <code>Time</code> and <code>CPU</code> columns are calculated as <code>(new - old) / |old|</code>.</p>
<ol start="2">
<li class="">Compare two different filters of one benchmark
The program is invoked like:</li>
</ol>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ compare.py filters &lt;benchmark&gt; &lt;filter_baseline&gt; &lt;filter_contender&gt; [benchmark options]...</span><br></span></code></pre></div></div>
<p>Where <code>&lt;benchmark&gt;</code> either specify a benchmark executable file, or a JSON output file. The type of the input file is automatically detected. If a benchmark executable is specified then the benchmark is run to obtain the results. Otherwise the results are simply loaded from the output file.</p>
<p>Where <code>&lt;filter_baseline&gt;</code> and <code>&lt;filter_contender&gt;</code> are the same regex filters that you would pass to the <code>[--benchmark_filter=&lt;regex&gt;]</code> parameter of the benchmark binary.</p>
<p><code>[benchmark options]</code> will be passed to the benchmarks invocations. They can be anything that binary accepts, be it either normal <code>--benchmark_*</code> parameters, or some custom parameters your binary takes.</p>
<p>Example output:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ ./compare.py filters ./a.out BM_memcpy BM_copy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">RUNNING: ./a.out --benchmark_filter=BM_memcpy --benchmark_out=/tmp/tmpBWKk0k</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Run on (8 X 4000 MHz CPU s)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2017-11-07 21:37:28</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">------------------------------------------------------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Benchmark               Time           CPU Iterations</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">------------------------------------------------------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">BM_memcpy/8            36 ns         36 ns   17891491   211.215MB/s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">BM_memcpy/64           74 ns         74 ns    9400999   825.646MB/s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">BM_memcpy/512          87 ns         87 ns    8027453   5.46126GB/s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">BM_memcpy/1024        111 ns        111 ns    6116853    8.5648GB/s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">BM_memcpy/8192        657 ns        656 ns    1064679   11.6247GB/s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">RUNNING: ./a.out --benchmark_filter=BM_copy --benchmark_out=/tmp/tmpAvWcOM</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Run on (8 X 4000 MHz CPU s)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2017-11-07 21:37:33</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">----------------------------------------------------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Benchmark             Time           CPU Iterations</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">----------------------------------------------------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">BM_copy/8           227 ns        227 ns    3038700   33.6264MB/s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">BM_copy/64         1640 ns       1640 ns     426893   37.2154MB/s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">BM_copy/512       12804 ns      12801 ns      55417   38.1444MB/s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">BM_copy/1024      25409 ns      25407 ns      27516   38.4365MB/s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">BM_copy/8192     202986 ns     202990 ns       3454   38.4871MB/s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Comparing BM_memcpy to BM_copy (from ./a.out)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Benchmark                               Time             CPU      Time Old      Time New       CPU Old       CPU New</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--------------------------------------------------------------------------------------------------------------------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[BM_memcpy vs. BM_copy]/8            +5.2829         +5.2812            36           227            36           227</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[BM_memcpy vs. BM_copy]/64          +21.1719        +21.1856            74          1640            74          1640</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[BM_memcpy vs. BM_copy]/512        +145.6487       +145.6097            87         12804            87         12801</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[BM_memcpy vs. BM_copy]/1024       +227.1860       +227.1776           111         25409           111         25407</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[BM_memcpy vs. BM_copy]/8192       +308.1664       +308.2898           657        202986           656        202990</span><br></span></code></pre></div></div>
<p>As you can see, it applies filter to the benchmarks, both when running the benchmark, and before doing the diff. And to make the diff work, the matches are replaced with some common string. Thus, you can compare two different benchmark families within one benchmark binary.
As you can note, the values in <code>Time</code> and <code>CPU</code> columns are calculated as <code>(new - old) / |old|</code>.</p>
<ol start="3">
<li class="">Compare filter one from benchmark one to filter two from benchmark two:
The program is invoked like:</li>
</ol>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ compare.py filters &lt;benchmark_baseline&gt; &lt;filter_baseline&gt; &lt;benchmark_contender&gt; &lt;filter_contender&gt; [benchmark options]...</span><br></span></code></pre></div></div>
<p>Where <code>&lt;benchmark_baseline&gt;</code> and <code>&lt;benchmark_contender&gt;</code> either specify a benchmark executable file, or a JSON output file. The type of the input file is automatically detected. If a benchmark executable is specified then the benchmark is run to obtain the results. Otherwise the results are simply loaded from the output file.</p>
<p>Where <code>&lt;filter_baseline&gt;</code> and <code>&lt;filter_contender&gt;</code> are the same regex filters that you would pass to the <code>[--benchmark_filter=&lt;regex&gt;]</code> parameter of the benchmark binary.</p>
<p><code>[benchmark options]</code> will be passed to the benchmarks invocations. They can be anything that binary accepts, be it either normal <code>--benchmark_*</code> parameters, or some custom parameters your binary takes.</p>
<p>Example output:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ ./compare.py benchmarksfiltered ./a.out BM_memcpy ./a.out BM_copy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">RUNNING: ./a.out --benchmark_filter=BM_memcpy --benchmark_out=/tmp/tmp_FvbYg</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Run on (8 X 4000 MHz CPU s)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2017-11-07 21:38:27</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">------------------------------------------------------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Benchmark               Time           CPU Iterations</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">------------------------------------------------------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">BM_memcpy/8            37 ns         37 ns   18953482   204.118MB/s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">BM_memcpy/64           74 ns         74 ns    9206578   828.245MB/s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">BM_memcpy/512          91 ns         91 ns    8086195   5.25476GB/s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">BM_memcpy/1024        120 ns        120 ns    5804513   7.95662GB/s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">BM_memcpy/8192        664 ns        664 ns    1028363   11.4948GB/s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">RUNNING: ./a.out --benchmark_filter=BM_copy --benchmark_out=/tmp/tmpDfL5iE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Run on (8 X 4000 MHz CPU s)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2017-11-07 21:38:32</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">----------------------------------------------------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Benchmark             Time           CPU Iterations</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">----------------------------------------------------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">BM_copy/8           230 ns        230 ns    2985909   33.1161MB/s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">BM_copy/64         1654 ns       1653 ns     419408   36.9137MB/s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">BM_copy/512       13122 ns      13120 ns      53403   37.2156MB/s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">BM_copy/1024      26679 ns      26666 ns      26575   36.6218MB/s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">BM_copy/8192     215068 ns     215053 ns       3221   36.3283MB/s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Comparing BM_memcpy (from ./a.out) to BM_copy (from ./a.out)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Benchmark                               Time             CPU      Time Old      Time New       CPU Old       CPU New</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--------------------------------------------------------------------------------------------------------------------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[BM_memcpy vs. BM_copy]/8            +5.1649         +5.1637            37           230            37           230</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[BM_memcpy vs. BM_copy]/64          +21.4352        +21.4374            74          1654            74          1653</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[BM_memcpy vs. BM_copy]/512        +143.6022       +143.5865            91         13122            91         13120</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[BM_memcpy vs. BM_copy]/1024       +221.5903       +221.4790           120         26679           120         26666</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[BM_memcpy vs. BM_copy]/8192       +322.9059       +323.0096           664        215068           664        215053</span><br></span></code></pre></div></div>
<p>This is a mix of the previous two modes, two (potentially different) benchmark binaries are run, and a different filter is applied to each one.
As you can note, the values in <code>Time</code> and <code>CPU</code> columns are calculated as <code>(new - old) / |old|</code>.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="note-interpreting-the-output">Note: Interpreting the output<a href="#note-interpreting-the-output" class="hash-link" aria-label="Note: Interpreting the output的直接链接" title="Note: Interpreting the output的直接链接" translate="no">​</a></h3>
<p>Performance measurements are an art, and performance comparisons are doubly so.
Results are often noisy and don&#x27;t necessarily have large absolute differences to
them, so just by visual inspection, it is not at all apparent if two
measurements are actually showing a performance change or not. It is even more
confusing with multiple benchmark repetitions.</p>
<p>Thankfully, what we can do, is use statistical tests on the results to determine
whether the performance has statistically-significantly changed. <code>compare.py</code>
uses <a href="https://en.wikipedia.org/wiki/Mann%E2%80%93Whitney_U_test" target="_blank" rel="noopener noreferrer" class="">Mann–Whitney U
test</a>, with a null
hypothesis being that there&#x27;s no difference in performance.</p>
<p><strong>The below output is a summary of a benchmark comparison with statistics
provided for a multi-threaded process.</strong></p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Benchmark                                               Time        CPU    Time Old      Time New       CPU Old       CPU New</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-----------------------------------------------------------------------------------------------------------------------------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">benchmark/threads:1/process_time/real_time_pvalue     0.0000     0.0000    U Test, Repetitions: 27 vs 27</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">benchmark/threads:1/process_time/real_time_mean      -0.1442    -0.1442          90            77            90            77</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">benchmark/threads:1/process_time/real_time_median    -0.1444    -0.1444          90            77            90            77</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">benchmark/threads:1/process_time/real_time_stddev    +0.3974    +0.3933           0             0             0             0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">benchmark/threads:1/process_time/real_time_cv        +0.6329    +0.6280           0             0             0             0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">OVERALL_GEOMEAN                                      -0.1442    -0.1442           0             0             0             0</span><br></span></code></pre></div></div>
<hr>
<p>Here&#x27;s a breakdown of each row:</p>
<p><strong>benchmark/threads:1/process_time/real_time_pvalue</strong>: This shows the <em>p-value</em> for
the statistical test comparing the performance of the process running with one
thread. A value of 0.0000 suggests a statistically significant difference in
performance. The comparison was conducted using the U Test (Mann-Whitney
U Test) with 27 repetitions for each case.</p>
<p><strong>benchmark/threads:1/process_time/real_time_mean</strong>: This shows the relative
difference in mean execution time between two different cases. The negative
value (-0.1442) implies that the new process is faster by about 14.42%. The old
time was 90 units, while the new time is 77 units.</p>
<p><strong>benchmark/threads:1/process_time/real_time_median</strong>: Similarly, this shows the
relative difference in the median execution time. Again, the new process is
faster by 14.44%.</p>
<p><strong>benchmark/threads:1/process_time/real_time_stddev</strong>: This is the relative
difference in the standard deviation of the execution time, which is a measure
of how much variation or dispersion there is from the mean. A positive value
(+0.3974) implies there is more variance in the execution time in the new
process.</p>
<p><strong>benchmark/threads:1/process_time/real_time_cv</strong>: CV stands for Coefficient of
Variation. It is the ratio of the standard deviation to the mean. It provides a
standardized measure of dispersion. An increase (+0.6329) indicates more
relative variability in the new process.</p>
<p><strong>OVERALL_GEOMEAN</strong>: Geomean stands for geometric mean, a type of average that is
less influenced by outliers. The negative value indicates a general improvement
in the new process. However, given the values are all zero for the old and new
times, this seems to be a mistake or placeholder in the output.</p>
<hr>
<p>Let&#x27;s first try to see what the different columns represent in the above
<code>compare.py</code> benchmarking output:</p>
<ol>
<li class="">
<p><strong>Benchmark:</strong> The name of the function being benchmarked, along with the
size of the input (after the slash).</p>
</li>
<li class="">
<p><strong>Time:</strong> The average time per operation, across all iterations.</p>
</li>
<li class="">
<p><strong>CPU:</strong> The average CPU time per operation, across all iterations.</p>
</li>
<li class="">
<p><strong>Iterations:</strong> The number of iterations the benchmark was run to get a
stable estimate.</p>
</li>
<li class="">
<p><strong>Time Old and Time New:</strong> These represent the average time it takes for a
function to run in two different scenarios or versions. For example, you
might be comparing how fast a function runs before and after you make some
changes to it.</p>
</li>
<li class="">
<p><strong>CPU Old and CPU New:</strong> These show the average amount of CPU time that the
function uses in two different scenarios or versions. This is similar to
Time Old and Time New, but focuses on CPU usage instead of overall time.</p>
</li>
</ol>
<p>In the comparison section, the relative differences in both time and CPU time
are displayed for each input size.</p>
<p>A statistically-significant difference is determined by a <strong>p-value</strong>, which is
a measure of the probability that the observed difference could have occurred
just by random chance. A smaller p-value indicates stronger evidence against the
null hypothesis.</p>
<p><strong>Therefore:</strong></p>
<ol>
<li class="">If the p-value is less than the chosen significance level (alpha), we
reject the null hypothesis and conclude the benchmarks are significantly
different.</li>
<li class="">If the p-value is greater than or equal to alpha, we fail to reject the
null hypothesis and treat the two benchmarks as similar.</li>
</ol>
<p>The result of said the statistical test is additionally communicated through color coding:</p>
<div class="language-diff codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-diff codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">+ Green:</span><br></span></code></pre></div></div>
<p>The benchmarks are <em><strong>statistically different</strong></em>. This could mean the
performance has either <strong>significantly improved</strong> or <strong>significantly
deteriorated</strong>. You should look at the actual performance numbers to see which
is the case.</p>
<div class="language-diff codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-diff codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">- Red:</span><br></span></code></pre></div></div>
<p>The benchmarks are <em><strong>statistically similar</strong></em>. This means the performance
<strong>hasn&#x27;t significantly changed</strong>.</p>
<p>In statistical terms, <strong>&#x27;green&#x27;</strong> means we reject the null hypothesis that
there&#x27;s no difference in performance, and <strong>&#x27;red&#x27;</strong> means we fail to reject the
null hypothesis. This might seem counter-intuitive if you&#x27;re expecting &#x27;green&#x27;
to mean &#x27;improved performance&#x27; and &#x27;red&#x27; to mean &#x27;worsened performance&#x27;.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  But remember, in this context:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &#x27;Success&#x27; means &#x27;successfully finding a difference&#x27;.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &#x27;Failure&#x27; means &#x27;failing to find a difference&#x27;.</span><br></span></code></pre></div></div>
<p>Also, please note that <strong>even if</strong> we determine that there <strong>is</strong> a
statistically-significant difference between the two measurements, it does not
<em>necessarily</em> mean that the actual benchmarks that were measured <strong>are</strong>
different, or vice versa, even if we determine that there is <strong>no</strong>
statistically-significant difference between the two measurements, it does not
necessarily mean that the actual benchmarks that were measured <strong>are not</strong>
different.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="u-test">U test<a href="#u-test" class="hash-link" aria-label="U test的直接链接" title="U test的直接链接" translate="no">​</a></h3>
<p>If there is a sufficient repetition count of the benchmarks, the tool can do
a <a href="https://en.wikipedia.org/wiki/Mann%E2%80%93Whitney_U_test" target="_blank" rel="noopener noreferrer" class="">U Test</a>, of the
null hypothesis that it is equally likely that a randomly selected value from
one sample will be less than or greater than a randomly selected value from a
second sample.</p>
<p>If the calculated p-value is below this value is lower than the significance
level alpha, then the result is said to be statistically significant and the
null hypothesis is rejected. Which in other words means that the two benchmarks
aren&#x27;t identical.</p>
<p><strong>WARNING</strong>: requires <strong>LARGE</strong> (no less than 9) number of repetitions to be
meaningful!</p></div></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="文件选项卡"><a class="pagination-nav__link pagination-nav__link--prev" href="/cppdev/zh-cn/docs/foundamentals/testing/benchmark/releasing"><div class="pagination-nav__sublabel">上一页</div><div class="pagination-nav__label">How to release</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/cppdev/zh-cn/docs/foundamentals/testing/benchmark/user_guide"><div class="pagination-nav__sublabel">下一页</div><div class="pagination-nav__label">User Guide</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#comparepy" class="table-of-contents__link toc-highlight">compare.py</a><ul><li><a href="#dependencies" class="table-of-contents__link toc-highlight">Dependencies</a></li><li><a href="#displaying-aggregates-only" class="table-of-contents__link toc-highlight">Displaying aggregates only</a></li><li><a href="#modes-of-operation" class="table-of-contents__link toc-highlight">Modes of operation</a></li><li><a href="#note-interpreting-the-output" class="table-of-contents__link toc-highlight">Note: Interpreting the output</a></li><li><a href="#u-test" class="table-of-contents__link toc-highlight">U test</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/cppdev/zh-cn/docs/intro">Tutorial</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://x.com/jefflothar" target="_blank" rel="noopener noreferrer" class="footer__link-item">X<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/cppdev/zh-cn/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/kumo-pub" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2026 Kumo, Inc.</div></div></div></footer></div>
</body>
</html>