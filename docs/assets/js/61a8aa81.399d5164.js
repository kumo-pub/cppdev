"use strict";(globalThis.webpackChunkwebsite=globalThis.webpackChunkwebsite||[]).push([[744],{1008:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>c,contentTitle:()=>o,default:()=>h,frontMatter:()=>l,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"store/cloud/azure","title":"Azure Integration","description":"This document describes how to integrate Microsoft Azure services into a Kumo deployment.","source":"@site/docs/store/cloud/azure.mdx","sourceDirName":"store/cloud","slug":"/store/cloud/azure","permalink":"/cppdev/docs/store/cloud/azure","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"Azure Integration"},"sidebar":"tutorialSidebar","previous":{"title":"AWS Integration","permalink":"/cppdev/docs/store/cloud/aws"},"next":{"title":"Google Cloud Storage Integration","permalink":"/cppdev/docs/store/cloud/gcs"}}');var t=r(4848),i=r(8453);const l={title:"Azure Integration"},o="Azure Integration with Kumo Stack",c={},d=[{value:"1. Supported Azure Components via <code>kmpkg</code>",id:"1-supported-azure-components-via-kmpkg",level:2},{value:"2. Integration Patterns",id:"2-integration-patterns",level:2},{value:"2.1 Blob Storage for KV Backup",id:"21-blob-storage-for-kv-backup",level:3},{value:"2.2 Event Hubs for Change Events",id:"22-event-hubs-for-change-events",level:3},{value:"2.3 Key Vault for Secrets Management",id:"23-key-vault-for-secrets-management",level:3},{value:"3. KV Layer Backup Strategies",id:"3-kv-layer-backup-strategies",level:2},{value:"4. Key Design &amp; Throughput",id:"4-key-design--throughput",level:2},{value:"5. Operational Recommendations",id:"5-operational-recommendations",level:2},{value:"6. Example Workflow",id:"6-example-workflow",level:2},{value:"7. Summary",id:"7-summary",level:2}];function a(e){const n={blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"azure-integration-with-kumo-stack",children:"Azure Integration with Kumo Stack"})}),"\n",(0,t.jsxs)(n.p,{children:["This document describes ",(0,t.jsx)(n.strong,{children:"how to integrate Microsoft Azure services into a Kumo deployment"}),".\nFocus is ",(0,t.jsx)(n.strong,{children:"practical integration and operational guidance"}),", not a recommendation of which cloud to use."]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsxs)(n.h2,{id:"1-supported-azure-components-via-kmpkg",children:["1. Supported Azure Components via ",(0,t.jsx)(n.code,{children:"kmpkg"})]}),"\n",(0,t.jsxs)(n.p,{children:["Kumo\u2019s package manager ",(0,t.jsx)(n.code,{children:"kmpkg"})," supports the following Azure components:"]}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Package"}),(0,t.jsx)(n.th,{children:"Version"}),(0,t.jsx)(n.th,{children:"Description"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"azure-c-shared-utility"}),(0,t.jsx)(n.td,{children:"2025-03-31"}),(0,t.jsx)(n.td,{children:"Common utilities used across Azure C SDKs."})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"azure-core-cpp"}),(0,t.jsx)(n.td,{children:"1.16.1#1"}),(0,t.jsx)(n.td,{children:"Core Azure SDK utilities (HTTP transport, auth, etc.)."})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"azure-core-cpp[curl]"}),(0,t.jsx)(n.td,{children:"-"}),(0,t.jsx)(n.td,{children:"Libcurl HTTP transport implementation."})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"azure-core-cpp[http]"}),(0,t.jsx)(n.td,{children:"-"}),(0,t.jsx)(n.td,{children:"All available HTTP transport implementations."})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"azure-core-cpp[winhttp]"}),(0,t.jsx)(n.td,{children:"-"}),(0,t.jsx)(n.td,{children:"WinHTTP transport implementation."})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"azure-core-amqp-cpp"}),(0,t.jsx)(n.td,{children:"1.0.0-beta.11#2"}),(0,t.jsx)(n.td,{children:"AMQP protocol SDK (C++)."})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"azure-core-tracing-opentelemetry-cpp"}),(0,t.jsx)(n.td,{children:"1.0.0-beta.4#6"}),(0,t.jsx)(n.td,{children:"OpenTelemetry tracing for Azure SDK."})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"azure-data-tables-cpp"}),(0,t.jsx)(n.td,{children:"1.0.0-beta.6#1"}),(0,t.jsx)(n.td,{children:"Azure Table Storage SDK (C++)."})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"azure-identity-cpp"}),(0,t.jsx)(n.td,{children:"1.13.2#1"}),(0,t.jsx)(n.td,{children:"Authentication & identity management SDK (C++)."})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"azure-iot-sdk-c"}),(0,t.jsx)(n.td,{children:"2025-03-31"}),(0,t.jsx)(n.td,{children:"C99 SDK for Azure IoT device connectivity."})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"azure-iot-sdk-c[use-prov-client]"}),(0,t.jsx)(n.td,{children:"-"}),(0,t.jsx)(n.td,{children:"Enables device provisioning client for DPS."})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"azure-storage-blobs-cpp"}),(0,t.jsx)(n.td,{children:"12.15.0"}),(0,t.jsx)(n.td,{children:"Azure Blob Storage SDK (C++)."})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"azure-storage-common-cpp"}),(0,t.jsx)(n.td,{children:"12.11.0"}),(0,t.jsx)(n.td,{children:"Common storage utilities."})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"azure-storage-files-datalake-cpp"}),(0,t.jsx)(n.td,{children:"12.13.0"}),(0,t.jsx)(n.td,{children:"Azure Data Lake Files SDK."})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"azure-storage-files-shares-cpp"}),(0,t.jsx)(n.td,{children:"12.15.0"}),(0,t.jsx)(n.td,{children:"Azure File Shares SDK."})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"azure-storage-queues-cpp"}),(0,t.jsx)(n.td,{children:"12.5.0"}),(0,t.jsx)(n.td,{children:"Azure Queue Storage SDK."})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"azure-uamqp-c"}),(0,t.jsx)(n.td,{children:"2025-03-31"}),(0,t.jsx)(n.td,{children:"AMQP protocol library (C)."})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"azure-uhttp-c"}),(0,t.jsx)(n.td,{children:"2025-03-31"}),(0,t.jsx)(n.td,{children:"HTTP transport library (C)."})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"azure-umqtt-c"}),(0,t.jsx)(n.td,{children:"2025-03-31"}),(0,t.jsx)(n.td,{children:"MQTT protocol library (C)."})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"azure-kinect-sensor-sdk"}),(0,t.jsx)(n.td,{children:"1.4.2"}),(0,t.jsx)(n.td,{children:"Sensor SDK (cross-platform Linux/Windows)."})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"azure-kinect-depth-engine"}),(0,t.jsx)(n.td,{children:"1.4.2"}),(0,t.jsx)(n.td,{children:"Depth engine for Kinect sensors."})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"azure-security-keyvault-*"}),(0,t.jsx)(n.td,{children:"4.x"}),(0,t.jsx)(n.td,{children:"Key Vault SDK (Keys, Secrets, Certificates, Administration)."})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"azure-messaging-eventhubs-cpp"}),(0,t.jsx)(n.td,{children:"1.0.0-beta.10#1"}),(0,t.jsx)(n.td,{children:"Event Hubs SDK for publishing/consuming messages."})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"azure-messaging-eventhubs-checkpointstore-blob-cpp"}),(0,t.jsx)(n.td,{children:"1.0.0-beta.1#5"}),(0,t.jsx)(n.td,{children:"Checkpoint store using Blob Storage."})]})]})]}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsxs)(n.p,{children:["These libraries allow integration with Azure ",(0,t.jsx)(n.strong,{children:"Blob Storage, File Storage, Event Hubs, IoT, AMQP, and Key Vault"}),", providing the building blocks for Kumo KV backup, snapshots, and event pipelines."]}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"2-integration-patterns",children:"2. Integration Patterns"}),"\n",(0,t.jsx)(n.h3,{id:"21-blob-storage-for-kv-backup",children:"2.1 Blob Storage for KV Backup"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Use Cases:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Backup RocksDB snapshots or SST files."}),"\n",(0,t.jsx)(n.li,{children:"Long-term retention and disaster recovery."}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Best Practices:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Prefer ",(0,t.jsx)(n.strong,{children:"single file per SST or snapshot directory"})," to simplify restore."]}),"\n",(0,t.jsxs)(n.li,{children:["Enable ",(0,t.jsx)(n.strong,{children:"versioning and soft-delete"})," for safety."]}),"\n",(0,t.jsxs)(n.li,{children:["For very large files (>256 MB), use ",(0,t.jsx)(n.strong,{children:"chunked upload"})," (",(0,t.jsx)(n.code,{children:"BlockBlobClient"}),")."]}),"\n",(0,t.jsxs)(n.li,{children:["Organize by ",(0,t.jsx)(n.strong,{children:"prefix/date"})," to optimize throughput:"]}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"\nkv-backups/\n\u2514\u2500 rocksdb/\n\u2514\u2500 2026-01-04/\n\u251c\u2500 cf_default-00001.sst\n\u2514\u2500 cf_default-00002.sst\n\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"C++ Example: Upload Blob"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-cpp",children:'#include <azure/storage/blobs.hpp>\nusing namespace Azure::Storage::Blobs;\n\nBlobClient blobClient = BlobClient::CreateFromConnectionString(\n    "<AZURE_CONN_STRING>", "kumo-backups", "rocksdb-snapshot-20260104.sst"\n);\n\nblobClient.UploadFromFile("snapshot.sst");\n'})}),"\n",(0,t.jsx)(n.h3,{id:"22-event-hubs-for-change-events",children:"2.2 Event Hubs for Change Events"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Use Cases:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Stream KV change events for analytics or triggers."}),"\n",(0,t.jsx)(n.li,{children:"Integrate with downstream processors or Azure Functions."}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Libraries:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"azure-messaging-eventhubs-cpp"})}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"azure-messaging-eventhubs-checkpointstore-blob-cpp"})," (for checkpoints)"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Best Practices:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Use ",(0,t.jsx)(n.strong,{children:"batched sends"})," to reduce network overhead."]}),"\n",(0,t.jsxs)(n.li,{children:["Track ",(0,t.jsx)(n.strong,{children:"offsets/checkpoints"})," to allow recovery from failures."]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"23-key-vault-for-secrets-management",children:"2.3 Key Vault for Secrets Management"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Use Cases:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Store encryption keys for KV backups or snapshot encryption."}),"\n",(0,t.jsx)(n.li,{children:"Store credentials for S3/Azure blob clients."}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Best Practices:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Combine ",(0,t.jsx)(n.code,{children:"azure-identity-cpp"})," with Key Vault SDK for ",(0,t.jsx)(n.strong,{children:"automatic token refresh"}),"."]}),"\n",(0,t.jsx)(n.li,{children:"Limit Key Vault permissions per application or service."}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"3-kv-layer-backup-strategies",children:"3. KV Layer Backup Strategies"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"RocksDB Snapshots:"})," Lightweight consistent views, ideal for S3 or Blob upload."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Checkpoint API:"})," Full directory copy, can be uploaded as zip or SST collection."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Operational Notes:"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Minimize column families to simplify backup/restore."}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"For large DBs, incremental SST upload is recommended."}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"4-key-design--throughput",children:"4. Key Design & Throughput"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Use ",(0,t.jsx)(n.strong,{children:"fixed-length prefix keys"})," for efficient range traversal."]}),"\n",(0,t.jsxs)(n.li,{children:["Randomize prefix in high-throughput scenarios to avoid ",(0,t.jsx)(n.strong,{children:"blob hot spots"}),"."]}),"\n",(0,t.jsx)(n.li,{children:"Optimize SST file size to align with Azure Blob large block sizes (~256 MB)."}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"5-operational-recommendations",children:"5. Operational Recommendations"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Bucket/Container Organization:"})," Separate dev, staging, prod."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Throughput:"})," Prefix sharding for high-concurrency writes."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Consistency:"})," Blob overwrite/delete is ",(0,t.jsx)(n.strong,{children:"strongly consistent"}),", unlike S3 eventual consistency, but monitor network errors."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Monitoring:"})," Use Azure SDK logging and Event Hubs metrics for operational visibility."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Restore:"})," Always verify backup restore on a staging environment."]}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"6-example-workflow",children:"6. Example Workflow"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["Take RocksDB snapshot via ",(0,t.jsx)(n.code,{children:"rocksdb::DB::GetSnapshot()"}),"."]}),"\n",(0,t.jsx)(n.li,{children:"Flush required column families."}),"\n",(0,t.jsx)(n.li,{children:"Save SST files locally."}),"\n",(0,t.jsx)(n.li,{children:"Upload SST files to Azure Blob Storage."}),"\n",(0,t.jsxs)(n.li,{children:["Optionally trigger ",(0,t.jsx)(n.strong,{children:"Azure Function"})," to validate snapshot or trigger downstream processing."]}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"7-summary",children:"7. Summary"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Azure integration in Kumo focuses on ",(0,t.jsx)(n.strong,{children:"operational-first design"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:["Use ",(0,t.jsx)(n.strong,{children:"Blob Storage"})," for KV backup, ",(0,t.jsx)(n.strong,{children:"Event Hubs"})," for change streaming, and ",(0,t.jsx)(n.strong,{children:"Key Vault"})," for secrets."]}),"\n",(0,t.jsxs)(n.li,{children:["Favor ",(0,t.jsx)(n.strong,{children:"minimal CFs, fixed prefix keys, direct SST uploads"}),", and ",(0,t.jsx)(n.strong,{children:"container/prefix organization"})," for maintainable deployments."]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(a,{...e})}):a(e)}},8453:(e,n,r)=>{r.d(n,{R:()=>l,x:()=>o});var s=r(6540);const t={},i=s.createContext(t);function l(e){const n=s.useContext(i);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:l(e.components),s.createElement(i.Provider,{value:n},e.children)}}}]);