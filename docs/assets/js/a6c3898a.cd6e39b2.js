"use strict";(globalThis.webpackChunkwebsite=globalThis.webpackChunkwebsite||[]).push([[564],{3262:(e,r,n)=>{n.r(r),n.d(r,{assets:()=>w,contentTitle:()=>b,default:()=>B,frontMatter:()=>f,metadata:()=>c,toc:()=>q});const c=JSON.parse('{"id":"rpc/krpc/server_debugging","title":"rpc\u8c03\u8bd5","description":"1.\u68c0\u67e5\u5de5\u4f5c\u7ebf\u7a0b\u7684\u6570\u91cf","source":"@site/docs/rpc/krpc/server_debugging.mdx","sourceDirName":"rpc/krpc","slug":"/rpc/krpc/server_debugging","permalink":"/cppdev/docs/rpc/krpc/server_debugging","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/rpc/krpc/server_debugging.mdx","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"\u81ea\u9002\u5e94\u9650\u6d41","permalink":"/cppdev/docs/rpc/krpc/auto_concurrency_limiter"},"next":{"title":"retrieve","permalink":"/cppdev/docs/retrieve/"}}');var s=n(4848),d=n(8453);const a=n.p+"assets/images/full_worker_usage-981258013b676899e0ec14a666369dd9.png",o=n.p+"assets/images/normal_worker_usage-51473c9e6007877be4acb32a3eabad84.png",A=n.p+"assets/images/high_cpu_usage-0807ef3845ef0ba6f85e8a6cb5786981.png",i=n.p+"assets/images/normal_cpu_usage-6a0a8d80cecc30468e647de6fe150cf8.png",p=n.p+"assets/images/kthread_creation_qps-71b321d33dd0e5054868d17ddb05120d.png",l=n.p+"assets/images/kthread_concurrency_1-bb77917c691ba1b384425563753a68da.png",t=n.p+"assets/images/kthread_concurrency_2-79ef37d84103e8c0ad7f42e4e6c3f812.png",h="data:image/png;base64,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",u=n.p+"assets/images/full_worker_usage_2-f2e4a502002a704b3701a75393be1d55.png",g=n.p+"assets/images/rpcz-01a1a8b9b8f24259eedc4a0437703774.png",x=n.p+"assets/images/rpcz_2-c18aaad8db4cfdb00806b74f527a9465.png",j="data:image/png;base64,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",v=n.p+"assets/images/rpcz_3-a6528d4c935db9db15479b2666ebde47.png",m=n.p+"assets/images/foobar_kvar-1a9a79bd60ffc2c2a6c2e4570cb84e13.png",k=n.p+"assets/images/foobar_latency_cdf-04f429a69ca646f351950b5f6b5559ea.png",f={},b="rpc\u8c03\u8bd5",w={},q=[{value:"1.\u68c0\u67e5\u5de5\u4f5c\u7ebf\u7a0b\u7684\u6570\u91cf",id:"1\u68c0\u67e5\u5de5\u4f5c\u7ebf\u7a0b\u7684\u6570\u91cf",level:2},{value:"2.\u68c0\u67e5CPU\u7684\u4f7f\u7528\u7a0b\u5ea6",id:"2\u68c0\u67e5cpu\u7684\u4f7f\u7528\u7a0b\u5ea6",level:2},{value:"3.\u5b9a\u4f4d\u95ee\u9898",id:"3\u5b9a\u4f4d\u95ee\u9898",level:2},{value:"3.1 \u5b9a\u4f4dcpu-bound\u95ee\u9898",id:"31-\u5b9a\u4f4dcpu-bound\u95ee\u9898",level:3},{value:"\u6392\u9664\u4e0a\u6e38\u5206\u6d41\u4e0d\u5747\u7684\u5acc\u7591",id:"\u6392\u9664\u4e0a\u6e38\u5206\u6d41\u4e0d\u5747\u7684\u5acc\u7591",level:4},{value:"\u4f18\u5316\u5355\u673a\u6027\u80fd",id:"\u4f18\u5316\u5355\u673a\u6027\u80fd",level:4},{value:"3.2 \u5b9a\u4f4dio-bound\u95ee\u9898",id:"32-\u5b9a\u4f4dio-bound\u95ee\u9898",level:3},{value:"\u6392\u9664\u5de5\u4f5c\u7ebf\u7a0b\u6570\u4e0d\u591f\u7684\u5acc\u7591",id:"\u6392\u9664\u5de5\u4f5c\u7ebf\u7a0b\u6570\u4e0d\u591f\u7684\u5acc\u7591",level:4},{value:"\u6392\u9664\u9501\u7684\u5acc\u7591",id:"\u6392\u9664\u9501\u7684\u5acc\u7591",level:4},{value:"\u4f7f\u7528rpcz",id:"\u4f7f\u7528rpcz",level:4},{value:"\u4f7f\u7528kvar",id:"\u4f7f\u7528kvar",level:4},{value:"\u53ea\u4f7f\u7528\u4e86krpc client",id:"\u53ea\u4f7f\u7528\u4e86krpc-client",level:4}];function Y(e){const r={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,d.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(r.header,{children:(0,s.jsx)(r.h1,{id:"rpc\u8c03\u8bd5",children:"rpc\u8c03\u8bd5"})}),"\n",(0,s.jsx)(r.h2,{id:"1\u68c0\u67e5\u5de5\u4f5c\u7ebf\u7a0b\u7684\u6570\u91cf",children:"1.\u68c0\u67e5\u5de5\u4f5c\u7ebf\u7a0b\u7684\u6570\u91cf"}),"\n",(0,s.jsxs)(r.p,{children:["\u67e5\u770b /vars/kthread_worker_",(0,s.jsx)(r.strong,{children:"count"})," \u548c /vars/kthread_worker_",(0,s.jsx)(r.strong,{children:"usage"}),"\u3002\u5206\u522b\u662f\u5de5\u4f5c\u7ebf\u7a0b\u7684\u4e2a\u6570\uff0c\u548c\u6b63\u5728\u88ab\u4f7f\u7528\u7684\u5de5\u4f5c\u7ebf\u7a0b\u4e2a\u6570\u3002"]}),"\n",(0,s.jsxs)(r.blockquote,{children:["\n",(0,s.jsx)(r.p,{children:"\u5982\u679cusage\u548ccount\u63a5\u8fd1\uff0c\u8bf4\u660e\u7ebf\u7a0b\u4e0d\u591f\u7528\u4e86\u3002"}),"\n"]}),"\n",(0,s.jsx)(r.p,{children:"\u6bd4\u5982\uff0c\u4e0b\u56fe\u4e2d\u670924\u4e2a\u5de5\u4f5c\u7ebf\u7a0b\uff0c\u6b63\u5728\u4f7f\u7528\u7684\u662f23.93\u4e2a\uff0c\u8bf4\u660e\u6240\u6709\u7684\u5de5\u4f5c\u7ebf\u7a0b\u90fd\u88ab\u6253\u6ee1\u4e86\uff0c\u4e0d\u591f\u7528\u4e86\u3002"}),"\n","\n",(0,s.jsx)("img",{src:a}),"\n",(0,s.jsx)(r.p,{children:"\u4e0b\u56fe\u4e2d\u6b63\u5728\u4f7f\u7528\u7684\u53ea\u67092.36\u4e2a\uff0c\u5de5\u4f5c\u7ebf\u7a0b\u660e\u663e\u662f\u8db3\u591f\u7684\u3002"}),"\n","\n",(0,s.jsx)("img",{src:o}),"\n",(0,s.jsxs)(r.p,{children:["\u628a /vars/kthread_worker_count;kthread_worker_usage?expand \u62fc\u5728\u670d\u52a1url\u540e\u76f4\u63a5\u770b\u5230\u8fd9\u4e24\u5e45\u56fe\uff0c\u5c31\u50cf",(0,s.jsx)(r.a,{href:"http://krpc.baidu.com:8765/vars/kthread_worker_count;kthread_worker_usage?expand",children:"\u8fd9\u6837"}),"\u3002"]}),"\n",(0,s.jsx)(r.h2,{id:"2\u68c0\u67e5cpu\u7684\u4f7f\u7528\u7a0b\u5ea6",children:"2.\u68c0\u67e5CPU\u7684\u4f7f\u7528\u7a0b\u5ea6"}),"\n",(0,s.jsxs)(r.p,{children:["\u67e5\u770b /vars/system_core_",(0,s.jsx)(r.strong,{children:"count"})," \u548c /vars/process_cpu_",(0,s.jsx)(r.strong,{children:"usage"}),"\u3002\u5206\u522b\u662fcpu\u6838\u5fc3\u7684\u4e2a\u6570\uff0c\u548c\u6b63\u5728\u4f7f\u7528\u7684cpu\u6838\u6570\u3002"]}),"\n",(0,s.jsxs)(r.blockquote,{children:["\n",(0,s.jsx)(r.p,{children:"\u5982\u679cusage\u548ccount\u63a5\u8fd1\uff0c\u8bf4\u660eCPU\u4e0d\u591f\u7528\u4e86\u3002"}),"\n"]}),"\n",(0,s.jsx)(r.p,{children:"\u4e0b\u56fe\u4e2dcpu\u6838\u6570\u4e3a24\uff0c\u6b63\u5728\u4f7f\u7528\u7684\u6838\u5fc3\u6570\u662f20.9\u4e2a\uff0cCPU\u662f\u74f6\u9888\u4e86\u3002"}),"\n","\n",(0,s.jsx)("img",{src:A}),"\n",(0,s.jsx)(r.p,{children:"\u4e0b\u56fe\u4e2d\u6b63\u5728\u4f7f\u7528\u7684\u6838\u5fc3\u6570\u662f2.06\uff0cCPU\u662f\u591f\u7528\u7684\u3002"}),"\n","\n",(0,s.jsx)("img",{src:i}),"\n",(0,s.jsx)(r.h2,{id:"3\u5b9a\u4f4d\u95ee\u9898",children:"3.\u5b9a\u4f4d\u95ee\u9898"}),"\n",(0,s.jsx)(r.p,{children:"\u5982\u679cprocess_cpu_usage\u548ckthread_worker_usage\u63a5\u8fd1\uff0c\u8bf4\u660e\u662fcpu-bound\uff0c\u5de5\u4f5c\u7ebf\u7a0b\u5927\u90e8\u5206\u65f6\u95f4\u5728\u505a\u8ba1\u7b97\u3002"}),"\n",(0,s.jsx)(r.p,{children:"\u5982\u679cprocess_cpu_usage\u660e\u663e\u5c0f\u4e8ekthread_worker_usage\uff0c\u8bf4\u660e\u662fio-bound\uff0c\u5de5\u4f5c\u7ebf\u7a0b\u5927\u90e8\u5206\u65f6\u95f4\u5728\u963b\u585e\u3002"}),"\n",(0,s.jsx)(r.p,{children:"1 - process_cpu_usage / kthread_worker_usage\u5c31\u662f\u5927\u7ea6\u5728\u963b\u585e\u4e0a\u82b1\u8d39\u7684\u65f6\u95f4\u6bd4\u4f8b\uff0c\u6bd4\u5982process_cpu_usage = 2.4\uff0ckthread_worker_usage = 18.5\uff0c\u90a3\u4e48\u5de5\u4f5c\u7ebf\u7a0b\u5927\u7ea6\u82b1\u8d39\u4e8687.1% \u7684\u65f6\u95f4\u5728\u963b\u585e\u4e0a\u3002"}),"\n",(0,s.jsx)(r.h3,{id:"31-\u5b9a\u4f4dcpu-bound\u95ee\u9898",children:"3.1 \u5b9a\u4f4dcpu-bound\u95ee\u9898"}),"\n",(0,s.jsx)(r.p,{children:"\u539f\u56e0\u53ef\u80fd\u662f\u5355\u673a\u6027\u80fd\u4e0d\u8db3\uff0c\u6216\u4e0a\u6e38\u5206\u6d41\u4e0d\u5747\u3002"}),"\n",(0,s.jsx)(r.h4,{id:"\u6392\u9664\u4e0a\u6e38\u5206\u6d41\u4e0d\u5747\u7684\u5acc\u7591",children:"\u6392\u9664\u4e0a\u6e38\u5206\u6d41\u4e0d\u5747\u7684\u5acc\u7591"}),"\n",(0,s.jsxs)(r.p,{children:["\u5728\u4e0d\u540c\u670d\u52a1\u7684",(0,s.jsx)(r.a,{href:"http://krpc.baidu.com:8765/vars",children:"vars\u754c\u9762"}),"\u8f93\u5165qps\uff0c\u67e5\u770b\u4e0d\u540c\u7684qps\u662f\u5426\u7b26\u5408\u9884\u671f\uff0c\u5c31\u50cf\u8fd9\u6837\uff1a"]}),"\n","\n",(0,s.jsx)("img",{src:p}),"\n",(0,s.jsx)(r.p,{children:"\u6216\u8005\u5728\u547d\u4ee4\u884c\u4e2d\u7528curl\u76f4\u63a5\u8bbf\u95ee\uff0c\u50cf\u8fd9\u6837\uff1a"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-shell",children:"$ curl krpc.baidu.com:8765/vars/*qps*\nkthread_creation_qps : 95\nrpc_server_8765_example_echo_service_echo_qps : 57\n"})}),"\n",(0,s.jsxs)(r.p,{children:["\u5982\u679c\u4e0d\u540c\u673a\u5668\u7684\u5206\u6d41\u786e\u5b9e\u4e0d\u5747\uff0c\u4e14\u96be\u4ee5\u89e3\u51b3\uff0c\u53ef\u4ee5\u8003\u8651",(0,s.jsx)(r.a,{href:"/cppdev/docs/rpc/krpc/server#limiting-maximum-concurrency",children:"\u9650\u5236\u6700\u5927\u5e76\u53d1"}),"\u3002"]}),"\n",(0,s.jsx)(r.h4,{id:"\u4f18\u5316\u5355\u673a\u6027\u80fd",children:"\u4f18\u5316\u5355\u673a\u6027\u80fd"}),"\n",(0,s.jsxs)(r.p,{children:["\u8bf7\u4f7f\u7528",(0,s.jsx)(r.a,{href:"/cppdev/docs/rpc/krpc/cpu_profiler",children:"CPU profiler"}),"\u5206\u6790\u7a0b\u5e8f\u7684\u70ed\u70b9\uff0c\u7528\u6570\u636e\u9a71\u52a8\u4f18\u5316\u3002\u4e00\u822c\u6765\u8bf4\u4e00\u4e2a\u5361\u987f\u7684cpu-bound\u7a0b\u5e8f\u4e00\u822c\u80fd\u770b\u5230\u663e\u8457\u7684\u70ed\u70b9\u3002"]}),"\n",(0,s.jsx)(r.h3,{id:"32-\u5b9a\u4f4dio-bound\u95ee\u9898",children:"3.2 \u5b9a\u4f4dio-bound\u95ee\u9898"}),"\n",(0,s.jsx)(r.p,{children:"\u539f\u56e0\u53ef\u80fd\u6709\uff1a"}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsx)(r.li,{children:"\u7ebf\u7a0b\u786e\u5b9e\u914d\u5c11\u4e86"}),"\n",(0,s.jsx)(r.li,{children:"\u8bbf\u95ee\u4e0b\u6e38\u670d\u52a1\u7684client\u4e0d\u652f\u6301kthread\uff0c\u4e14\u5ef6\u65f6\u8fc7\u957f"}),"\n",(0,s.jsx)(r.li,{children:"\u963b\u585e\u6765\u81ea\u7a0b\u5e8f\u5185\u90e8\u7684\u9501\uff0cIO\u7b49\u7b49\u3002"}),"\n"]}),"\n",(0,s.jsx)(r.p,{children:"\u5982\u679c\u963b\u585e\u65e0\u6cd5\u907f\u514d\uff0c\u8003\u8651\u7528\u5f02\u6b65\u3002"}),"\n",(0,s.jsx)(r.h4,{id:"\u6392\u9664\u5de5\u4f5c\u7ebf\u7a0b\u6570\u4e0d\u591f\u7684\u5acc\u7591",children:"\u6392\u9664\u5de5\u4f5c\u7ebf\u7a0b\u6570\u4e0d\u591f\u7684\u5acc\u7591"}),"\n",(0,s.jsx)(r.p,{children:"\u5982\u679c\u7ebf\u7a0b\u6570\u4e0d\u591f\uff0c\u4f60\u53ef\u4ee5\u5c1d\u8bd5\u52a8\u6001\u8c03\u5927\u5de5\u4f5c\u7ebf\u7a0b\u6570\uff0c\u5207\u6362\u5230/flags\u9875\u9762\uff0c\u70b9\u51fbkthread_concurrency\u53f3\u8fb9\u7684(R):"}),"\n","\n",(0,s.jsx)("img",{src:l}),"\n",(0,s.jsx)(r.p,{children:"\u8fdb\u5165\u540e\u586b\u5165\u65b0\u7684\u7ebf\u7a0b\u6570\u786e\u8ba4\u5373\u53ef\uff1a"}),"\n","\n",(0,s.jsx)("img",{src:t}),"\n",(0,s.jsx)(r.p,{children:"\u56de\u5230/flags\u754c\u9762\u53ef\u4ee5\u770b\u5230kthread_concurrency\u5df2\u53d8\u6210\u4e86\u65b0\u503c\u3002"}),"\n","\n",(0,s.jsx)("img",{src:h}),"\n",(0,s.jsx)(r.p,{children:"\u4e0d\u8fc7\uff0c\u8c03\u5927\u7ebf\u7a0b\u6570\u672a\u5fc5\u6709\u7528\u3002\u5982\u679c\u5de5\u4f5c\u7ebf\u7a0b\u662f\u7531\u4e8e\u8bbf\u95ee\u4e0b\u6e38\u800c\u5927\u91cf\u963b\u585e\uff0c\u8c03\u5927\u5de5\u4f5c\u7ebf\u7a0b\u6570\u662f\u6ca1\u6709\u7528\u7684\u3002\u56e0\u4e3a\u771f\u6b63\u7684\u74f6\u9888\u5728\u4e8e\u540e\u7aef\u7684\uff0c\u8c03\u5927\u7ebf\u7a0b\u540e\u53ea\u662f\u8ba9\u6bcf\u4e2a\u7ebf\u7a0b\u7684\u963b\u585e\u65f6\u95f4\u53d8\u5f97\u66f4\u957f\u3002"}),"\n",(0,s.jsx)(r.p,{children:"\u6bd4\u5982\u5728\u6211\u4eec\u8fd9\u7684\u4f8b\u5b50\u4e2d\uff0c\u8c03\u5927\u7ebf\u7a0b\u540e\u65b0\u589e\u7684\u5de5\u4f5c\u7ebf\u7a0b\u4ecd\u7136\u88ab\u6253\u6ee1\u4e86\u3002"}),"\n","\n",(0,s.jsx)("img",{src:u}),"\n",(0,s.jsx)(r.h4,{id:"\u6392\u9664\u9501\u7684\u5acc\u7591",children:"\u6392\u9664\u9501\u7684\u5acc\u7591"}),"\n",(0,s.jsxs)(r.p,{children:["\u5982\u679c\u7a0b\u5e8f\u88ab\u67d0\u628a\u9501\u6321\u4f4f\u4e86\uff0c\u4e5f\u53ef\u80fd\u5448\u73b0\u51fa\u201cio-bound\u201d\u7684\u7279\u5f81\u3002\u5148\u7528",(0,s.jsx)(r.a,{href:"/cppdev/docs/rpc/krpc/contention_profiler",children:"contention profiler"}),"\u6392\u67e5\u9501\u7684\u7ade\u4e89\u72b6\u51b5\u3002"]}),"\n",(0,s.jsx)(r.h4,{id:"\u4f7f\u7528rpcz",children:"\u4f7f\u7528rpcz"}),"\n",(0,s.jsx)(r.p,{children:"rpcz\u53ef\u4ee5\u5e2e\u52a9\u4f60\u770b\u5230\u6700\u8fd1\u7684\u6240\u6709\u8bf7\u6c42\uff0c\u548c\u5904\u7406\u5b83\u4eec\u65f6\u5728\u6bcf\u4e2a\u9636\u6bb5\u82b1\u8d39\u7684\u65f6\u95f4\uff08\u5355\u4f4d\u90fd\u662f\u5fae\u79d2\uff09\u3002"}),"\n","\n",(0,s.jsx)("img",{src:g}),"\n",(0,s.jsx)(r.p,{children:"\u70b9\u51fb\u4e00\u4e2aspan\u94fe\u63a5\u540e\u770b\u5230\u8be5\u6b21RPC\u4f55\u65f6\u5f00\u59cb\uff0c\u6bcf\u4e2a\u9636\u6bb5\u82b1\u8d39\u7684\u65f6\u95f4\uff0c\u4f55\u65f6\u7ed3\u675f\u3002"}),"\n","\n",(0,s.jsx)("img",{src:x}),"\n",(0,s.jsx)(r.p,{children:"\u8fd9\u662f\u4e00\u4e2a\u5178\u578b\u7684server\u5728\u4e25\u91cd\u963b\u585e\u7684\u4f8b\u5b50\u3002\u4ece\u63a5\u6536\u5230\u8bf7\u6c42\u5230\u5f00\u59cb\u8fd0\u884c\u82b1\u8d39\u4e8620ms\uff0c\u8bf4\u660eserver\u5df2\u7ecf\u6ca1\u6709\u8db3\u591f\u7684\u5de5\u4f5c\u7ebf\u7a0b\u6765\u53ca\u65f6\u5b8c\u6210\u5de5\u4f5c\u4e86\u3002"}),"\n",(0,s.jsx)(r.p,{children:"\u73b0\u5728\u8fd9\u4e2aspan\u7684\u4fe1\u606f\u6bd4\u8f83\u5c11\uff0c\u6211\u4eec\u53bb\u7a0b\u5e8f\u91cc\u52a0\u4e00\u4e9b\u3002\u4f60\u53ef\u4ee5\u4f7f\u7528TRACEPRINTF\u5411rpcz\u6253\u5370\u65e5\u5fd7\u3002\u6253\u5370\u5185\u5bb9\u4f1a\u5d4c\u5165\u5728rpcz\u7684\u65f6\u95f4\u6d41\u4e2d\u3002"}),"\n","\n",(0,s.jsx)("img",{src:j}),"\n",(0,s.jsx)(r.p,{children:"\u91cd\u65b0\u8fd0\u884c\u540e\uff0c\u67e5\u770b\u4e00\u4e2aspan\uff0c\u91cc\u9762\u7684\u6253\u5370\u5185\u5bb9\u679c\u7136\u5305\u542b\u4e86\u6211\u4eec\u589e\u52a0\u7684TRACEPRINTF\u3002"}),"\n","\n",(0,s.jsx)("img",{src:v}),"\n",(0,s.jsx)(r.p,{children:"\u5728\u8fd0\u884c\u5230\u7b2c\u4e00\u6761TRACEPRINTF\u524d\uff0c\u7528\u6237\u56de\u8c03\u5df2\u8fd0\u884c\u4e862051\u5fae\u79d2\uff08\u5047\u8bbe\u8fd9\u7b26\u5408\u6211\u4eec\u7684\u9884\u671f\uff09\uff0c\u7d27\u63a5\u7740foobar()\u5374\u82b1\u8d39\u4e868036\u5fae\u79d2\uff0c\u6211\u4eec\u672c\u6765\u4ee5\u4e3a\u8fd9\u4e2a\u51fd\u6570\u4f1a\u5f88\u5feb\u8fd4\u56de\u7684\u3002\u8303\u56f4\u8fdb\u4e00\u6b65\u7f29\u5c0f\u4e86\u3002"}),"\n",(0,s.jsx)(r.p,{children:"\u91cd\u590d\u8fd9\u4e2a\u8fc7\u7a0b\uff0c\u76f4\u5230\u627e\u5230\u90a3\u4e2a\u9020\u6210\u95ee\u9898\u7684\u51fd\u6570\u3002"}),"\n",(0,s.jsx)(r.h4,{id:"\u4f7f\u7528kvar",children:"\u4f7f\u7528kvar"}),"\n",(0,s.jsx)(r.p,{children:"TRACEPRINTF\u4e3b\u8981\u9002\u5408\u82e5\u5e72\u6b21\u7684\u51fd\u6570\u8c03\u7528\uff0c\u5982\u679c\u4e00\u4e2a\u51fd\u6570\u8c03\u7528\u4e86\u5f88\u591a\u6b21\uff0c\u6216\u8005\u51fd\u6570\u672c\u8eab\u5f00\u9500\u5f88\u5c0f\uff0c\u6bcf\u6b21\u90fd\u5f80rpcz\u6253\u5370\u65e5\u5fd7\u662f\u4e0d\u5408\u9002\u7684\u3002\u8fd9\u65f6\u5019\u4f60\u53ef\u4ee5\u4f7f\u7528kvar\u3002"}),"\n",(0,s.jsxs)(r.p,{children:[(0,s.jsx)(r.a,{href:"/cppdev/docs/rpc/krpc/kvar",children:"kvar"}),"\u662f\u4e00\u4e2a\u591a\u7ebf\u7a0b\u4e0b\u7684\u8ba1\u6570\u5e93\uff0c\u53ef\u4ee5\u4ee5\u6781\u4f4e\u7684\u5f00\u9500\u7edf\u8ba1\u7528\u6237\u9012\u6765\u7684\u6570\u503c\uff0c\u76f8\u6bd4\u201c\u6253\u65e5\u5fd7\u5927\u6cd5\u201d\u51e0\u4e4e\u4e0d\u5f71\u54cd\u7a0b\u5e8f\u884c\u4e3a\u3002\u4f60\u4e0d\u7528\u5b8c\u5168\u4e86\u89e3kvar\u7684\u5b8c\u6574\u7528\u6cd5\uff0c\u53ea\u8981\u4f7f\u7528kvar::LatencyRecorder\u5373\u53ef\u3002"]}),"\n",(0,s.jsx)(r.p,{children:"\u4eff\u7167\u5982\u4e0b\u4ee3\u7801\u5bf9foobar\u7684\u8fd0\u884c\u65f6\u95f4\u8fdb\u884c\u76d1\u63a7\u3002"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-c++",children:'#include <kutil/time.h>\n#include <kvar/kvar.h>\n \nkvar::LatencyRecorder g_foobar_latency("foobar");\n \n...\nvoid search() {\n    ...\n    kutil::Timer tm;\n    tm.start();\n    foobar();\n    tm.stop();\n    g_foobar_latency << tm.u_elapsed();\n    ...\n}\n'})}),"\n",(0,s.jsx)(r.p,{children:"\u91cd\u65b0\u8fd0\u884c\u7a0b\u5e8f\u540e\uff0c\u5728vars\u7684\u641c\u7d22\u6846\u4e2d\u952e\u5165foobar\uff0c\u663e\u793a\u5982\u4e0b\uff1a"}),"\n","\n",(0,s.jsx)("img",{src:m}),"\n",(0,s.jsx)(r.p,{children:"\u70b9\u51fb\u4e00\u4e2akvar\u53ef\u4ee5\u770b\u5230\u52a8\u6001\u56fe\uff0c\u6bd4\u5982\u70b9\u51fbcdf\u540e\u770b\u5230"}),"\n","\n",(0,s.jsx)("img",{src:k}),"\n",(0,s.jsx)(r.p,{children:"\u6839\u636e\u5ef6\u65f6\u7684\u5206\u5e03\uff0c\u4f60\u53ef\u4ee5\u63a8\u6d4b\u51fa\u8fd9\u4e2a\u51fd\u6570\u7684\u6574\u4f53\u884c\u4e3a\uff0c\u5bf9\u5927\u591a\u6570\u8bf7\u6c42\u8868\u73b0\u5982\u4f55\uff0c\u5bf9\u957f\u5c3e\u8868\u73b0\u5982\u4f55\u3002"}),"\n",(0,s.jsx)(r.p,{children:"\u4f60\u53ef\u4ee5\u5728\u5b50\u51fd\u6570\u4e2d\u7ee7\u7eed\u8fd9\u4e2a\u8fc7\u7a0b\uff0c\u589e\u52a0\u66f4\u591akvar\uff0c\u5e76\u6bd4\u5bf9\u4e0d\u540c\u7684\u5206\u5e03\uff0c\u6700\u540e\u5b9a\u4f4d\u6765\u6e90\u3002"}),"\n",(0,s.jsx)(r.h4,{id:"\u53ea\u4f7f\u7528\u4e86krpc-client",children:"\u53ea\u4f7f\u7528\u4e86krpc client"}),"\n",(0,s.jsxs)(r.p,{children:["\u5f97\u6253\u5f00dummy server\u63d0\u4f9b\u5185\u7f6e\u670d\u52a1\uff0c\u65b9\u6cd5\u89c1",(0,s.jsx)(r.a,{href:"/cppdev/docs/rpc/krpc/dummy_server",children:"\u8fd9\u91cc"}),"\u3002"]})]})}function B(e={}){const{wrapper:r}={...(0,d.R)(),...e.components};return r?(0,s.jsx)(r,{...e,children:(0,s.jsx)(Y,{...e})}):Y(e)}},8453:(e,r,n)=>{n.d(r,{R:()=>a,x:()=>o});var c=n(6540);const s={},d=c.createContext(s);function a(e){const r=c.useContext(d);return c.useMemo(function(){return"function"==typeof e?e(r):{...r,...e}},[r,e])}function o(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),c.createElement(d.Provider,{value:r},e.children)}}}]);