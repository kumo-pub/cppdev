"use strict";(globalThis.webpackChunkwebsite=globalThis.webpackChunkwebsite||[]).push([[2169],{8453:(e,n,s)=>{s.d(n,{R:()=>l,x:()=>d});var r=s(6540);const i={},t=r.createContext(i);function l(e){const n=r.useContext(t);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:l(e.components),r.createElement(t.Provider,{value:n},e.children)}},9636:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>d,default:()=>h,frontMatter:()=>l,metadata:()=>r,toc:()=>o});const r=JSON.parse('{"id":"store/cloud/aws","title":"AWS Integration","description":"This document describes how to integrate AWS services into a Kumo deployment.","source":"@site/docs/store/cloud/aws.mdx","sourceDirName":"store/cloud","slug":"/store/cloud/aws","permalink":"/cppdev/docs/store/cloud/aws","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"AWS Integration"},"sidebar":"tutorialSidebar","previous":{"title":"Cloud Storage Overview","permalink":"/cppdev/docs/store/cloud/"},"next":{"title":"Azure Integration","permalink":"/cppdev/docs/store/cloud/azure"}}');var i=s(4848),t=s(8453);const l={title:"AWS Integration"},d="AWS Integration with Kumo Stack",c={},o=[{value:"1. Supported AWS Components via <code>kmpkg</code>",id:"1-supported-aws-components-via-kmpkg",level:2},{value:"2. Integration Patterns",id:"2-integration-patterns",level:2},{value:"2.1 S3 Object Storage",id:"21-s3-object-storage",level:3},{value:"2.2 Event Streaming",id:"22-event-streaming",level:3},{value:"2.3 Compute (Lambda)",id:"23-compute-lambda",level:3},{value:"3. KV Layer Backup Strategies",id:"3-kv-layer-backup-strategies",level:2},{value:"4. Key Design and Throughput Considerations",id:"4-key-design-and-throughput-considerations",level:2},{value:"5. Operational Recommendations",id:"5-operational-recommendations",level:2},{value:"6. Example Workflow",id:"6-example-workflow",level:2},{value:"7. Summary",id:"7-summary",level:2}];function a(e){const n={blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"aws-integration-with-kumo-stack",children:"AWS Integration with Kumo Stack"})}),"\n",(0,i.jsxs)(n.p,{children:["This document describes ",(0,i.jsx)(n.strong,{children:"how to integrate AWS services into a Kumo deployment"}),".\nThe focus is ",(0,i.jsx)(n.strong,{children:"practical integration and operational guidance"}),", not a cloud recommendation."]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsxs)(n.h2,{id:"1-supported-aws-components-via-kmpkg",children:["1. Supported AWS Components via ",(0,i.jsx)(n.code,{children:"kmpkg"})]}),"\n",(0,i.jsxs)(n.p,{children:["Kumo\u2019s package manager ",(0,i.jsx)(n.code,{children:"kmpkg"})," supports the following AWS components:"]}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Package"}),(0,i.jsx)(n.th,{children:"Version"}),(0,i.jsx)(n.th,{children:"Description"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"aws-c-auth"}),(0,i.jsx)(n.td,{children:"0.9.4"}),(0,i.jsx)(n.td,{children:"AWS client-side authentication (C99)."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"aws-c-cal"}),(0,i.jsx)(n.td,{children:"0.9.13"}),(0,i.jsx)(n.td,{children:"Cryptography primitives wrapper (C99)."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"aws-c-common"}),(0,i.jsx)(n.td,{children:"0.12.6"}),(0,i.jsx)(n.td,{children:"Common utilities used across AWS libraries."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"aws-c-compression"}),(0,i.jsx)(n.td,{children:"0.3.1"}),(0,i.jsx)(n.td,{children:"Huffman encode/decode implementation."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"aws-c-event-stream"}),(0,i.jsx)(n.td,{children:"0.5.9"}),(0,i.jsx)(n.td,{children:"Implementation of vnd.amazon.event-stream."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"aws-c-http"}),(0,i.jsx)(n.td,{children:"0.10.7"}),(0,i.jsx)(n.td,{children:"HTTP/1.1 and HTTP/2 client."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"aws-c-io"}),(0,i.jsx)(n.td,{children:"0.24.0"}),(0,i.jsx)(n.td,{children:"IO and TLS handling for application protocols."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"aws-c-mqtt"}),(0,i.jsx)(n.td,{children:"0.13.3"}),(0,i.jsx)(n.td,{children:"MQTT 3.1.1 implementation."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"aws-c-s3"}),(0,i.jsx)(n.td,{children:"0.11.3"}),(0,i.jsx)(n.td,{children:"S3 client library."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"aws-c-sdkutils"}),(0,i.jsx)(n.td,{children:"0.2.4"}),(0,i.jsx)(n.td,{children:"Logging, retry logic, and error handling utilities."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"aws-checksums"}),(0,i.jsx)(n.td,{children:"0.2.8"}),(0,i.jsx)(n.td,{children:"HW-accelerated CRC32/CRC32c fallback implementation."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"aws-crt-cpp"}),(0,i.jsx)(n.td,{children:"0.36.0"}),(0,i.jsx)(n.td,{children:"C++ wrapper over aws-c-* libraries with transport abstraction."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"aws-lambda-cpp"}),(0,i.jsx)(n.td,{children:"0.2.10"}),(0,i.jsx)(n.td,{children:"Runtime for AWS Lambda (C++)."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"aws-sdk-cpp"}),(0,i.jsx)(n.td,{children:"1.11.710"}),(0,i.jsx)(n.td,{children:"Full AWS SDK for C++."})]})]})]}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsxs)(n.p,{children:["These libraries provide the ",(0,i.jsx)(n.strong,{children:"low-level building blocks"})," to integrate AWS S3, MQTT, Lambda, and HTTP services into Kumo applications."]}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"2-integration-patterns",children:"2. Integration Patterns"}),"\n",(0,i.jsx)(n.h3,{id:"21-s3-object-storage",children:"2.1 S3 Object Storage"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Use Cases:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Backup RocksDB snapshots, SST files, or KV layer exports."}),"\n",(0,i.jsx)(n.li,{children:"Store large datasets for long-term retention."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Best Practices:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Prefer ",(0,i.jsx)(n.strong,{children:"single object per RocksDB snapshot or SST file"})," to simplify restore."]}),"\n",(0,i.jsxs)(n.li,{children:["Enable ",(0,i.jsx)(n.strong,{children:"versioning"})," to prevent accidental data loss."]}),"\n",(0,i.jsxs)(n.li,{children:["For very large backups (>5GB), use ",(0,i.jsx)(n.strong,{children:"multipart upload"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["Consider ",(0,i.jsx)(n.strong,{children:"prefix-based sharding"})," for high-throughput writes (",(0,i.jsx)(n.code,{children:"snapshots/20260104/part-0000X.sst"}),") to avoid S3 write bottlenecks."]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Example: Upload RocksDB SST File"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-cpp",children:'#include <aws/s3/S3Client.h>\n#include <aws/s3/model/PutObjectRequest.h>\n#include <fstream>\n\nAws::S3::S3Client s3_client;\nAws::S3::Model::PutObjectRequest request;\nrequest.SetBucket("kumo-backup");\nrequest.SetKey("rocksdb-snapshot-20260104.sst");\n\nauto input_data = Aws::MakeShared<Aws::FStream>("snapshot", "snapshot.sst", std::ios::in | std::ios::binary);\nrequest.SetBody(input_data);\n\nauto outcome = s3_client.PutObject(request);\nif (!outcome.IsSuccess()) {\n    std::cerr << "Failed to upload snapshot: " << outcome.GetError().GetMessage() << "\\n";\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"22-event-streaming",children:"2.2 Event Streaming"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Use Cases:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Publish KV change events to an event stream."}),"\n",(0,i.jsx)(n.li,{children:"Integrate with Lambda or other consumers."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Libraries:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"aws-c-event-stream"})}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"aws-c-http"})," / ",(0,i.jsx)(n.code,{children:"aws-c-mqtt"})]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Best Practices:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Use ",(0,i.jsx)(n.strong,{children:"batched event sending"})," to reduce overhead."]}),"\n",(0,i.jsxs)(n.li,{children:["Monitor ",(0,i.jsx)(n.strong,{children:"retry counts"})," and ",(0,i.jsx)(n.strong,{children:"latency"})," using ",(0,i.jsx)(n.code,{children:"aws-c-sdkutils"}),"."]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"23-compute-lambda",children:"2.3 Compute (Lambda)"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Use Cases:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Trigger automatic snapshot uploads to S3."}),"\n",(0,i.jsx)(n.li,{children:"Run data-processing or alerting scripts on KV layer changes."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Libraries:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"aws-lambda-cpp"})}),"\n",(0,i.jsxs)(n.li,{children:["Integrates with ",(0,i.jsx)(n.code,{children:"aws-c-s3"})," or ",(0,i.jsx)(n.code,{children:"aws-c-event-stream"})," for input/output."]}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"3-kv-layer-backup-strategies",children:"3. KV Layer Backup Strategies"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"RocksDB Snapshots:"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Lightweight, consistent view of DB at a point in time."}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Can upload ",(0,i.jsx)(n.strong,{children:"SST files directly"})," to S3."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Checkpoint Files (Backup API):"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Creates a ",(0,i.jsx)(n.strong,{children:"full copy of the DB directory"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Useful for recovery or migration."}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Operational Note:"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Prefer ",(0,i.jsx)(n.strong,{children:"minimal column families"})," to simplify backup/restore."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"For very large DBs, incremental backups via SST file uploads are recommended."}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"4-key-design-and-throughput-considerations",children:"4. Key Design and Throughput Considerations"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Use ",(0,i.jsx)(n.strong,{children:"fixed-length prefix keys"})," for KV range traversal."]}),"\n",(0,i.jsx)(n.li,{children:"Randomize prefixes if writing at very high throughput to avoid S3 object hot spots."}),"\n",(0,i.jsx)(n.li,{children:"SST file upload should respect RocksDB compaction patterns: large sequential files are preferred."}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"5-operational-recommendations",children:"5. Operational Recommendations"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Environment Isolation:"})," Separate buckets/prefixes for dev, staging, prod."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Throughput:"})," Optimize key design to avoid S3 hot spots (see above)."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Consistency:"})," S3 overwrite/delete is eventually consistent; design backup and restore accordingly."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Monitoring:"})," Use ",(0,i.jsx)(n.code,{children:"aws-c-sdkutils"})," for logging retries, errors, and performance."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Restore:"})," Always test backup restore in a staging environment before production use."]}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"6-example-workflow",children:"6. Example Workflow"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["Take a ",(0,i.jsx)(n.strong,{children:"RocksDB snapshot"})," using ",(0,i.jsx)(n.code,{children:"rocksdb::DB::GetSnapshot()"}),"."]}),"\n",(0,i.jsx)(n.li,{children:"Flush column families if needed."}),"\n",(0,i.jsxs)(n.li,{children:["Save ",(0,i.jsx)(n.strong,{children:"SST files"})," to a local directory."]}),"\n",(0,i.jsxs)(n.li,{children:["Upload SST files to S3 using ",(0,i.jsx)(n.code,{children:"aws-c-s3"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["Optionally, trigger a ",(0,i.jsx)(n.strong,{children:"Lambda function"})," to validate or process the snapshot."]}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"7-summary",children:"7. Summary"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["AWS integration in Kumo is ",(0,i.jsx)(n.strong,{children:"operational-first"}),", not advisory."]}),"\n",(0,i.jsxs)(n.li,{children:["Use ",(0,i.jsx)(n.strong,{children:"S3 for KV backup"}),", ",(0,i.jsx)(n.strong,{children:"Event Stream for messaging"}),", and ",(0,i.jsx)(n.strong,{children:"Lambda for automation"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["Prefer ",(0,i.jsx)(n.strong,{children:"minimal CFs, fixed prefix keys, and direct SST uploads"})," for maintainable and scalable deployments."]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(a,{...e})}):a(e)}}}]);